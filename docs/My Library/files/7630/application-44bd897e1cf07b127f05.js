(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{102:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(5);function o(){return new Promise(function(e,t){var n=document.querySelector("meta[name='current-region']"),o=Object(r.get)(n,"content");void 0===o&&t("no-region"),e(o)})}},11:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var a=function(){function e(t){var n=this;r(this,e);var o=Object.assign({type:"notice"},t);this.body=document.createElement("p"),this.body.classList.add("flash","hidden",o.type),this.body.textContent=o.message,this.body.addEventListener("click",function(){return n.remove()})}return i(e,null,[{key:"parse",value:function(t){var n=new e({});n.body=t,n.body.addEventListener("click",function(){return n.remove()}),n.startRemoveTimeout()}}]),i(e,[{key:"show",value:function(){var e=this;document.body.appendChild(this.body),setTimeout(function(){e.body.classList.add("show"),e.body.classList.remove("hidden")},25),this.startRemoveTimeout()}},{key:"startRemoveTimeout",value:function(){setTimeout(this.remove.bind(this),5e3)}},{key:"remove",value:function(){var e=this;this.body.classList.remove("show"),this.body.classList.add("hidden"),setTimeout(function(){return e.body.remove()},500)}}]),e}(),s=function(){function e(){r(this,e)}return i(e,null,[{key:"bindServerFlash",value:function(){Array.from(document.querySelectorAll("p.flash")).forEach(function(e){return a.parse(e)})}},{key:"now",value:function(e,t){new a({type:e,message:t}).show()}}]),e}();t.a=s},1112:function(e,t,n){"use strict";n.r(t);var r=n(150),o=n(12),i=n(83);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p;t.default=((p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,o.default),n=t,p=[{key:"initClass",value:function(){this.prototype.events={"click .content-authors .content-authors-toggle":"_toggleColumnSidebar","click .content-translations .content-translations-toggle":"_toggleTranslationSidebar"}}}],(a=[{key:"initialize",value:function(e){return l(u(t.prototype),"initialize",this).call(this,e),this._toggleColumnSidebar=this._toggleColumnSidebar.bind(this),this._toggleTranslationSidebar=this._toggleTranslationSidebar.bind(this),Object(i.a)("/editorial/actions_menu/columns/:column_id".replace(":column_id",e.id)),new r.a}},{key:"_toggleColumnSidebar",value:function(e){return e.preventDefault(),this.$el.find(".content-sidebar").toggleClass("open")}},{key:"_toggleTranslationSidebar",value:function(e){return e.preventDefault(),this.$el.find(".content-translations").toggleClass("open")}}])&&s(n.prototype,a),p&&s(n,p),t}()).initClass(),p=p)},1116:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".buttonContainer-3A-O1 {\n  padding: 10px 0;\n}\n.panel-2_t7f {\n  background: #f9f9f9;\n  padding: 12px;\n  margin-bottom: 12px;\n}",""]),t.locals={buttonContainer:"buttonContainer-3A-O1",panel:"panel-2_t7f"}},1117:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".dialogOptions-2RRHx .icon-YI7-1 {\n  width: 40px;\n}\n.dialogOptions-2RRHx .link-2lP7e {\n  line-height: 40px;\n  font-size: 16px;\n}",""]),t.locals={dialogOptions:"dialogOptions-2RRHx",icon:"icon-YI7-1",link:"link-2lP7e"}},1118:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".subscriptionOption-32_Ap {\n  clear: both;\n  list-style: none;\n  padding-bottom: 10px;\n  clear: both;\n}\n.icon-36CkA {\n  float: left;\n  margin-right: 10px;\n  width: 20px;\n}\n.link-1SK5P {\n  font-size: 12px;\n  color: #727272;\n}\n.link-1SK5P:hover {\n  color: #262626;\n}",""]),t.locals={subscriptionOption:"subscriptionOption-32_Ap",icon:"icon-36CkA",link:"link-1SK5P"}},1177:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,"@media screen and (max-width: 600px), print {\n  .republishPanel-3UFTR {\n    display: none;\n  }\n}",""]),t.locals={republishPanel:"republishPanel-3UFTR"}},1178:function(e,t,n){"use strict";n.r(t);var r=n(12);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,c(t).apply(this,arguments))}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["default"]),n=t,(o=[{key:"initialize",value:function(e){return s(c(t.prototype),"initialize",this).call(this,e),this.$("input#user_password").focus()}}])&&i(n.prototype,o),u&&i(n,u),t}()},1179:function(e,t,n){"use strict";n.r(t);var r,o=n(1),i=n.n(o),a=n(50),s=n(48),c=n(461),l=n(12);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,h(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,l.default),n=t,o=[{key:"initClass",value:function(){this.prototype.events={"change li.file.input input":"showPhoto","click li.choice input.other-radio-option":"chooseOther","change li.choice .other-option-label input[type=radio]":"focusOtherInput"}}}],(r=[{key:"initialize",value:function(e){return d(h(t.prototype),"initialize",this).call(this,e),this._crop=this._crop.bind(this),this.autocompleteInstitution(),this.institutionSelect=i()("#profile_form_institution"),this.autocompleteJobTitle()}},{key:"showPhoto",value:function(e){var t=this,n=i()(".avatar > img"),r=i()(e.currentTarget).get(0);if(this._fileReaderExists()&&this._inputHasFiles(r)){var o=new FileReader;return o.onload=function(e){var r=new Image;return r.onload=function(e){return t._crop(n,e.currentTarget)},r.src=e.target.result},o.readAsDataURL(r.files[0])}}},{key:"chooseOther",value:function(e){var t=i()(e.currentTarget).siblings("label.other-radio-option").find("input[type=radio]");return i()("input[name='".concat(t.attr("name"),"']")).prop("checked",!1),t.prop("checked",!0)}},{key:"focusOtherInput",value:function(e){return i()(e.currentTarget).parent().siblings(".other-radio-option").focus()}},{key:"autocompleteInstitution",value:function(){var e=i()("#profile_form_institution"),t=new a.default({title:e.data("label"),placeholder:"Select an institution",source:"/institutions/search.json",clearable:!0});return e.after(t.$el),t.on("clear",function(){return e.val("")}),t.on("selected",function(t){return e.val(t.institution.id)})}},{key:"autocompleteJobTitle",value:function(){return Object(s.a)(i()(".occupation.autocomplete"),{source:c.a.list,minLength:2,autoFocus:!0,delay:200,select:function(e,t){return this.val(t.item)}})}},{key:"_fileReaderExists",value:function(){return"undefined"!=typeof FileReader}},{key:"_inputHasFiles",value:function(e){return e.files&&e.files[0]}},{key:"_getCroppedImageElementFor",value:function(e){var t=e.parent(),n=t.find(".replacedAvatar");return n.length>0?n:(t.append("<div class='replacedAvatar'></div>"),t.find(".replacedAvatar"))}},{key:"_crop",value:function(e,t){var n=this._getCroppedImageElementFor(e);return n.hide(),n.css("background","url(".concat(t.src,") no-repeat center center")),n.css("background-size","cover"),n.width(e.width()),n.height(e.height()),e.hide(),n.fadeIn()}}])&&f(n.prototype,r),o&&f(n,o),t}()).initClass(),r=r)},1180:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n(150);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(i=[{key:"initialize",value:function(e){return c(l(t.prototype),"initialize",this).call(this,e),new o.a}}])&&a(n.prototype,i),f&&a(n,f),t}()},1181:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(12),a=n(83);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d;t.default=((d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default),n=t,s=[{key:"initClass",value:function(){this.prototype.events={"click #tabbed-navigation a":"_clickHandheldTab"}}}],(r=[{key:"initialize",value:function(e){u(f(t.prototype),"initialize",this).call(this,e),Object(a.a)("/editorial/actions_menu/institutions/:institution_id".replace(":institution_id",e.id)),this.institutionSlug=window.location.pathname.replace("/institutions/","")}},{key:"_clickHandheldTab",value:function(e){e.preventDefault();var t=o()(e.target).attr("href");switch(o()("#tabbed-navigation a.active").removeClass("active"),o()(e.target).addClass("active"),t){case"#articles":return o()(".institution-page").removeClass("sm-display-contributors sm-display-jobs-and-events"),o()(".institution-page").addClass("sm-display-articles");case"#contributors":return o()(".institution-page").removeClass("sm-display-articles sm-display-jobs-and-events"),o()(".institution-page").addClass("sm-display-contributors");case"#jobs-and-events":return o()(".institution-page").removeClass("sm-display-articles sm-display-contributors"),o()(".institution-page").addClass("sm-display-jobs-and-events")}}}])&&c(n.prototype,r),s&&c(n,s),t}()).initClass(),d=d)},1182:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".container-3Q9yB {\n  width: 100%;\n  margin: 0 0 0.5rem;\n}\n.container-3Q9yB .button-1PA2D {\n  padding: 0.5rem 2rem;\n  height: 40px;\n}\n.fullWidth-2568B {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: end;\n  -webkit-align-items: flex-end;\n  -ms-flex-align: end;\n  align-items: flex-end;\n}\n.fullWidth-2568B .button-1PA2D {\n  margin-left: 1rem;\n}\n.stacked-3Atfp {\n  display: block;\n}\n.stacked-3Atfp .button-1PA2D {\n  display: block;\n  margin: 1rem 0 2rem;\n}\n.input-T19DV input[type=text] {\n  -webkit-box-sizing: content-box;\n  box-sizing: content-box;\n  padding: 0.5rem 1rem;\n  border: none;\n}",""]),t.locals={container:"container-3Q9yB",button:"button-1PA2D",fullWidth:"fullWidth-2568B",stacked:"stacked-3Atfp",input:"input-T19DV"}},1183:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".disclosure-1-t6S {\n  font-size: 10px;\n  margin-top: 20px;\n}",""]),t.locals={disclosure:"disclosure-1-t6S"}},1184:function(e,t,n){(e.exports=n(39)(!1)).push([e.i,".grecaptcha-badge {\n  visibility: hidden;\n}",""])},1185:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".container-27B-z {\n  width: 100%;\n  margin: 0 0 0.5rem;\n}\n.container-27B-z .button-3yQ5G {\n  padding: 0.5rem 2rem;\n  height: 40px;\n}\n.fullWidth-2XGqT {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: end;\n  -webkit-align-items: flex-end;\n  -ms-flex-align: end;\n  align-items: flex-end;\n}\n.fullWidth-2XGqT .button-3yQ5G {\n  margin-left: 1rem;\n}\n.stacked-2rKyR {\n  display: block;\n}\n.stacked-2rKyR .button-3yQ5G {\n  display: block;\n  margin: 1rem 0 2rem;\n}\n.input-n89tt input[type=text] {\n  -webkit-box-sizing: content-box;\n  box-sizing: content-box;\n  padding: 0.5rem 1rem;\n  border: none;\n}",""]),t.locals={container:"container-27B-z",button:"button-3yQ5G",fullWidth:"fullWidth-2XGqT",stacked:"stacked-2rKyR",input:"input-n89tt"}},1186:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(12),o=n(83);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,i,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(i=[{key:"initialize",value:function(e){c(l(t.prototype),"initialize",this).call(this,e),Object(o.a)("/editorial/actions_menu/partners/:partner_id".replace(":partner_id",e.id))}}])&&a(n.prototype,i),f&&a(n,f),t}()},1187:function(e,t,n){"use strict";n.r(t);var r,o=n(1),i=n.n(o),a=n(12);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a.default),n=t,o=[{key:"initClass",value:function(){this.prototype.events={"change #podcast-sort":"changeSort"}}}],(r=[{key:"initialize",value:function(e){return u(f(t.prototype),"initialize",this).call(this,e)}},{key:"changeSort",value:function(){var e=i()("#podcast-sort").val(),t="".concat(document.location.pathname,"?sort=").concat(e);return document.location.href=t}}])&&c(n.prototype,r),o&&c(n,o),t}()).initClass(),r=r)},1188:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n(0),i=n.n(o),a=n(13),s=n.n(a),c=n(466);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=f(this,p(t).call(this))).initListenAndSubscribe(e),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["default"]),n=t,(o=[{key:"initListenAndSubscribe",value:function(e){if(document.getElementById("podcast-listen-and-subscribe")){var t=document.createElement("div"),n=document.getElementById("podcast-listen-and-subscribe");n.parentNode.insertBefore(t,n);var r=i.a.createElement(c.a,e);s.a.render(r,t)}}}])&&u(n.prototype,o),a&&u(n,a),t}();t.default=h},1189:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(461),a=n(12),s=n(48);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,a["default"]),n=t,(r=[{key:"initialize",value:function(e){return f(p(t.prototype),"initialize",this).call(this,e),this.initAutoComplete()}},{key:"initAutoComplete",value:function(){return Object(s.a)(o()(".research-code.autocomplete"),{source:"/field_of_researches.json",minLength:2,autoFocus:!0,delay:200,select:function(e,t){return e.preventDefault(),o()(this).val(t.item.code)}}),Object(s.a)(o()(".funding-source.autocomplete"),{source:"/funding_sources.json",minLength:2,autoFocus:!0,delay:200,select:function(e,t){return e.preventDefault(),o()(this).val(t.item.label)}}),Object(s.a)(o()(".credential-title.autocomplete"),{source:i.a.list,minLength:2,autoFocus:!0,delay:200,select:function(e,t){return this.val(t.item)}}),Object(s.a)(o()(".professional-membership.autocomplete"),{source:"/professional_memberships.json",select:function(e,t){return e.preventDefault(),o()(this).val(t.item.label)}})}}])&&l(n.prototype,r),c&&l(n,c),t}()},1190:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".selector-2heQc {\n  margin-bottom: 30px;\n}\n.selector-2heQc label {\n  float: left;\n  font-weight: bold;\n  margin-right: 15px;\n}",""]),t.locals={selector:"selector-2heQc"}},1191:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".pending-confirmation-container-3ZqxC {\n  text-align: center;\n}\n.pending-confirmation-message-container-BI5LW {\n  margin-top: 10px;\n}\n.pending-confirmation-resend-button-ctOLr {\n  width: 60%;\n}",""]),t.locals={"pending-confirmation-container":"pending-confirmation-container-3ZqxC","pending-confirmation-message-container":"pending-confirmation-message-container-BI5LW","pending-confirmation-resend-button":"pending-confirmation-resend-button-ctOLr"}},1192:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,"/**\n[Name] Colours\n[Section] Carlton\n\n[Description]\n\nShared colours we reuse where we can.\n\n[Example]\n<%\n  colours = {\n    '$tc_red' => '#d8352a',\n    '$tc_grey' => '#383838',\n    '$conv_grey' => '#727272',\n    '$conv_grey_dark' => '#5d5d5d',\n    '$conv_grey_light' => '#f4f5f7',\n    '$facebook_blue' => '#3a5a93',\n    '$twitter_blue' => '#00b0e9',\n    '$linkedin_blue' => '#0181b2',\n    '$orcid_green' => '#a6ce39',\n    '$rss_orange' => '#eb7f3e',\n    '$top-bar-border' => '#eaeaea',\n    '$google_orange' => '#de4931',\n    '$whatsapp_blue' => '#455a64',\n    '$fb_messenger_blue' => '#0084ff'\n  }\n%>\n\n<ul class=\"vivus-colour-examples\">\n  <% colours.each do |colour| %>\n    <li style=\"\n      background-color: <%= colour[1] %>;\n      list-style: none;\n      float: left;\n      width: 150px;\n      height: 150px;\n      margin: 0 20px 60px 0;\n      position: relative;\">\n      <span style=\"position: absolute; bottom: -40px;\">\n        <%= colour[0] %><br /><%= colour[1] %>\n      </span>\n    </li>\n  <% end %>\n</ul>\n**/\n.container-1C2LN {\n  -webkit-box-align: stretch;\n  -webkit-align-items: stretch;\n  -ms-flex-align: stretch;\n  align-items: stretch;\n  background: #fafafa;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 20px;\n}\n\n.image-1u3UG {\n  padding: 20px 0;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n  align-self: center;\n  width: 20%;\n  text-align: center;\n}\n.image-1u3UG img {\n  width: 50%;\n}\n\n.description-221xI {\n  padding: 20px 0;\n  padding-left: 20px;\n  padding-right: 20px;\n  width: 65%;\n}\n\n.description-region-2opDo {\n  font-size: 16px;\n  font-weight: normal;\n}\n\n.description-blurb-3-Ral {\n  margin-top: 20px;\n}\n\n.description-frequency-1Z7lK {\n  color: #999;\n}\n\n.toggle-switch-1ydsS {\n  padding: 20px 0;\n  background: #f3f3f3;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  width: 15%;\n}\n\n.toggle-switch-element-3dEO1 {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n  align-self: center;\n  margin: 0 auto;\n  -webkit-transform: scale(1.4);\n  -ms-transform: scale(1.4);\n  transform: scale(1.4);\n}\n\n@media (min-width: 600px) and (max-width: 1465px) {\n  .description-221xI {\n    width: 60%;\n  }\n\n  .toggle-switch-1ydsS {\n    padding: 0 5px;\n    width: 20%;\n  }\n}\n@media (max-width: 599px) {\n  .container-1C2LN {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n  }\n\n  .image-1u3UG {\n    width: 100%;\n  }\n\n  .description-221xI {\n    width: 90%;\n  }\n\n  .toggle-switch-1ydsS {\n    width: 100%;\n  }\n}",""]),t.locals={container:"container-1C2LN",image:"image-1u3UG",description:"description-221xI","description-region":"description-region-2opDo","description-blurb":"description-blurb-3-Ral","description-frequency":"description-frequency-1Z7lK","toggle-switch":"toggle-switch-1ydsS","toggle-switch-element":"toggle-switch-element-3dEO1"}},1193:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,".international-newsletters-heading-1MLdf {\n  margin: 40px 0 20px;\n}\n\n.spinner-container-3X8ie {\n  margin: 40px 0;\n  -webkit-transform: scale(2);\n  -ms-transform: scale(2);\n  transform: scale(2);\n}\n\n@media (max-width: 480px) {\n  .spinner-container-3X8ie {\n    margin: 20px 0;\n    -webkit-transform: scale(1);\n    -ms-transform: scale(1);\n    transform: scale(1);\n  }\n}",""]),t.locals={"international-newsletters-heading":"international-newsletters-heading-1MLdf","spinner-container":"spinner-container-3X8ie"}},1194:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});var r=n(12),o=n(102),i=n(83);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["default"]),n=t,(a=[{key:"initialize",value:function(e){l(u(t.prototype),"initialize",this).call(this,e),Object(o.a)().then(function(e){Object(i.a)("/editorial/actions_menu/team?regionCode=:region:".replace(":region:",e))})}}])&&s(n.prototype,a),p&&s(n,p),t}()},1195:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(12),a=n(83);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d;t.default=((d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default),n=t,s=[{key:"initClass",value:function(){this.prototype.events={"click #tabbed-navigation a":"_clickHandheldTab","click .expert-authors .more a":"_showMoreExperts"}}}],(r=[{key:"initialize",value:function(e){u(f(t.prototype),"initialize",this).call(this,e),Object(a.a)("/editorial/actions_menu/topics/:topic_id".replace(":topic_id",e.id))}},{key:"_clickHandheldTab",value:function(e){e.preventDefault();var t=o()(e.target).attr("href");switch(o()("#tabbed-navigation a.active").removeClass("active"),o()(e.target).addClass("active"),t){case"#articles":return o()(".topic-page").removeClass("sm-display-contributors sm-display-links"),o()(".topic-page").addClass("sm-display-articles");case"#contributors":return o()(".topic-page").removeClass("sm-display-articles sm-display-links"),o()(".topic-page").addClass("sm-display-contributors");case"#links":return o()(".topic-page").removeClass("sm-display-articles sm-display-contributors"),o()(".topic-page").addClass("sm-display-links")}}},{key:"_showMoreExperts",value:function(e){return e.preventDefault(),o()(".expert-authors").addClass("show-all")}}])&&c(n.prototype,r),s&&c(n,s),t}()).initClass(),d=d)},1196:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(10),a=n.n(i),s=n(6),c=(n(78),n(139));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,s["View"]),n=t,(r=[{key:"initialize",value:function(){this.makeRoomForFooter(),o()(window).on("resize",this.makeRoomForFooter.bind(this))}},{key:"makeRoomForFooter",value:function(){var e=this.$el,t=parseInt(e.css("padding-top"),10),n=(this.options.topbar.outerHeight()||0)+(this.options.header.outerHeight()||0),r=this.options.footers.outerHeight()||0;e.css({minHeight:o()(window).height()-n-r-t})}}])&&u(n.prototype,r),i&&u(n,i),t}(),y=n(31);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k,C=h=function(){return(h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,w(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,s["View"]),n=t,i=[{key:"initClass",value:function(){this.prototype.events={"click .topbar-button.newsletter":"_subscribe","click .topbar-button.facebook":"_facebook","click .topbar-button.twitter":"_twitter","click .topbar-button.linkedin":"_linkedin"}}}],(r=[{key:"initialize",value:function(e){return this._subscribe=this._subscribe.bind(this),this._facebook=this._facebook.bind(this),this._twitter=this._twitter.bind(this),this._linkedin=this._linkedin.bind(this),_(w(t.prototype),"initialize",this).call(this,e)}},{key:"_subscribe",value:function(e){return e.preventDefault(),Object(y.a)("Newsletter subscription - Stay Informed topbar",document.location.pathname,"",1),window.location=o()(e.currentTarget).find("a").attr("href")}},{key:"_facebook",value:function(e){return e.preventDefault(),Object(y.a)("Region Facebook - Stay Informed topbar",document.location.pathname,"",1),window.location=o()(e.currentTarget).find("a").attr("href")}},{key:"_twitter",value:function(e){return e.preventDefault(),Object(y.a)("Region Twitter - Stay Informed topbar",document.location.pathname,"",1),window.location=o()(e.currentTarget).find("a").attr("href")}},{key:"_linkedin",value:function(e){return e.preventDefault(),Object(y.a)("Region Linkedin - Stay Informed topbar",document.location.pathname,"",1),window.location=o()(e.currentTarget).find("a").attr("href")}}])&&v(n.prototype,r),i&&v(n,i),t}()).initClass(),h},S=n(4),j=n(5);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e,t,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=((k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,R(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,s.View),n=t,i=[{key:"initClass",value:function(){this.prototype.menuClose=Object(j.template)("<a class='menu-button-close' href='#'><%- i18n.t(\"top_bar.close_menu\") %></a>",{imports:{i18n:S.a}})}}],(r=[{key:"initialize",value:function(e){return this.menuVisibilityClassName="".concat(e.selector.substring(1),"-open"),this._openMenu=this._openMenu.bind(this),this._closeMenu=this._closeMenu.bind(this),this._documentClickHandler=this._documentClickHandler.bind(this),null==e&&(e={}),this.menuButtonOpen=this.$el.find(".menu-button-open"),this.menuButtonOpen.show(),this.menuButtonOpen.on("click",this._openMenu),x(R(t.prototype),"initialize",this).call(this,e)}},{key:"_openMenu",value:function(e){var t=this;e.preventDefault(),o()("body").addClass(this.menuVisibilityClassName),Object(j.defer)(function(){return o()(document).on("click",t._documentClickHandler)})}},{key:"_closeMenu",value:function(e){var t=this;null!=e&&e.preventDefault(),o()("body").removeClass(this.menuVisibilityClassName),Object(j.defer)(function(){return o()(document).off("click",t._documentClickHandler)})}},{key:"_documentClickHandler",value:function(e){return e.stopPropagation(),this._closeMenu()}}])&&E(n.prototype,r),i&&E(n,i),t}()).initClass(),k=k);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,N(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,s["View"]),n=t,(r=[{key:"initialize",value:function(e){return this._toggle=this._toggle.bind(this),null==e&&(e={}),this.editorialMenu=this.$el.find(".editorial-menu"),this.editorialMenu.find(".toggle").on("click",this._toggle)}},{key:"_toggle",value:function(e){return e.preventDefault(),this.editorialMenu.toggleClass("opened")}}])&&$(n.prototype,r),o&&$(n,o),t}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U,H=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,q(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,s["View"]),n=t,(r=[{key:"initialize",value:function(e){this._open=this._open.bind(this),this._toggle=this._toggle.bind(this),null==e&&(e={}),this.editorialGrid=this.$el.find(".editorial-grid"),this.editorialMenu=this.editorialGrid.find(".editorial-sidebar"),this.editorialMenu.append("<a href='#' class='cover'></a>"),this.editorialMenu.find("h3 a").on("click",this._open),this.editorialMenu.find(".cover").on("click",this._toggle),this.editorialMenu.find(".editorial-sidebar-group").show()}},{key:"_open",value:function(e){return e.preventDefault(),this.editorialGrid.addClass("editorial-sidebar-opened"),o()(e.currentTarget).parents(".editorial-sidebar-group").toggleClass("active")}},{key:"_toggle",value:function(e){return e.preventDefault(),this.$el.find(".editorial-sidebar-group").removeClass("active"),this.editorialGrid.toggleClass("editorial-sidebar-opened")}}])&&z(n.prototype,r),i&&z(n,i),t}(),W=n(131),G=n(11),K=function(e){var t,n,r=o()("#small-sidebar");e.preventDefault(),r[0].className="visible",t=o()("#small-sidebar-overlay"),n=o()("#page-wrapper"),t[0].className="visible",n[0].className="overlay-visible"},J=function(e){var t,n,r;e.preventDefault(),(t=o()("#small-sidebar")).hasClass("visible")&&(t[0].className="hidden"),n=o()("#page-wrapper"),(r=o()("#small-sidebar-overlay")).hasClass("visible")&&(r[0].className="hidden",n[0].className="")},X=function(){o()("#small-sidebar-open-button").on("click",K),o()("#small-sidebar-close-button").on("click",J),o()("#small-sidebar-overlay").on("click",J),o()("#small-region-select-dropdown").on("change",function(e){window.location=e.target.value})},Q=n(163),Z=n(102),ee=n(230);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=((U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,oe(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,s.View),n=t,i=[{key:"initClass",value:function(){this.prototype.el=document.body,this.prototype._initSmallLayout=X}}],(r=[{key:"initialize",value:function(e){return this.audioPlayers=this.$("audio").each(function(e,t){return new c.a({audioEl:t})}),this.outerEl=this.$("#outer"),this.topbar=this.$("#topbar"),this.header=this.$("#header"),this.footers=this.$("#footers"),this.outerView=new m({el:this.outerEl,topbar:this.topbar,header:this.header,footers:this.footers}),this.editorialSidebarMenu=new H({el:this.$el}),this.editorialMenu=new B({el:this.$el}),this._initDynamicTopbarContent(),this._initSVGHandling(),this._initJSHandling(),this._initLocalTimes(),this._initRelativeTimes(),this._initFlashMessages(),this._initTopbarMenu(),this._initSmallLayout()}},{key:"_initDynamicTopbarContent",value:function(){var e=this;Object(Q.a)()&&(W.a.start(),Object(Z.a)().then(function(e){return o.a.ajax({url:"/".concat(e,"/dynamic_content")})}).then(function(t){t.topbar&&(Object(ee.a)(document.getElementById("topbar"),t.topbar),e._initTopbarMenu())}).catch(function(){return W.a.notify("Dynamic content failed to load")}))}},{key:"_initLocalTimes",value:function(){return o()("time[data-format]").each(function(e,t){var n=o()(t).data("format"),r=o()(t).attr("datetime");if(n&&r){var i=a()(r);return o()(t).html(TC.time.formatted(i,n)),o()(t).attr("title",i.toDate())}})}},{key:"_initRelativeTimes",value:function(){return o()("time[data-relative]").each(function(e,t){var n=o()(t).attr("datetime");if(n){var r=a()(n);return o()(t).html(r.fromNow()),o()(t).attr("title",r.toDate())}})}},{key:"_initSVGHandling",value:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")?o()("html").addClass("svg"):o()("html").addClass("no-svg")}},{key:"_initJSHandling",value:function(){return o()("html").addClass("js").removeClass("no-js")}},{key:"_initFlashMessages",value:function(){G.a.bindServerFlash()}},{key:"_initTopbarMenu",value:function(){var e=this,t=[".topbar-edition-selector",".topbar-account-nav"];return this.topbarMenuStyles||(this.topbarMenuStyles=document.createElement("style"),this.topbarMenuStyles.type="text/css",t.forEach(function(t){e.topbarMenuStyles.innerHTML+="\n            body".concat(t,"-open ").concat(t," .menu {\n              display: block;\n              z-index: 8;\n            }\n\n            body").concat(t,"-open ").concat(t," .menu-button-contents {\n              position: relative;\n              border-bottom: 1px solid #fff;\n              margin-bottom: -1px;\n              z-index: 10;\n            }\n          ")}),document.head.appendChild(this.topbarMenuStyles)),t.forEach(function(t){new D({el:e.$(t),selector:t})}),new C({el:this.$(".topbar-stay-informed")})}}])&&ne(n.prototype,r),i&&ne(n,i),t}()).initClass(),U=U)},127:function(e,t,n){var r=n(750);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},130:function(e,t,n){"use strict";var r=n(4),o=n(3),i=n.n(o),a=n(0),s=n.n(a),c=n(93),l=n(16),u=n(31),f=n(1),p=n(11);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){var n=t.locked,r=t.reason,o=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locked=n,this.reason=r,this.userId=o}var t,n,o;return t=e,(n=[{key:"submit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=this.reason,n=this.locked?"/editorial/users/:id/unlock.json":"/editorial/users/:id/lock.json",o=n.replace(":id",this.userId);Object(f.ajax)({url:o,type:"PUT",data:{reason:t},success:function(t){var n=t.locked,o=n?r.a.t("editorial_toggle_lock_user.messages.locked"):r.a.t("editorial_toggle_lock_user.messages.unlocked");p.a.now("notice",o),e(n)},error:function(){p.a.now("alert",r.a.t("editorial_toggle_lock_user.messages.error"))}})}}])&&d(t.prototype,n),o&&d(t,o),e}(),m=function(e){var t=e.children,n=e.className,r=e.locked,o=e.onClick,i=r?"icon-unlock":"icon-lock";return s.a.createElement("button",{className:n,onClick:o},s.a.createElement("i",{className:i}),t)};m.defaultProps={className:""},m.propTypes={children:i.a.node.isRequired,className:i.a.string,locked:i.a.bool.isRequired,onClick:i.a.func.isRequired};var y=m;function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=g(t).call(this,e))||"object"!==b(o)&&"function"!=typeof o?_(r):o).submitForm=n.submitForm.bind(_(n)),n.form=s.a.createRef(),n.state={valid:!0},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,s.a.Component),n=t,(o=[{key:"submitForm",value:function(e){e.preventDefault();var t=this.form.current.elements.reason;""!==t.value.trim()?this.props.onSubmit(t.value):this.setState({valid:!1})}},{key:"render",value:function(){return s.a.createElement("form",{ref:this.form,onSubmit:this.submitForm},s.a.createElement(l.TextField,{autoFocus:!0,error:!this.state.valid,fullWidth:!0,id:"reason",label:r.a.t("editorial_toggle_lock_user.labels.reason"),name:"reason"}))}}])&&v(n.prototype,o),i&&v(n,i),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}O.propTypes={onSubmit:i.a.func.isRequired};var E={paper:"toggle-lock-dialog"},T=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=S(t).call(this,e))||"object"!==k(o)&&"function"!=typeof o?j(r):o).handleSubmit=n.handleSubmit.bind(j(n)),n.form=s.a.createRef(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,s.a.Component),n=t,(o=[{key:"handleSubmit",value:function(e){this.form.current.submitForm(e)}},{key:"render",value:function(){var e=this.props,t=e.locked,n=e.onCancel,o=e.onSubmit,i=e.open,a=e.userId,c=e.userName,u=t?r.a.t("editorial_toggle_lock_user.action.unlock"):r.a.t("editorial_toggle_lock_user.action.lock");return s.a.createElement(l.Dialog,{classes:E,fullWidth:!0,onClose:n,open:i},s.a.createElement(l.DialogTitle,null,u,' "',c,'"'),s.a.createElement(l.DialogContent,null,s.a.createElement(O,{locked:t,onSubmit:o,ref:this.form,userId:a})),s.a.createElement(l.DialogActions,null,s.a.createElement(l.DialogAction,{onClick:n},r.a.t("editorial_toggle_lock_user.buttons.cancel")),s.a.createElement(l.DialogAction,{onClick:this.handleSubmit,variant:"primary"},r.a.t("editorial_toggle_lock_user.buttons.confirm"))))}}])&&C(n.prototype,o),i&&C(n,i),t}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}T.propTypes={locked:i.a.bool.isRequired,onCancel:i.a.func.isRequired,onSubmit:i.a.func.isRequired,open:i.a.bool.isRequired,userId:i.a.oneOfType([i.a.string,i.a.number]).isRequired,userName:i.a.string.isRequired},n.d(t,"a",function(){return $});var $=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=M(t).call(this,e))||"object"!==x(o)&&"function"!=typeof o?D(r):o).closeModal=n.closeModal.bind(D(n)),n.openModal=n.openModal.bind(D(n)),n.submitForm=n.submitForm.bind(D(n)),n.state={locked:e.locked,modalIsOpen:!1},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,s.a.Component),n=t,(o=[{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"submitForm",value:function(e){var t=this,n=this.props,r=n.afterSubmit,o=n.userId,i=this.state.locked;new h({locked:i,reason:e,userId:o}).submit(function(e){r(e),t.setState({locked:e,modalIsOpen:!1})})}},{key:"render",value:function(){var e=this,t=this.props.trackAction,n=t.action,o=t.category,i=t.label,a=this.state.locked?r.a.t("editorial_toggle_lock_user.action.unlock"):r.a.t("editorial_toggle_lock_user.action.lock");return s.a.createElement(l.ThemeProvider,{generateClassName:Object(c.a)()},s.a.createElement(y,{className:this.props.buttonClass,locked:this.state.locked,onClick:function(){Object(u.a)(o,n,i),e.openModal()}},a),s.a.createElement(T,{locked:this.state.locked,onCancel:this.closeModal,onSubmit:this.submitForm,open:this.state.modalIsOpen,userId:this.props.userId,userName:this.props.userName}))}}])&&R(n.prototype,o),i&&R(n,i),t}();$.defaultProps={afterSubmit:function(){},buttonClass:"",trackAction:{action:"Click",category:"Editorial",label:"User Lock"}},$.propTypes={afterSubmit:i.a.func,buttonClass:i.a.string,locked:i.a.bool.isRequired,trackAction:i.a.shape({action:i.a.string.isRequired,category:i.a.string.isRequired,label:i.a.string.isRequired}),userId:i.a.oneOfType([i.a.string,i.a.number]).isRequired,userName:i.a.string.isRequired}},131:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(229),o=n.n(r);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var c=function(){function e(){i(this,e)}return s(e,null,[{key:"debug",value:function(e){0}},{key:"error",value:function(e){console.error("[bugsnag] ".concat(e))}},{key:"info",value:function(e){console.info("[bugsnag] ".concat(e))}},{key:"warn",value:function(e){console.warn("[bugsnag] ".concat(e))}}]),e}(),l=function(){function e(){i(this,e)}return s(e,null,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(e,{logger:c});try{this.bugsnagClient=o()(t)}catch(e){console.warn("Bugsnag failed to start. Bad configuration?")}}},{key:"notify",value:function(e){this.bugsnagClient?this.bugsnagClient.notify(e):console.warn("Bugsnag client not initialized! Call ErrorTrack.start() first.")}}]),e}()},138:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(6);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o["Model"]),n=t,(i=[{key:"exists",value:function(){return this.get("type")}},{key:"isEditor",value:function(){return"Editor"===this.get("type")}},{key:"isAuthor",value:function(){return"Author"===this.get("type")}},{key:"isModerator",value:function(){return this.get("moderator")}},{key:"isConfirmedAuthor",value:function(){return"confirmed_expert"===this.get("author_profile_state")}},{key:"hasAccessTo",value:function(e){return-1!==Object(r.indexOf)(this.get("beta_features"),e)}},{key:"getProfileNotificationsUrl",value:function(){return"/profiles/".concat(this.get("slug"),"/notifications")}}])&&a(n.prototype,i),u&&a(n,u),t}()},139:function(e,t,n){"use strict";var r,o=n(4),i=n(1),a=n.n(i),s=n(5),c=n(6),l=n(162),u=n.n(l);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,v=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,m(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,c.View),n=t,o=[{key:"initClass",value:function(){this.prototype.className="super-slider-view",this.prototype.template=Object(s.template)('<div class="super-slider-view-track">\n  <div class="super-slider-view-slider">\n    <div class="super-slider-view-slider-inner"></div>\n  </div>\n</div>'),this.prototype._throttledChange=Object(s.throttle)(function(){return this.trigger("change",this.percentage)},66)}}],(r=[{key:"initialize",value:function(e){return h(m(t.prototype),"initialize",this).call(this,e),this.render(),this._initTrack(),this._initSlider()}},{key:"render",value:function(){return h(m(t.prototype),"render",this).call(this),this.el.innerHTML=this.template()}},{key:"setValue",value:function(e){var t=e*this.trackEl.width()/100;return this.draggable.setValue(t)}},{key:"_initTrack",value:function(){return this.trackEl=this.$el.find(".super-slider-view-track"),this.cachedTrackWidth=this.trackEl.width()}},{key:"_initSlider",value:function(){var e=this;return this.sliderEl=this.$el.find(".super-slider-view-slider"),this.draggable=new u.a({element:this.sliderEl.get(0),axis:"x",containment:"parent"}),this.sliderEl.get(0).addEventListener("drag",function(t){var n=t.detail.position.x,r=e.trackEl.width();return e.percentage=n/r*100,e._throttledChange()}),this.sliderEl.on("dragstart",function(){return e.trigger("changestart")}),this.sliderEl.on("dragfinish",function(){return e.trigger("changefinish")})}}])&&p(n.prototype,r),o&&p(n,o),t}()).initClass(),r=r);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=((b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,k(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,c.View),n=t,i=[{key:"initClass",value:function(){this.prototype.events={"click .audio-player-play":"_onClickPlay"},this.prototype.className="audio-player",this.prototype.template=Object(s.template)('<div class="audio-player-inner">\n  <div class="audio-player-middle"></div>\n</div>')}}],(r=[{key:"initialize",value:function(e){if(this._play=this._play.bind(this),this._onClickPlay=this._onClickPlay.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onEnded=this._onEnded.bind(this),this.audioEl=a()(e.audioEl),!this.audioEl.hasClass("initialized"))return O(k(t.prototype),"initialize",this).call(this,e),this.render()}},{key:"render",value:function(){return O(k(t.prototype),"render",this).call(this),this.$el.append(this.template()),this.innerEl=this.$(".audio-player-inner"),this.middleEl=this.$(".audio-player-middle"),this._canPlayAudio()?this._setupSupported():this._setupUnsupported(),this.audioEl.addClass("initialized"),this.audioEl.before(this.$el)}},{key:"_play",value:function(){var e=this;return this.audio.play(),this.timeUpdateInterval=setInterval(function(){return a()(e.audio).trigger("timeupdate")},50)}},{key:"_pause",value:function(){if(this.audio.pause(),this.timeUpdateInterval)return clearInterval(this.timeUpdateInterval)}},{key:"_canPlayAudio",value:function(){return!!document.createElement("audio").canPlayType}},{key:"_setupSupported",value:function(){return this.audio=this.audioEl.get(0),a()(this.audio).on("timeupdate",this._onTimeUpdate),a()(this.audio).on("ended",this._onEnded),this._readData(),this._removeCaption(),this._addImage(),this._addControls(),this._addDownloadLink(),this._addTitle()}},{key:"_setupUnsupported",value:function(){this.audio=this.audioEl.get(0),a()(this.audio).on("timeupdate",this._onTimeUpdate),a()(this.audio).on("ended",this._onEnded),this._readData(),this._removeCaption(),this._addImage(),this._addLicenseWithoutControls(),this._addDownloadLink(),this._addTitle(),this.$el.addClass("no-audio");var e='<span class="unsupported">'.concat(o.a.t("audio_player.message.unsupported"),"</span>");return this.middleEl.find(".audio-player-listen").append(e),this.audioEl.next(".audio-player-caption").show()}},{key:"_readData",value:function(){return this.duration=this.audioEl.data("duration"),this.image=this.audioEl.data("image"),this.title=this.audioEl.data("title"),this.size=this.audioEl.data("size"),this.source=this.audioEl.data("source"),this.sourceUrl=this.audioEl.data("source-url"),this.license=this.audioEl.data("license"),this.licenseUrl=this.audioEl.data("license-url"),this.link=this.audioEl.find("source").attr("src"),this.durationFormatted=this._formatSeconds(this.duration),this.sizeFormatted=this._formatSize(this.size)}},{key:"_removeCaption",value:function(){return this.audioEl.next(".audio-player-caption").remove(),this.audioEl.parent().next(".audio-player-caption").remove()}},{key:"_addImage",value:function(){return void 0!==this.image&&""!==this.image?this.innerEl.append('<div class="audio-player-image">\n  <img src="'.concat(this.image,'" alt="">\n</div>')):this.$el.addClass("no-image")}},{key:"_addLicenseWithoutControls",value:function(){var e=void 0!==this.licenseUrl&&""!==this.licenseUrl?'<a href="'.concat(this.licenseUrl,'">').concat(this.license,"</a>"):"<span>".concat(this.license,"</span>");return this.middleEl.append('<div class="audio-player-license audio-player-unsupported-license">'.concat(e,"</div>"))}},{key:"_addControls",value:function(){var e=this,t=void 0!==this.licenseUrl&&""!==this.licenseUrl?'<a href="'.concat(this.licenseUrl,'">').concat(this.license,"</a>"):"<span>".concat(this.license,"</span>");return this.middleEl.append('<div class="audio-player-controls">\n  <div class="audio-player-play"></div>\n\n  <div class="audio-player-bar-wrapper">\n    <div class="audio-player-current-time">00:00</div>\n    <div class="audio-player-total-time">'.concat(this.durationFormatted,'</div>\n    <div class="audio-player-license">').concat(t,"</div>\n  </div>\n</div>")),this.wrapperEl=this.$(".audio-player-bar-wrapper"),this.playEl=this.$(".audio-player-controls .audio-player-play"),this.currentTimeEl=this.$(".audio-player-controls .audio-player-current-time"),this.totalTimeEl=this.$(".audio-player-controls .audio-player-total-time"),this.superSliderView=new v,this.superSliderView.$el.appendTo(this.wrapperEl),this.superSliderView.on("changestart",function(){if(e.playEl.is(".playing"))return e._pause(),e.superSliderView.once("changefinish",e._play)}),this.superSliderView.on("change",function(t){return e._updateCurrentTime(t),e._updateCurrentTimestamp(t)})}},{key:"_addDownloadLink",value:function(){var e=this.link.split(".").pop().toUpperCase();return this.innerEl.append('<div class="audio-player-download">\n  <a href="'.concat(this.link,'" title="Download">\n    <span class="audio-player-heading">').concat(o.a.t("audio_player.label.download"),'</span>\n    <span class="audio-player-download-icon"></span>\n    <span class="audio-player-download-info">').concat(e," / ").concat(this.sizeFormatted,"</span>\n  </a>\n</div>"))}},{key:"_addTitle",value:function(){return this.middleEl.append('<div class="audio-player-listen">\n  <span class="audio-player-heading">'.concat(o.a.t("audio_player.label.listen"),'</span>\n  <span class="audio-player-title">').concat(this.title,"</span>\n</div>"))}},{key:"_moveSlider",value:function(e){return this.superSliderView.setValue(e)}},{key:"_updateCurrentTime",value:function(e){var t=this.duration*(e>100?100:e)/100;return this.audio.currentTime=t}},{key:"_updateCurrentTimestamp",value:function(e){var t=this.duration*(e/100);return this.currentTimeEl.get(0).textContent=this._formatSeconds(t)}},{key:"_onClickPlay",value:function(e){var t=a()(e.target);return t.toggleClass("playing"),t.is(".playing")?this._play():this._pause()}},{key:"_onTimeUpdate",value:function(e){var t=this._timeToPercent(this.audio.currentTime);return this._moveSlider(t),this._updateCurrentTimestamp(t)}},{key:"_onEnded",value:function(e){return this.playEl.removeClass("playing"),this.timeUpdateInterval&&clearInterval(this.timeUpdateInterval),this._moveSlider(0),this._updateCurrentTimestamp(0)}},{key:"_formatSeconds",value:function(e){e=Math.round(e);var t=Math.floor(e/3600),n=e%3600,r=Math.floor(n/60),o=n%60,i=Math.ceil(o);return 0===t?"".concat(this._padded(r),":").concat(this._padded(i)):"".concat(this._padded(t),":").concat(this._padded(r),":").concat(this._padded(i))}},{key:"_padded",value:function(e){for(var t="".concat(e);t.length<2;)t="0".concat(t);return t}},{key:"_formatSize",value:function(e){if(0===e)return"0";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return"".concat(0===t?e/Math.pow(1024,t):(e/Math.pow(1024,t)).toFixed(0)," ").concat(["bytes","KB","MB","GB"][t])}},{key:"_timeToPercent",value:function(e){var t=parseFloat(e)/parseInt(this.duration)*100;return t>100?100:t}}])&&_(n.prototype,r),i&&_(n,i),t}()).initClass(),b=b)},150:function(e,t,n){"use strict";var r=n(406),o=n.n(r);t.a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.a.init({selector:["iframe","object"],players:["c15119308.ssl.cf2.rackcdn.com","youtube.com","www.youtube.com","player.vimeo.com","maps.google.com","youtube-nocookie.com"]})}},1508:function(e,t,n){"use strict";n.r(t);var r=n(4),o=n(1),i=n.n(o),a=n(5),s=n(206),c=n.n(s),l=n(20),u=n.n(l),f=n(150),p=n(212),d=n(423),h=n(411),m=n(12),y=n(6);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O,k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,y["Model"]),n=t,(r=[{key:"url",value:function(){return"/comments?content_id=".concat(this.content_id)}},{key:"initialize",value:function(e){return this.content_id=e.content_id}}])&&v(n.prototype,r),o&&v(n,o),t}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=((O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,P(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,y.Collection),n=t,o=[{key:"initClass",value:function(){this.prototype.url="/comments/recommends"}}],(r=[{key:"initialize",value:function(e,t){var n;return n=null!=t,this.content_id=n.content_id,n}}])&&S(n.prototype,r),o&&S(n,o),t}()).initClass(),O=O);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=this,(n=!(o=(e=M(t)).call.apply(e,[this].concat(a)))||"object"!==x(o)&&"function"!=typeof o?D(r):o).toggle=n.toggle.bind(D(n)),n.softSubscribe=n.softSubscribe.bind(D(n)),n.subscribe=n.subscribe.bind(D(n)),n.suppress=n.suppress.bind(D(n)),n.isSubscribed=n.isSubscribed.bind(D(n)),n._handleError=n._handleError.bind(D(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,y["Model"]),n=t,(r=[{key:"url",value:function(){return"/content/".concat(this.content_id,"/content_subscription")}},{key:"initialize",value:function(e){return this.content_id=e.content_id}},{key:"toggle",value:function(){switch(this.get("subscription_type")){case"subscribed":return this.suppress();case"suppressed":case"undetermined":return this.subscribe()}}},{key:"softSubscribe",value:function(){if("undetermined"===this.get("subscription_type"))return this.subscribe()}},{key:"subscribe",value:function(){return this.save({subscription_type:"subscribed"},{type:"PUT",error:this._handleError})}},{key:"suppress",value:function(){return this.save({subscription_type:"suppressed"},{type:"PUT",error:this._handleError})}},{key:"isSubscribed",value:function(){return"subscribed"===this.get("subscription_type")}},{key:"_handleError",value:function(){return this.set("subscription_type",this.previous("subscription_type"))}}])&&R(n.prototype,r),o&&R(n,o),t}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"validate",value:function(e){return this.permissions[e]||!1}}])&&I(t.prototype,n),r&&I(t,r),e}();N.prototype.permissions={};var V,B=N;function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=((V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,q(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,B),n=t,o=[{key:"initClass",value:function(){this.prototype.permissions={_renderCommentRecommendsView:!0,_renderSignInToCommentButtonView:!1,_renderNewCommentButtonView:!0,_renderContentSubscriptionIndicatorView:!0,_renderReportButton:!0,_renderReplyButton:!0,_renderModeratorControls:!1,_renderEditorControls:!1}}}],(r=null)&&z(n.prototype,r),o&&z(n,o),t}()).initClass(),V=V);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,G(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,B),t}();J.prototype.permissions={_manageComments:!0,_renderCloseCommentsButtonView:!0,_renderCommentRecommendsView:!0,_renderContentSubscriptionIndicatorView:!0,_renderEditorControls:!0,_renderModeratorControls:!1,_renderNewCommentButtonView:!0,_renderOpenCommentsButtonView:!0,_renderReplyButton:!0,_renderReportButton:!0,_renderSignInToCommentButtonView:!1};var X,Q=J;function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe,ie=((X=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(this,ne(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,B),n=t,o=[{key:"initClass",value:function(){this.prototype.permissions={_renderModeratorControls:!0,_renderCommentRecommendsView:!0,_renderContentSubscriptionIndicatorView:!0,_renderNewCommentButtonView:!0,_renderReportButton:!0,_renderReplyButton:!0}}}],(r=null)&&ee(n.prototype,r),o&&ee(n,o),t}()).initClass(),X=X);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe,pe=((oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ce(this,le(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,B),n=t,o=[{key:"initClass",value:function(){this.prototype.permissions={_renderSignInToCommentButtonView:!0,_renderNewCommentButtonView:!1,_renderContentSubscriptionIndicatorView:!1,_renderReportButton:!0,_renderModeratorControls:!1,_renderEditorControls:!1}}}],(r=null)&&se(n.prototype,r),o&&se(n,o),t}()).initClass(),oe=oe),de=n(51);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge,_e=((fe=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=this,(n=!(o=(e=ye(t)).call.apply(e,[this].concat(a)))||"object"!==he(o)&&"function"!=typeof o?be(r):o).recommend=n.recommend.bind(be(n)),n.unrecommend=n.unrecommend.bind(be(n)),n.delete=n.delete.bind(be(n)),n.restore=n.restore.bind(be(n)),n.remove=n.remove.bind(be(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,y.Model),n=t,o=[{key:"initClass",value:function(){this.prototype.urlRoot="/comments"}}],(r=[{key:"recommend",value:function(){return i.a.ajax({url:this._recommendUrl(),type:"POST"})}},{key:"unrecommend",value:function(){return i.a.ajax({url:this._unrecommendUrl(),type:"DELETE"})}},{key:"delete",value:function(){var e=this;return i.a.ajax({url:this._deleteUrl(),type:"POST",dataType:"json",success:function(t){return e.trigger("comment:deleted",t.message)},error:function(t){return e.trigger("comment:deleted:failure",t.message)}})}},{key:"restore",value:function(){var e=this;return i.a.ajax({url:this._restoreUrl(),type:"POST",dataType:"json",success:function(t){return e.trigger("comment:restored",t.message)},error:function(t){return e.trigger("comment:restored:failure",t.message)}})}},{key:"remove",value:function(e){var t=this;return i.a.ajax({url:this._removeUrl(),type:"POST",dataType:"json",data:e,success:function(e){return t.trigger("comment:removed",e.message)},error:function(e){return t.trigger("comment:removed:failure",e.message)}})}},{key:"_deleteUrl",value:function(){return"editorial".concat(this.url(),"/remove")}},{key:"_restoreUrl",value:function(){return"editorial".concat(this.url(),"/restore")}},{key:"_removeUrl",value:function(){return"".concat(this.url(),"/remove")}},{key:"_recommendUrl",value:function(){return"".concat(this.url(),"/recommends?thrust=positive")}},{key:"_unrecommendUrl",value:function(){return"".concat(this.url(),"/unrecommend")}}])&&me(n.prototype,r),o&&me(n,o),t}()).initClass(),fe=fe),we=n(22),Oe=n(11);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee,Te=((ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Se(this,je(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,y.View),n=t,i=[{key:"initClass",value:function(){this.prototype.className="comment-editor-controls-view",this.prototype.events={"click .restore":"_handleRestore","click .delete":"_handleDelete"},this.prototype.template=Object(a.template)('<a class="moderation-control" href="mailto:<%- comment_user_email %>"><%- i18n.t(\'comment.button.email\') %></a>\n<a class="moderation-control" href="<%- editorial_comments_path %>"><%- i18n.t(\'comment.button.all_comments\') %></a>\n<a class="moderation-control restore" href="#"><%- i18n.t(\'comment.button.restore\') %></a>\n<a class="moderation-control delete" href="#"><%- i18n.t(\'comment.button.delete\') %></a>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return this._handleRestore=this._handleRestore.bind(this),this._handleDelete=this._handleDelete.bind(this),this.comment_user_email=e.comment_user_email,this.comment_user_id=e.comment_user_id,this.render()}},{key:"render",value:function(){return this.$el.html(this.template({comment_user_email:this.comment_user_email,editorial_comments_path:this._editorialCommentsPathFor(this.comment_user_id)}))}},{key:"_handleRestore",value:function(e){if(e.preventDefault(),confirm(r.a.t("comment.messages.restore_comment")))return this.trigger("comment:restore")}},{key:"_handleDelete",value:function(e){if(e.preventDefault(),confirm(r.a.t("comment.messages.remove_comment")))return this.trigger("comment:delete")}},{key:"_editorialCommentsPathFor",value:function(e){return"/editorial/comments?user_id=".concat(e)}}])&&Ce(n.prototype,o),i&&Ce(n,i),t}()).initClass(),ge=ge),xe=n(208);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e,t,n){return(Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$e(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne,Ve=((Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,$e(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,xe.a),n=t,s=[{key:"initClass",value:function(){this.prototype.className="comment-moderator-reason-view large-tooltip arrow-left",this.prototype.events={"submit form":"_handleSubmit"},this.prototype.template=Object(a.template)('<h4 class="legacy">\n  <%= i18n.t(\'comment_moderator.comment_removal\') %>\n</h4>\n\n<%= i18n.t(\'comment_moderator.blurb_html\') %>\n\n<form action="#">\n  <select name="reason">\n  <% _.each(reasons, function(reason) { %>\n    <option value="<%- reason %>"><%- reason %></option>\n  <% }); %>\n  </select>\n  <button class="button right" type="submit"><%= i18n.t(\'comment_moderator.confirm_removal\') %></button>\n</form>',{imports:{i18n:r.a}}),this.prototype.alreadyApprovedTemplate=Object(a.template)("<h4 class=\"legacy\">\n  <%= i18n.t('comment_moderator.comment_removal') %>\n</h4>\n\n<p><%= i18n.t('comment_moderator.approved') %></p>",{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return Ae($e(t.prototype),"initialize",this).call(this,e),this.reasons=[r.a.t("comment_moderator.reasons.copyright_infringement"),r.a.t("comment_moderator.reasons.defamatory"),r.a.t("comment_moderator.reasons.discredited_research"),r.a.t("comment_moderator.reasons.discriminatory"),r.a.t("comment_moderator.reasons.fake_name"),r.a.t("comment_moderator.reasons.misinformation"),r.a.t("comment_moderator.reasons.off_topic"),r.a.t("comment_moderator.reasons.offensive"),r.a.t("comment_moderator.reasons.personal_abuse"),r.a.t("comment_moderator.reasons.spam"),r.a.t("comment_moderator.reasons.threatening"),r.a.t("comment_moderator.reasons.trolling")],this.link=e.link,this.comment=e.comment,this.removalReason=this.comment.get("removal_reason"),this.removedAt=this.comment.get("removed_at"),this.render()}},{key:"render",value:function(){var e=this.link.position();return!this.removedAt&&this.removalReason?(this.$el.html(this.alreadyApprovedTemplate()),this.$el.css("left",e.left+70),this.$el.css("top",e.top-51)):(this.$el.html(this.template({reasons:this.reasons})),this.$el.css("left",e.left+70),this.$el.css("top",e.top-88)),this._listenToOutsideClick()}},{key:"_handleSubmit",value:function(e){return e.preventDefault(),this.trigger("reason:selected",i()(e.target).serializeArray()),this.remove()}}])&&Me(n.prototype,o),s&&Me(n,s),t}()).initClass(),Ee=Ee);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ye,Ue=((Ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ze(this,Le(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,y.View),n=t,i=[{key:"initClass",value:function(){this.prototype.className="comment-editor-controls-view",this.prototype.events={"click .remove":"_handleRemove"},this.prototype.template=Object(a.template)('<a class="moderation-control remove" href="#"><%- i18n.t(\'comment.button.remove\') %></a>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return this._handleRemove=this._handleRemove.bind(this),this.render(),this.comment=e.comment}},{key:"render",value:function(){return this.$el.html(this.template())}},{key:"_handleRemove",value:function(e){var t=this;return e.preventDefault(),this.commentModeratorReasonView=new Ve({link:this.$el.find(".remove"),comment:this.comment}),this.commentModeratorReasonView.$el.appendTo(this.$el),this.commentModeratorReasonView.on("reason:selected",function(e){return t.trigger("comment:remove",e)})}}])&&Fe(n.prototype,o),i&&Fe(n,i),t}()).initClass(),Ne=Ne);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e,t,n){return(Ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Je(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe,Ze=((Ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,Je(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,y.View),n=t,i=[{key:"initClass",value:function(){this.prototype.tagName="div",this.prototype.className="comment-recommends-view",this.prototype.highlyRecommendedTemplate=Object(a.template)('<i class="icon-favourite"></i>\n<div class="hover tooltip bottom">\n  <p><%= i18n.t(\'comment.label.highly_recommended\') %></p>\n</div>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return Ke(Je(t.prototype),"initialize",this).call(this,e),this._handleRecommend=this._handleRecommend.bind(this),this.recommended=null!=e?e.recommended:void 0,this.highlyRecommended=null!=e?e.highlyRecommended:void 0,this.highlyRecommended&&this.$el.addClass("highly-recommended"),this.recommendButtonView=new we.a({label:this._buttonText(),className:this._buttonClass()}),this.recommendButtonView.on("click",this._handleRecommend),this.render()}},{key:"render",value:function(){return this.highlyRecommended?this.el.innerHTML=this.highlyRecommendedTemplate():this.el.innerHTML="",this.recommendButtonView.$el.appendTo(this.$el)}},{key:"_updateButton",value:function(){return this.recommendButtonView.setTitle(this._buttonText()),this.recommendButtonView.el.className=this._buttonClass()}},{key:"_buttonClass",value:function(){return this.recommended?"button small primary":"button small"}},{key:"_buttonText",value:function(){return this.recommended?r.a.t("comment.button.recommended"):r.a.t("comment.button.recommend")}},{key:"_handleRecommend",value:function(e){return this.recommended=!this.recommended,this._updateButton(),this.recommended?this.trigger("comment:recommend"):this.trigger("comment:unrecommend")}}])&&We(n.prototype,o),i&&We(n,i),t}()).initClass(),Ye=Ye);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it,at=((Qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,rt(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,y.View),n=t,s=[{key:"initClass",value:function(){this.prototype.className="comment-body-view",this.prototype.events={"click .show-comment":"_showFullComment"},this.prototype.template=Object(a.template)('<div class="comment-body-wrapper">\n  <%= fullBody %>\n</div>\n<a class="show-comment" href="#"><%= i18n.t(\'comment.button.read_more\') %></a>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return this.fullBody=e.fullBody,this.render()}},{key:"render",value:function(){if(this.el.innerHTML=this.template({fullBody:this.fullBody}),this.fullBody.length>1e3)return i()(this.el).addClass("truncated")}},{key:"_showFullComment",value:function(e){return e.preventDefault(),i()(this.el).removeClass("truncated"),i()(this.el).find(".show-comment").remove()}}])&&tt(n.prototype,o),s&&tt(n,s),t}()).initClass(),Qe=Qe);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e,t,n){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ft(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt,ht=((it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lt(this,ft(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(t,y.View),n=t,s=[{key:"initClass",value:function(){this.prototype.tagName="li",this.prototype.className="comment-view",this.prototype.template=Object(a.template)('<article id="comment_<%- id %>" class="comment <%- user_type %>">\n  <header class="meta">\n    <section class="attribution author-avatar large">\n      <img\n        alt=""\n        class="comment avatar rounded lazyload"\n        data-src="<%- user_avatar_url %>"\n        src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="\n      >\n      <h3 class="fn">\n        <% if (user_profile_url) { %>\n          <a href="<%- user_profile_url %>"><%- user_full_name %></a>\n        <% } else { %>\n          <%- user_full_name %>\n        <% } %>\n        <% if (user_friend_of_tc) { %>\n          <a href="<%- this._donationUrl() %>" class="friend-of-the-conversation-badge">\n            <span>\n              <div class="hover tooltip bottom">\n                <%- i18n.t(\'comment.label.friend_of_the_conversation\', { name: user_full_name }) %>\n              </div>\n            </span>\n          </a>\n        <% } %>\n      </h3>\n      <p>\n        <% if (institution_name && institution_path) { %>\n          <% if (user_occupation) { %>\n            <%- user_occupation %>,\n          <% } %>\n\n          <a href="<%- institution_path %>"><%- institution_name %></a>\n        <% } else { %>\n          <%- user_occupation %>\n        <% } %>\n      </p>\n    </section>\n  </header>\n  <% if (parent_id != undefined) { %>\n    <section class="comment-in-reply-to">\n      <%- i18n.t(\'comment.label.in_reply_to\') %>\n      <a class="comment-in-reply-to-link" href="#comment_<%- parent_id %>">\n        <%- parent_user_full_name%>\n      </a>\n    </section>\n  <% } %>\n  <section class="comment-body">\n    <div class="full-comment">\n      <div class="more">\n        <a class="comment-reference-link" href="#comment_<%- id %>">\n          <time datetime="<%- created_at %>"><%- moment(created_at).fromNow() %></time>\n        </a>\n        <div class="comment-actions"></div>\n      </div>\n    </div>\n  </section>\n</article>\n<ol class="comment-replies"></ol>',{imports:{i18n:r.a}}),this.prototype.removedCommentTemplate=Object(a.template)('<article id="comment_<%- id %>">\n  <p><%- i18n.t(\'comment.label.comment_removed_by_moderator\') %></p>\n</article>\n<ol class="comment-replies"></ol>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){var n=this;return ut(ft(t.prototype),"initialize",this).call(this,e),this._recursiveRenderReplies=this._recursiveRenderReplies.bind(this),this._handleReply=this._handleReply.bind(this),this.renderNext=e.renderNext||function(){return{}},this.permissions=e.permissions,this.userRecommendedCommentIds=e.userRecommendedCommentIds,e.comment&&(this.model=new _e(e.comment)),this._initCommentRecommendsView(),this.render(),this.commentActionsEl=this.$el.find(".comment-actions"),this.permissions.validate("_renderCommentRecommendsView")&&this._renderCommentRecommendsView(),this.permissions.validate("_renderReplyButton")&&this._renderReplyButton(),this.permissions.validate("_renderReportButton")&&this._renderReportButton(),this.permissions.validate("_renderModeratorControls")&&this._renderModeratorControls(),this.permissions.validate("_renderEditorControls")&&this._renderEditorControls(),e.renderChildren?this._renderReplies(this.model.get("children")):this.renderNext(),this.model.on("comment:deleted",function(e){return Oe.a.now("notice",e),n.$el.children(".comment").removeClass("pending").addClass("removed")}),this.model.on("comment:deleted:failure",function(e){return Oe.a.now("alert","Could not remove the comment, try again")}),this.model.on("comment:restored",function(e){return Oe.a.now("notice",e),n.$el.children(".comment").removeClass("removed pending")}),this.model.on("comment:restored:failure",function(e){return Oe.a.now("alert","Could not restore the comment, try again")}),this.model.on("comment:removed",function(e){return Oe.a.now("notice",e),n.$el.children(".comment").addClass("removed pending")}),this.model.on("comment:removed:failure",function(e){return Oe.a.now("alert",e)})}},{key:"render",value:function(){if(this.model.get("hidden")?this.el.innerHTML=this.removedCommentTemplate(this.model.attributes):(this.el.innerHTML=this.template(this.model.attributes),this._renderCommentBodyView()),this.model.get("removed_at")&&this.$el.children(".comment").addClass("removed"),this.model.get("removal_reason"))return this.$el.children(".comment").addClass("pending")}},{key:"renderFirstChildForTeaser",value:function(){var e=this.model.get("children");return 0!==e.length&&this._renderReplies([e[0]])}},{key:"_renderCommentBodyView",value:function(){return this.commentBodyContainer=this.$el.find(".full-comment"),this.commentBodyView=new at({fullBody:this.model.get("full_body")}),this.commentBodyView.$el.prependTo(this.commentBodyContainer)}},{key:"_renderCommentRecommendsView",value:function(){if(!this.model.get("hidden"))return this.commentRecommendsView.$el.prependTo(this.$el)}},{key:"_renderReportButton",value:function(){var e="".concat(this.model.url(),"/abuses/new");return this.commentActionsEl.append(i()('<a class="moderation-control report" title="'.concat(r.a.t("comment.button.report_comment"),'" href="').concat(e,'">').concat(r.a.t("comment.button.report"),"</a>")))}},{key:"_renderReplyButton",value:function(){return this.replyButton=new we.a({label:r.a.t("comment.button.reply"),className:"button comment-reply"}),this.replyButton.on("click",this._handleReply),this.replyButton.$el.appendTo(this.$el.find(".more"))}},{key:"_renderModeratorControls",value:function(){return this.commentModeratorControlsView=new Ue({comment:this.model}),this.commentModeratorControlsView.$el.appendTo(this.commentActionsEl),this.commentModeratorControlsView.on("comment:remove",this.model.remove)}},{key:"_renderEditorControls",value:function(){return this.commentEditorControlsView=new Te({comment_user_id:this.model.get("user_id"),comment_user_email:this.model.get("user_email")}),this.commentEditorControlsView.$el.appendTo(this.commentActionsEl),this.commentEditorControlsView.on("comment:delete",this.model.delete),this.commentEditorControlsView.on("comment:restore",this.model.restore)}},{key:"_initCommentRecommendsView",value:function(){return this.commentRecommendsView=new Ze({recommended:this._isRecommended(),highlyRecommended:this.model.get("highly_recommended")}),this.commentRecommendsView.on("comment:recommend",this.model.recommend),this.commentRecommendsView.on("comment:unrecommend",this.model.unrecommend)}},{key:"_isRecommended",value:function(){return-1!==Object(a.indexOf)(this.userRecommendedCommentIds,this.model.get("id"))}},{key:"_renderReplies",value:function(e){return this._recursiveRenderReplies(e)}},{key:"_recursiveRenderReplies",value:function(e){var n,r=this;return e.length?(n=function(){return Object(a.defer)(r._recursiveRenderReplies,e)},new t({comment:e.shift(),userRecommendedCommentIds:this.userRecommendedCommentIds,permissions:this.permissions,renderNext:n}).$el.appendTo(this.$el.children(".comment-replies"))):Object(a.defer)(this.renderNext)}},{key:"_handleReply",value:function(e){return u.a.publish("comment:new",[this.model.get("id")])}},{key:"_donationUrl",value:function(){var e=this.model.get("donation_url");if(TC.currentUser.exists()){var t=TC.currentUser.get("id");return"".concat(e,"&user_id=").concat(t)}return e}}])&&ct(n.prototype,o),s&&ct(n,s),t}()).initClass(),it=it);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e,t,n){return(vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wt,Ot=((dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bt(this,gt(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,xe.a),n=t,s=[{key:"initClass",value:function(){this.prototype.tagName="form",this.prototype.className="comment-formatting-help-view large-tooltip arrow-right",this.prototype.events={"click .tabbed .tab":"_onTabClick"},this.prototype.template=Object(a.template)("<h4 class=\"legacy\"><%= i18n.t('comment.label.formatting_help') %></h4>\n<p>\n  <%= i18n.t('comment.label.allowed_formatting_options') %><br>\n  <%= i18n.t('comment.label.markdown', {\n      markdown: \"<a href='http://daringfireball.net/projects/markdown/syntax' target='_blank'>Markdown</a>\",\n      interpolation: { escapeValue: false }\n    })\n  %>.\n</p>\n\n<nav class=\"tabbed tabbed-condensed\">\n  <a href=\"#basic\" class=\"active tab\"><%= i18n.t('comment.label.formatting_basic') %></a>\n  <a href=\"#lists\" class=\"tab\"><%= i18n.t('comment.label.formatting_lists') %></a>\n</nav>\n\n<div id=\"comment-format-basic\">\n  <dl>\n    <dt><strong><%= i18n.t('comment.label.formatting_basic_bold') %></strong></dt>\n    <dd><code>**<%= i18n.t('comment.label.formatting_basic_text') %>**</code></dd>\n    <dt><em><%= i18n.t('comment.label.formatting_basic_italic') %></em></dt>\n    <dd><code>*<%= i18n.t('comment.label.formatting_basic_text') %>*</code></dd>\n    <dt><%= i18n.t('comment.label.formatting_basic_quote') %></dt>\n    <dd><code>&gt; <%= i18n.t('comment.label.formatting_basic_text') %></code></dd>\n    <dt><%= i18n.t('comment.label.formatting_basic_link') %></dt>\n    <dd><code>[<%= i18n.t('comment.label.formatting_basic_text') %>](http://website.com)</code></dd>\n  </dl>\n</div>\n\n<div id=\"comment-format-lists\">\n  <dl>\n    <dt>\n      <ul>\n        <li><%= i18n.t('comment.label.formatting_lists_item') %></li>\n        <li><%= i18n.t('comment.label.formatting_lists_item') %></li>\n      </ul>\n    </dt>\n    <dd>\n      <code>* <%= i18n.t('comment.label.formatting_lists_item') %><br>* <%= i18n.t('comment.label.formatting_lists_item') %></code>\n    </dd>\n    <dt>\n      <ol>\n        <li><%= i18n.t('comment.label.formatting_lists_numbered_item') %></li>\n        <li><%= i18n.t('comment.label.formatting_lists_numbered_item') %></li>\n      </ol>\n    </dt>\n    <dd>\n      <code>1. <%= i18n.t('comment.label.formatting_lists_numbered_item') %><br>2. <%= i18n.t('comment.label.formatting_lists_numbered_item') %></code>\n    </dd>\n  </dl>\n</div>",{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return vt(gt(t.prototype),"initialize",this).call(this,e),this._onTabClick=this._onTabClick.bind(this),this.render()}},{key:"render",value:function(){return this.$el.html(this.template()),this.hide()}},{key:"_onTabClick",value:function(e){if(e.preventDefault(),!i()(e.target).is(".active"))return this.$(".tab").removeClass("active"),i()(e.target).addClass("active"),i()("#comment-format-basic").toggle(),i()("#comment-format-lists").toggle()}}])&&yt(n.prototype,o),s&&yt(n,s),t}()).initClass(),dt=dt);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e,t,n){return(jt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt,xt=((wt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),St(this,Pt(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,y.View),n=t,i=[{key:"initClass",value:function(){this.prototype.tagName="li",this.prototype.className="comment-view",this.prototype.template=Object(a.template)('<article class="comment preview">\n  <header class="meta">\n    <div class="preview-message"><%= i18n.t(\'comment.messages.preview_comment\') %></div>\n    <section class="attribution author-avatar">\n      <img class="comment avatar" height="36" width="36" src="<%- user_avatar_url %>" alt="">\n      <h3 class="fn">\n        <% if (user_profile_url) { %>\n          <a href="<%- user_profile_url %>"><%- user_full_name %></a>\n        <% } else { %>\n          <%- user_full_name %>\n        <% } %>\n        <% if (user_friend_of_tc) { %>\n          <a href="<%- this._donationUrl() %>" class="friend-of-the-conversation-badge">\n            <span>\n              <div class="hover tooltip bottom">\n                <%-i18n.t(\'comment.label.friend_of_the_conversation\', { name: user_full_name}) %>\n              </div>\n            </span>\n          </a>\n        <% } %>\n      </h3>\n      <p>\n        <% if (institution_name && institution_path) { %>\n          <% if (user_occupation) { %>\n            <%- user_occupation %>,\n          <% } %>\n\n          <a href="<%- institution_path %>"><%- institution_name %></a>\n        <% } else { %>\n          <%- user_occupation %>\n        <% } %>\n      </p>\n    </section>\n  </header>\n  <section class="comment-body">\n    <div class="full-comment"><%= full_body %></div>\n  </section>\n</article>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return jt(Pt(t.prototype),"initialize",this).call(this,e),e.comment&&(this.model=new _e(e.comment)),this.render()}},{key:"render",value:function(){return this.el.innerHTML=this.template(this.model.attributes)}},{key:"_donationUrl",value:function(){var e=this.model.get("donation_url");if(TC.currentUser.exists()){var t=TC.currentUser.get("id");return"".concat(e,"&user_id=").concat(t)}return e}}])&&Ct(n.prototype,o),i&&Ct(n,i),t}()).initClass(),wt=wt),Rt=n(31);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $t(e,t,n){return($t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=It(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vt,Bt=((Tt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),At(this,It(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,xe.a),n=t,i=[{key:"initClass",value:function(){this.prototype.tagName="form",this.prototype.className="user-notification-settings-view large-tooltip arrow-right",this.prototype.template=Object(a.template)('<h4 class="legacy">\n  <%= i18n.t(\'comment.label.notification_settings\') %>\n</h4>\n<fieldset>\n  <input type="checkbox" id="notify_when_new_comments" name="notify_when_new_comments">\n  <label for="notify_when_new_comments">\n    <%= i18n.t(\'comment.label.notify_me_when_there_are_updates\') %>\n  </label>\n</fieldset>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){var n=this;return $t(It(t.prototype),"initialize",this).call(this,e),this._updateCheckbox=this._updateCheckbox.bind(this),this.contentSubscription=e.contentSubscription,this.$el.html(this.template()),this.checkbox=this.$el.find("#notify_when_new_comments"),this.checkbox.on("click",function(){return n.contentSubscription.toggle(),n._trackAnalytics(n.contentSubscription.get("subscription_type"))}),this.contentSubscription.on("change",this._updateCheckbox),this._updateCheckbox(),this.hide()}},{key:"_updateCheckbox",value:function(){return this.checkbox.prop("checked",this.contentSubscription.isSubscribed())}},{key:"_trackAnalytics",value:function(e){Object(Rt.a)("ContentSubscription",e,"UserNotificationSettingsView")}}])&&Dt(n.prototype,o),i&&Dt(n,i),t}()).initClass(),Tt=Tt);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qt(e,t,n){return(qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ht,Wt=((Vt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lt(this,Yt(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,y.View),n=t,s=[{key:"initClass",value:function(){this.prototype.tagName="li",this.prototype.events={"focus textarea":"_onTextareaFocus","blur textarea":"_onTextareaBlur","keyup textarea":"_handleKeyUp","input textarea":"_handleKeyUp","paste textarea":"_handleKeyUp","click .submit":"_handleSubmit","click .toggle-comment-help":"_handleClickToggleCommentHelp","click .toggle-comment-options":"_handleClickToggleCommentOptions","click #comment-form-reply > .tabbed .tab":"_onTabClick"},this.prototype.template=Object(a.template)('<div id="comment-form-reply">\n  <div class="comment-errors"></div>\n\n  <nav class="tabbed">\n    <a href="#write" class="active tab"><%= i18n.t(\'comment.button.write\') %></a>\n    <a href="#preview" class="tab"><%= i18n.t(\'comment.button.preview\') %></a>\n  </nav>\n\n  <div class="comment-form-reply-options">\n    <a href="#" class="toggle-comment-options" title="<%= i18n.t(\'comment.label.notification_settings\') %>">\n      <i class="icon-cog"></i>\n    </a>\n\n    <a href="#" class="toggle-comment-help" title="<%= i18n.t(\'comment.label.formatting_help\') %>">\n      <i class="icon-help"></i>\n    </a>\n  </div>\n\n  <div class="comment-form-reply-write">\n    <form id="new_comment" class="new_comment">\n      <label for="comment-form-reply-body"><%= i18n.t(\'comment.label.body\') %></label>\n      <textarea id="comment-form-reply-body" class="comment-body"></textarea>\n\n      <span class="community-standards-link">\n        <a href="/community_standards" target="_blank">\n          <%= i18n.t(\'comment.label.review_community_standards\') %>\n        </a>\n      </span>\n\n      <a href="#" class="submit button primary"><%= i18n.t(\'comment.button.post_comment\') %></a>\n    </form>\n  </div>\n\n  <div class="comment-form-reply-preview"></div>\n</div>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){var n=this;return qt(Yt(t.prototype),"initialize",this).call(this,e),this.remove=this.remove.bind(this),this._handleSubmissionSuccess=this._handleSubmissionSuccess.bind(this),this._handleSubmissionError=this._handleSubmissionError.bind(this),this._handleSubmissionComplete=this._handleSubmissionComplete.bind(this),this._onTabClick=this._onTabClick.bind(this),this._loadPreview=this._loadPreview.bind(this),this._onTextareaFocus=this._onTextareaFocus.bind(this),this._onTextareaBlur=this._onTextareaBlur.bind(this),this.user_full_name=TC.currentUser.get("full_name"),this.render(),this.commentBodyEl=this.$el.find("textarea.comment-body"),this.submitButtonEl=this.$el.find(".button.primary"),this.errorEl=this.$el.find(".comment-errors"),this.contentSubscription=e.contentSubscription,u.a.subscribe("comment:new",this.remove),this.userNoticationSettingsView=new Bt({contentSubscription:this.contentSubscription}),this.commentFormattingHelpView=new Ot,this.$el.find(".toggle-comment-help").after(this.commentFormattingHelpView.el),this.$el.find(".toggle-comment-options").after(this.userNoticationSettingsView.el),Object(a.defer)(function(){return n.commentBodyEl.focus()})}},{key:"render",value:function(){return i()(this.el).html(this.template({user_full_name:this.user_full_name}))}},{key:"remove",value:function(){return u.a.unsubscribe("comment:new",this.remove),qt(Yt(t.prototype),"remove",this).call(this)}},{key:"_displayErrorMessage",value:function(e){return this.errorEl.html(i()('<p class="information error">').html(e))}},{key:"_disableSubmitButton",value:function(){return this.submitButtonEl.attr("disabled","disabled")}},{key:"_enableSubmitButton",value:function(){return this.submitButtonEl.removeAttr("disabled")}},{key:"_handleClickToggleCommentOptions",value:function(e){return e.preventDefault(),this.commentFormattingHelpView.hide(),this.userNoticationSettingsView.toggle()}},{key:"_handleClickToggleCommentHelp",value:function(e){return e.preventDefault(),this.userNoticationSettingsView.hide(),this.commentFormattingHelpView.toggle()}},{key:"_handleKeyUp",value:function(e){if(i()(e.currentTarget).val().length>10)return this.errorEl.empty(),this._enableSubmitButton()}},{key:"_handleSubmit",value:function(e){return e.preventDefault(),this.submitButtonEl.html(r.a.t("comment.messages.posting")),this._disableSubmitButton(),this.model.save({body:this.commentBodyEl.val()},{wait:!0,success:this._handleSubmissionSuccess,error:this._handleSubmissionError,complete:this._handleSubmissionComplete})}},{key:"_handleSubmissionSuccess",value:function(){return Object(Rt.a)("Comment Created",window.location.pathname,""),u.a.publish("comment:created",[this.model]),this.remove()}},{key:"_handleSubmissionError",value:function(e,t){return 422===t.status?(this._displayErrorMessage(t.responseJSON.detailed_error_message),Oe.a.now("alert",t.responseJSON.message)):(this._displayErrorMessage(r.a.t("comment.messages.error")),this._enableSubmitButton())}},{key:"_handleSubmissionComplete",value:function(){return this.submitButtonEl.html(r.a.t("comment.button.post_comment"))}},{key:"_onTabClick",value:function(e){if(e.preventDefault(),!i()(e.target).is(".active")){var t=e.target.href.split("#").pop(),n=i()(e.target);return"write"===t?(this.$el.find(".tab").removeClass("active"),n.addClass("active"),n.parent().removeClass("preview"),this.$(".comment-form-reply-preview").hide(),this.$(".comment-form-reply-write").show(),this.$(".comment-form-reply-write textarea").focus()):0===this.$("textarea").val().length?(alert("Please type in a comment."),this.$(".comment-form-reply-write textarea").focus()):(this._loadPreview(),this.$el.find(".tab").removeClass("active textarea-focus textarea-blur"),n.addClass("active"),n.parent().addClass("preview"),this.$(".comment-form-reply-write").hide(),this.$(".comment-form-reply-preview").show())}}},{key:"_loadPreview",value:function(){var e=this.$(".comment-form-reply-preview");if(!this.currentBodyText||this.currentBodyText!==this.$("textarea").val())return this.currentBodyText=this.$("textarea").val(),e.html("<p class='loading'>".concat(r.a.t("comment.messages.preview_loading"),"</p>")),i.a.ajax({url:"/comments/preview",type:"POST",dataType:"json",data:{comment:{content_id:this.model.get("content_id"),body:this.currentBodyText}},success:function(t){return setTimeout(function(){return e.html(""),new xt({comment:t}).$el.appendTo(e)},500)},error:function(){return e.html("<p class='loading'>".concat(r.a.t("comment.messages.preview_error"),"</p>"))}})}},{key:"_onTextareaFocus",value:function(){return this.$el.find('.tab[href="#write"]').removeClass("textarea-blur").addClass("textarea-focus")}},{key:"_onTextareaBlur",value:function(){return this.$el.find('.tab[href="#write"]').removeClass("textarea-focus").addClass("textarea-blur")}}])&&zt(n.prototype,o),s&&zt(n,s),t}()).initClass(),Vt=Vt);function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return!t||"object"!==Gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xt(e,t,n){return(Xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var en=((Ht=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jt(this,Qt(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(t,y.View),n=t,s=[{key:"initClass",value:function(){this.prototype.className="comments-list-view",this.prototype.tagName="ol",this.prototype.noCommentsTemplate=Object(a.template)("<li class=\"information prominent no-comments\">\n  <strong><%= i18n.t('comment.label.no_comments_yet') %></strong>\n  <br />\n  <%= i18n.t('comment.label.have_your_say') %>\n</li>",{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){return Xt(Qt(t.prototype),"initialize",this).call(this,e),this.addComment=this.addComment.bind(this),this.createNewComment=this.createNewComment.bind(this),this.renderNoComments=this.renderNoComments.bind(this),this.renderAllComments=this.renderAllComments.bind(this),this.renderComments=this.renderComments.bind(this),this.renderTeaser=this.renderTeaser.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this._renderCommentsFragment=this._renderCommentsFragment.bind(this),this._commentsFragmentReady=this._commentsFragmentReady.bind(this),this.contentSubscription=e.contentSubscription,this.permissions=e.permissions,this.order="#oldest",this.spinner=new de.a({tagName:"li",centered:!0}),this.el.appendChild(this.spinner.el)}},{key:"addComment",value:function(e){this.model.set("comment_count",this.model.get("comment_count")+1),u.a.publish("comments:count:updated",[this.model.get("comment_count")]);var t=e.get("parent_id"),n=new ht({model:e,permissions:this.permissions}),r=this._getContainerFor(t);return n.$el.prependTo(r)}},{key:"createNewComment",value:function(e,t){var n=this._getContainerFor(t),r=new _e({content_id:e,parent_id:t}),o=new Wt({model:r,contentSubscription:this.contentSubscription});return this._addReplyForm(o,n)}},{key:"renderNoComments",value:function(){var e=this;return this.$el.html(this.noCommentsTemplate()),u.a.subscribe("comment:new",function(){return e.$el.find(".information.no-comments").remove()})}},{key:"renderAllComments",value:function(e){var t=this;return this.commentsFragmentReady?(this._renderCommentsFragment(this.commentsFragment),"function"==typeof e?e():void 0):u.a.subscribe("comments:fragment:loaded",function(n){return t._renderCommentsFragment(n),"function"==typeof e?e():void 0})}},{key:"renderComments",value:function(e,t,n){this.userRecommendedCommentIds=t,e.get("comments");var r=e.get("comment_count");return u.a.publish("comments:count:updated",[r]),this.commentsFragment=document.createDocumentFragment(),this.commentsFragmentReady=!1,n?u.a.subscribe("comments:fragment:loaded",this._renderCommentsFragment):(u.a.subscribe("comments:teaser:fragment:loaded",this._renderCommentsFragment),u.a.subscribe("comments:fragment:loaded",this._commentsFragmentReady),this.renderTeaser(e.get("comments"))),this.recursiveRender(e.get("comments"))}},{key:"renderTeaser",value:function(e){e=Object(a.first)(e,2);var t=document.createDocumentFragment();if(e.length>=1){var n=new ht({comment:e[0],userRecommendedCommentIds:this.userRecommendedCommentIds,permissions:this.permissions,renderChildren:!1});n.$el.appendTo(t),!n.renderFirstChildForTeaser()&&e.length>=2&&(n=new ht({comment:e[1],userRecommendedCommentIds:this.userRecommendedCommentIds,permissions:this.permissions,renderChildren:!1})).$el.appendTo(t)}return u.a.publish("comments:teaser:fragment:loaded",[t])}},{key:"recursiveRender",value:function(e){var t=this;if(e.length){var n=e.shift();return new ht({comment:n,userRecommendedCommentIds:this.userRecommendedCommentIds,permissions:this.permissions,renderChildren:!0,renderNext:function(){return Object(a.defer)(t.recursiveRender,e)}}).$el.appendTo(this.commentsFragment)}return u.a.publish("comments:fragment:loaded",[this.commentsFragment])}},{key:"sortComments",value:function(e){if(this.order!==e)return this._changeSortOrder(),this.order=e}},{key:"_changeSortOrder",value:function(){var e=this;return this.$el.animate({opacity:.25},100,function(){return e.$el.children("li").each(function(){return i()(this).prependTo(i()(this).parent())}),e.$el.css({opacity:1})})}},{key:"_renderCommentsFragment",value:function(e){var t=this;return this.spinner.hide(function(){var n=i()(window).scrollTop();return t.$el.find(".comment-view").remove(),t.$el.prepend(e),i()(window).scrollTop(n),u.a.publish("comments:fragment:ready")})}},{key:"_commentsFragmentReady",value:function(){return this.commentsFragmentReady=!0}},{key:"_addReplyForm",value:function(e,t){var n=t||this.$el;return e.$el.prependTo(n)}},{key:"_getContainerFor",value:function(e){return i()("#comment_".concat(e)).siblings(".comment-replies").get(0)||this.$el}}])&&Kt(n.prototype,o),s&&Kt(n,s),t}()).initClass(),Ht=Ht),tn=n(167);function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function an(e,t,n){return(an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ln=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),on(this,sn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,tn["a"]),n=t,(o=[{key:"initialize",value:function(e){var n=this;return an(sn(t.prototype),"initialize",this).call(this,e),this._updateView=this._updateView.bind(this),this._flashSuccess=this._flashSuccess.bind(this),this._flashError=this._flashError.bind(this),this._setSubscriptionType=this._setSubscriptionType.bind(this),this._getColorForType=this._getColorForType.bind(this),this._getLabelForType=this._getLabelForType.bind(this),this._getNoticeForType=this._getNoticeForType.bind(this),this.contentId=e.contentId,this.contentSubscription=e.contentSubscription,this._setSubscriptionType("undetermined"),this.contentSubscription.on("change",this._updateView),this.contentSubscription.on("sync",this._flashSuccess),this.contentSubscription.on("error",this._flashError),this.contentSubscription.fetch(),u.a.subscribe("comment:created",function(){return n.contentSubscription.fetch(),n._updateView()}),this.on("click",function(){return n.contentSubscription.toggle(),n._track(n.contentSubscription.get("subscription_type"))})}},{key:"_updateView",value:function(){return this._setSubscriptionType(this.contentSubscription.get("subscription_type"))}},{key:"_flashSuccess",value:function(){if(null!=this.contentSubscription.previous("subscription_type")){var e=this.contentSubscription.get("subscription_type");if(null!=this._getNoticeForType(e))return Oe.a.now("notice",this._getNoticeForType(e))}}},{key:"_flashError",value:function(){return Oe.a.now("notice",this._getNoticeForType("error"))}},{key:"_setSubscriptionType",value:function(e){return this.setTitle(this._getLabelForType(e)),this.setColor(this._getColorForType(e))}},{key:"_getColorForType",value:function(e){switch(e){case"subscribed":return tn.a.GREEN;case"suppressed":case"undetermined":return tn.a.RED;default:return}}},{key:"_getLabelForType",value:function(e){switch(e){case"subscribed":return r.a.t("content.subscription_type.subscribed.label");case"suppressed":return r.a.t("content.subscription_type.suppressed.label");case"undetermined":return r.a.t("content.subscription_type.undetermined.label");default:return}}},{key:"_getNoticeForType",value:function(e){switch(e){case"subscribed":return r.a.t("content.subscription_type.subscribed.notice");case"suppressed":return r.a.t("content.subscription_type.suppressed.notice");case"error":return r.a.t("content.subscription_type.error.notice");default:return}}},{key:"_track",value:function(e){Object(Rt.a)("ContentSubscription",e,"ContentSubscriptionIndicatorView")}}])&&rn(n.prototype,o),i&&rn(n,i),t}(),un=n(0),fn=n.n(un),pn=n(13),dn=n.n(pn),hn=n(850),mn=n(3),yn=n.n(mn),bn=n(16),vn=function(e){var t=e.disabled,n=e.onChange,o=e.value;return fn.a.createElement(bn.DateTimePicker,{allowKeyboardControl:!0,clearable:!0,dateManagementLibrary:hn.a,disabled:t,label:r.a.t("comment_manager.labels.schedule_off"),labelFunc:function(e){return t?r.a.t("comment_manager.labels.comments_closed"):e?e.format("LLL"):r.a.t("comment_manager.labels.comments_opened")},onChange:n,value:o})};vn.defaultProps={value:""},vn.propTypes={disabled:yn.a.bool.isRequired,onChange:yn.a.func.isRequired,value:yn.a.string};var gn=vn,_n=n(10),wn=n.n(_n),On=function(e){var t=e.date,n=e.name;if(!t||!n)return"";var o=wn()(t).format("MMMM Do, YYYY");return r.a.t("comment_manager.dialog.last_edited_by",{date:o,name:n})};On.defaultProps={date:"",name:""},On.propTypes={date:yn.a.string,name:yn.a.string};var kn=On,Cn=function(e){var t=e.changeCommentsCloseDate,n=e.commentsClosed,o=e.commentsClosingAt,i=e.handleSubmit,a=e.lastEditedDate,s=e.lastEditedUserName,c=e.modalIsOpen,l=e.onClose,u=e.toggleCommentsClosed;return fn.a.createElement(bn.Dialog,{onClose:l,open:c},fn.a.createElement(bn.DialogTitle,null,r.a.t("comment_manager.dialog.title")),fn.a.createElement(bn.DialogContent,null,fn.a.createElement(kn,{date:a,name:s}),fn.a.createElement(bn.FormGroup,null,fn.a.createElement(bn.FormControlLabel,{control:fn.a.createElement(bn.Switch,{colour:"primary",checked:!n,onChange:u}),label:r.a.t("comment_manager.labels.allow_comments")})),fn.a.createElement(gn,{disabled:n,onChange:t,value:o})),fn.a.createElement(bn.DialogActions,null,fn.a.createElement(bn.DialogAction,{onClick:l},r.a.t("comment_manager.buttons.cancel")),fn.a.createElement(bn.DialogAction,{variant:"primary",onClick:i},r.a.t("comment_manager.buttons.confirm"))))};Cn.defaultProps={commentsClosingAt:"",lastEditedDate:"",lastEditedUserName:""},Cn.propTypes={changeCommentsCloseDate:yn.a.func.isRequired,commentsClosed:yn.a.bool.isRequired,commentsClosingAt:yn.a.string,handleSubmit:yn.a.func.isRequired,lastEditedDate:yn.a.string,lastEditedUserName:yn.a.string,modalIsOpen:yn.a.bool.isRequired,onClose:yn.a.func.isRequired,toggleCommentsClosed:yn.a.func.isRequired};var Sn=Cn,jn=n(93);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dn,An=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=xn(t).call(this,e))||"object"!==Pn(o)&&"function"!=typeof o?Rn(r):o).changeCommentsCloseDate=n.changeCommentsCloseDate.bind(Rn(n)),n.closeModal=n.closeModal.bind(Rn(n)),n.handleSubmit=n.handleSubmit.bind(Rn(n)),n.openModal=n.openModal.bind(Rn(n)),n.toggleCommentsClosed=n.toggleCommentsClosed.bind(Rn(n)),n.state={commentsClosed:!1,commentsClosingAt:null,lastEditedDate:null,lastEditedUserName:null,modalIsOpen:!1},n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,fn.a.Component),n=t,(i=[{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"openModal",value:function(){var e=this,t=this.props.contentId;Object(o.ajax)({url:"/editorial/content/:id/comments/schedule".replace(":id",t),method:"GET",success:function(t){var n=t.comments,r=t.lastEdited;e.setState({commentsClosed:n.closed,commentsClosingAt:n.closingAt,lastEditedDate:r.date,lastEditedUserName:r.userName,modalIsOpen:!0})},error:function(){Oe.a.now("alert",r.a.t("comment_manager.messages.loading_error"))}})}},{key:"toggleCommentsClosed",value:function(){var e=this.state,t=e.commentsClosed,n=e.commentsClosingAt;n=(t=!t)?wn()().format():null,this.setState({commentsClosed:t,commentsClosingAt:n})}},{key:"changeCommentsCloseDate",value:function(e){if(e){var t=wn()(),n=e.isBefore(t),r=e.format();this.setState({commentsClosed:n,commentsClosingAt:r})}else this.setState({commentsClosed:!1,commentsClosingAt:null})}},{key:"handleSubmit",value:function(){var e=this,t=this.state,n=t.commentsClosed,i=t.commentsClosingAt,a=this.props.contentId,s=n?"comments:closed":"comments:opened";Object(o.ajax)({url:"/editorial/content/:id/comments/schedule".replace(":id",a),method:"PUT",data:{closing_at:i},success:function(){Oe.a.now("notice",r.a.t("comment_manager.messages.updated")),u.a.publish(s,[i]),e.setState({modalIsOpen:!1})},error:function(){Oe.a.now("alert",r.a.t("comment_manager.messages.loading_error"))}})}},{key:"render",value:function(){return fn.a.createElement(bn.ThemeProvider,{generateClassName:Object(jn.a)()},fn.a.createElement(bn.Button,{onClick:this.openModal,colour:"primary"},r.a.t("comment_manager.buttons.open_dialog")),fn.a.createElement(Sn,En({changeCommentsCloseDate:this.changeCommentsCloseDate,handleSubmit:this.handleSubmit,onClose:this.closeModal,toggleCommentsClosed:this.toggleCommentsClosed},this.state)))}}])&&Tn(n.prototype,i),a&&Tn(n,a),t}();function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return!t||"object"!==$n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vn(e,t,n){return(Vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}An.propTypes={contentId:yn.a.number.isRequired},An.defaultProps={};var zn,Ln=((Dn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nn(this,Bn(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,y.View),n=t,i=[{key:"initClass",value:function(){this.prototype.className="comments-actions-view grid-four grid-last",this.prototype.tagName="div"}}],(o=[{key:"initialize",value:function(e){Vn(Bn(t.prototype),"initialize",this).call(this,e),this.permissions=e.permissions,this.contentId=e.contentId,this.contentSubscription=e.contentSubscription,this.permissions.validate("_renderSignInToCommentButtonView")&&this._renderSignInToCommentButtonView(),this.permissions.validate("_renderNewCommentButtonView")&&this._renderNewCommentButtonView(),this.permissions.validate("_renderCloseCommentsButtonView")&&this._renderCloseCommentsButtonView(),this.permissions.validate("_renderOpenCommentsButtonView")&&this._renderOpenCommentsButtonView(),this.permissions.validate("_renderContentSubscriptionIndicatorView")&&this._renderContentSubscriptionIndicatorView(),this.permissions.validate("_manageComments")&&TC.currentUser.hasAccessTo("manage_comments")&&this._renderCommentManager()}},{key:"_renderSignInToCommentButtonView",value:function(){return this.signInToCommentButtonView=new we.a({label:r.a.t("comment.button.sign_in_to_comment"),className:"comment-sign-in button primary large"}),this.signInToCommentButtonView.$el.appendTo(this.$el),this.signInToCommentButtonView.on("click",function(){var e;return(e=null!=TC.page?TC.page.content_slug:void 0)?window.location="sign_in?return_to=/".concat(e,"#comments"):window.location="sign_in"})}},{key:"_renderNewCommentButtonView",value:function(){return this.newCommentButtonView=new we.a({label:r.a.t("comment.button.comment_on_this_article"),className:"button large primary new"}),this.newCommentButtonView.$el.appendTo(this.$el),this.newCommentButtonView.on("click",function(){return u.a.publish("comment:new")})}},{key:"_renderCloseCommentsButtonView",value:function(){return this.closeCommentsButtonView=new we.a({label:r.a.t("comment.button.close_comments"),className:"button large danger close"}),this.closeCommentsButtonView.$el.appendTo(this.$el),this.closeCommentsButtonView.on("click",function(){if(confirm(r.a.t("comment.messages.close_comments")))return u.a.publish("comments:close")})}},{key:"_renderOpenCommentsButtonView",value:function(){return this.openCommentsButtonView=new we.a({label:r.a.t("comment.button.re_open_comments"),className:"button large primary open"}),this.openCommentsButtonView.$el.appendTo(this.$el),this.openCommentsButtonView.on("click",function(){if(confirm(r.a.t("comment.messages.re_open_comments")))return u.a.publish("comments:open")})}},{key:"_renderContentSubscriptionIndicatorView",value:function(){return this.contentSubscriptionIndicatorView=new ln({contentId:this.contentId,contentSubscription:this.contentSubscription,className:"button large indicator"}),this.contentSubscriptionIndicatorView.$el.appendTo(this.$el)}},{key:"_renderCommentManager",value:function(){var e=document.createElement("div"),t=fn.a.createElement(An,{contentId:this.contentId});dn.a.render(t,e),this.$el.append(e)}}])&&In(n.prototype,o),i&&In(n,i),t}()).initClass(),Dn=Dn),qn=n(305),Yn=n(426);function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e,t,n){return(Gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xn=((zn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(this,Kn(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(t,y.View),n=t,s=[{key:"initClass",value:function(){this.prototype.id="comments",this.prototype.className="comments-section-view wrapper clearfix",this.prototype.tagName="section",this.prototype.events={"click a.comment-sort":"sortComments","click .comment-moderator-remove":"showModeratorPane","click .moderation-pane-close":"hideModerationPane","submit .moderation-remove":"handleModerationRemoveSubmit"},this.prototype.sortButtonsTemplate=Object(a.template)('\n<div class="comment-sorting">\n  <div class="tabbed-button-group minimal">\n    <a class=" button comment-sort on" href="#oldest">\n      <%= i18n.t(\'comment.button.oldest\') %>\n    </a>\n\n    <a class=" button comment-sort" href="#newest">\n      <%= i18n.t(\'comment.button.newest\') %>\n    </a>\n  </div>\n</div>\n      ',{imports:{i18n:r.a}}),this.prototype.showAllCommentsButtonTemplate=Object(a.template)('<div class="comments-show-all">\n  <a href="#" class="primary button large">\n    <%= i18n.t(\'comment.button.show_all_comments\') %>\n  </a>\n</div>',{imports:{i18n:r.a}}),this.prototype.template=Object(a.template)('<div class="comments-bar grid-sixteen">\n  <div class="comments-side grid-four grid-last"></div>\n  <div class="comments-count-sort grid-four">\n    <span class="comment-count"></span>\n  </div>\n  <div class="comments-main grid-eight">\n    <p class="information prominent closed"><%= i18n.t(\'comment.label.comments_closed\') %></p>\n  </div>\n</div>',{imports:{i18n:r.a}})}}],(o=[{key:"initialize",value:function(e){Gn(Kn(t.prototype),"initialize",this).call(this,e),this.fetchComments=this.fetchComments.bind(this),this._transitionToReady=this._transitionToReady.bind(this),this._newComment=this._newComment.bind(this),this._commentsOpened=this._commentsOpened.bind(this),this._commentsClosed=this._commentsClosed.bind(this),this.renderComments=this.renderComments.bind(this),this._renderSortButtons=this._renderSortButtons.bind(this),this._renderShowMoreButton=this._renderShowMoreButton.bind(this),this.scrollToComments=this.scrollToComments.bind(this),this.setup=this.setup.bind(this),this.scrollToComments(),this.render(e)}},{key:"render",value:function(e){var t=this;if("undefined"!=typeof IntersectionObserver){var n=document.querySelector("#comments-container");new IntersectionObserver(function(n,r){n.forEach(function(n){n.isIntersecting&&(t.renderComments(e),r.disconnect())})}).observe(n)}else this.renderComments(e)}},{key:"renderComments",value:function(e){var t=this;Object(qn.a)().then(function(){return Object(Yn.b)()}).then(function(n){TC.currentUser=new TC.User(n),t.setup(e),t.el.innerHTML=t.template(),t.commentsListView.$el.appendTo(t.$el.find(".comments-main")),t.fetchComments(),t.$el.addClass("loading")})}},{key:"sortComments",value:function(e){e.preventDefault();var t=i()(e.currentTarget),n=t.attr("href");return this.$el.find(".comment-sort").removeClass("on"),t.addClass("on"),this.commentsListView.sortComments(n)}},{key:"_transitionToReady",value:function(){var e=this;if(this.$el.removeClass("loading"),this._commentsClosed(this.commentsClosedAt),this.comments.get("comment_count")?(this._renderSortButtons(),this._displayAllComments()||this._renderShowMoreButton()):this.commentsListView.renderNoComments(),this.commentsActionsView.$el.appendTo(this.$el.find(".comments-side")),this.referenceToComment&&i()(this.referenceToComment).length>0)return Object(a.defer)(function(){return i()("html, body").animate({scrollTop:i()(e.referenceToComment).addClass("highlight").offset().top},0)})}},{key:"_newComment",value:function(e){return this.commentsListView.createNewComment(this.contentId,e)}},{key:"_userRecommendedCommentIds",value:function(){if(this.commentsRecommends)return Object(a.map)(this.commentsRecommends.models,function(e){return e.get("comment_id")})}},{key:"_commentsOpened",value:function(){return this.$el.removeClass("closed")}},{key:"_commentsClosed",value:function(e){var t=wn()();wn()(e).isBefore(t)&&this.$el.addClass("closed")}},{key:"_displayAllComments",value:function(){return this.displayAllComments||this.comments.get("has_current_user_comment")||this.referenceToComment||this.comments.get("comment_count")<3}},{key:"fetchComments",value:function(){var e=this,t=void 0!==(TC&&TC.currentUser&&TC.currentUser.exists());this.commentsRecommends=t?new T({content_id:this.contentId}):void 0,t?this.commentsRecommends.fetch().then(function(){return e.comments.fetch()}):this.comments.fetch()}},{key:"scrollToComments",value:function(){var e=i()(location).attr("hash");/comment_[0-9]+/.test(e)&&(this.referenceToComment=e),this.referenceToComment&&Object(a.defer)(function(){i()("html, body").animate({scrollTop:i()("#comments").offset().top},500)})}},{key:"_renderSortButtons",value:function(){0===this.$el.find(".comment-sorting").length&&this.$el.find(".comments-main").prepend(this.sortButtonsTemplate())}},{key:"_renderShowMoreButton",value:function(){var e=this,t=i()(this.showAllCommentsButtonTemplate());return this.$el.find(".comments-main").append(t),t.on("click",function(n){return n.preventDefault(),t.attr("disabled","disabled"),e.displayAllComments=!0,e.commentsListView.renderAllComments(function(){return t.remove()})})}},{key:"setup",value:function(e){var t=this;this.permissions=function(){switch(!1){case!(null!=TC.currentUser?TC.currentUser.isEditor():void 0):return new Q;case!(null!=TC.currentUser?TC.currentUser.isModerator():void 0):return new ie;case!(null!=TC.currentUser?TC.currentUser.exists():void 0):return new U;default:return new pe}}(),this.contentId=e.content_id,this.commentsClosedAt=e.commentsClosedAt,this.comments=new k({content_id:this.contentId}),this.contentSubscription=new $({content_id:this.contentId}),this.commentsActionsView=new Ln({contentId:this.contentId,permissions:this.permissions,contentSubscription:this.contentSubscription}),this.commentsListView=new en({model:this.comments,permissions:this.permissions,contentSubscription:this.contentSubscription}),u.a.subscribe("comment:new",this._newComment),u.a.subscribe("comment:created",this.commentsListView.addComment),u.a.subscribe("comments:fragment:ready",this._transitionToReady),u.a.subscribe("comments:closed",this._commentsClosed),u.a.subscribe("comments:opened",this._commentsOpened),this.displayAllComments=!1,this.comments.on("sync",function(){return t.commentsListView.renderComments(t.comments,t._userRecommendedCommentIds(),t._displayAllComments())})}}])&&Hn(n.prototype,o),s&&Hn(n,s),t}()).initClass(),zn=zn),Qn=n(23);function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tr(e,t){return!t||"object"!==Zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nr(e,t,n){return(nr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function or(e,t){return(or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ir=Object(a.template)('  <%= republishContent %>\n\n  <footer class="button-row">\n    <a class="button secondary close" href="#">Close</a>\n  </footer>'),ar=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tr(this,rr(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&or(e,t)}(t,Qn["a"]),n=t,(r=[{key:"initialize",value:function(e){return nr(rr(t.prototype),"initialize",this).call(this),this.republishContent=e.republishContent,this.copyAdvice=e.copyAdvice,this.render(),this.$el.find("section.advanced").hide(),this.hideAllCodeBlocks(),this.$el.find("code.image").show()}},{key:"render",value:function(){return nr(rr(t.prototype),"render",this).call(this),this.$innerEl.html(ir({republishContent:this.republishContent})),this.$el.find(".copy-advice").html(this.copyAdvice)}},{key:"showBasic",value:function(e){return this.$el.find(".tab.active").removeClass("active"),i()(e.currentTarget).addClass("active"),this.$el.find("section.basic").show(),this.$el.find("section.advanced").hide()}},{key:"showAdvanced",value:function(e){return this.$el.find(".tab.active").removeClass("active"),i()(e.currentTarget).addClass("active"),this.$el.find("section.basic").hide(),this.$el.find("section.advanced").show()}},{key:"showImageCode",value:function(){return this.hideAllCodeBlocks(),this.$el.find("code.image").show()}},{key:"showIframeCode",value:function(){return this.hideAllCodeBlocks(),this.$el.find("code.iframe").show()}},{key:"showScriptCode",value:function(){return this.hideAllCodeBlocks(),this.$el.find("code.script").show()}},{key:"hideAllCodeBlocks",value:function(){this.$el.find("code").hide()}}])&&er(n.prototype,r),o&&er(n,o),t}();ar.prototype.events={"click .button.close":"_leave","click .tab.basic":"showBasic","click .tab.advanced":"showAdvanced","click input.image":"showImageCode","click input.iframe":"showIframeCode","click input.script":"showScriptCode"};var sr=n(413),cr=n(466),lr=n(422),ur=n(83),fr=n(465),pr=n(233);function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e,t){return!t||"object"!==dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yr(e,t,n){return(yr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=br(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vr(e,t){return(vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gr;t.default=((gr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mr(this,br(t).apply(this,arguments))}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}(t,m.default),n=t,s=[{key:"initClass",value:function(){this.prototype.events={"click form.edit-user input[type=checkbox]":"checkNotificationSettings","click li.print a":"printArticle","click aside.content-social-distribution li a":"shareClickTracking","click textarea.stolen-body":"selectStolenBody","click .content-translations .content-translations-toggle":"_toggleTranslationSidebar","click .content-authors .content-authors-toggle":"_toggleArticleSidebar"}}}],(o=[{key:"initialize",value:function(e){var n=this;yr(br(t.prototype),"initialize",this).call(this,e),this.closeComments=this.closeComments.bind(this),this.openComments=this.openComments.bind(this),this._toggleArticleSidebar=this._toggleArticleSidebar.bind(this),this._toggleTranslationSidebar=this._toggleTranslationSidebar.bind(this),-1===navigator.platform.indexOf("iPhone")&&new h.a(i()("figure.zoomable > a")),new f.a,this.trackScrolling(),this.initResponsiveFrames(),d.a.init(this.$el),u.a.subscribe("comments:count:updated",this.updateCommentCount),u.a.subscribe("comments:close",this.closeComments),u.a.subscribe("comments:open",this.openComments),this.commentsClosedAt=e.comments_closed_at,this.content_slug=e.content_slug,this.content_id=e.content_id,this.commentsSectionView=new Xn({commentsClosedAt:this.commentsClosedAt,content_id:this.content_id}),this.commentsSectionView.$el.appendTo(i()("#comments-container")),this.initShareButtons(),this.initPrintButton(),this.initContentBody(),this.initListenAndSubscribe(e);var r={content:{topicIds:e.topic_ids}};Object(fr.a)(r),"undefined"==typeof IntersectionObserver?this.renderRelatedContent():this.renderRelatedContentWhenViewportVisible(),Object(ur.a)("/editorial/actions_menu/content/:content_id".replace(":content_id",e.content_id)),pr.a.subscribe(function(e){"republish"===e.type&&n.republish()})}},{key:"_isUS",value:function(){return i()("body").is(".region_us")}},{key:"_isAU",value:function(){return i()("body").is(".region_au")}},{key:"_isUK",value:function(){return i()("body").is(".region_uk")}},{key:"_isFR",value:function(){return i()("body").is(".region_fr")}},{key:"_isAfrica",value:function(){return i()("body").is(".region_africa")}},{key:"shareClickTracking",value:function(e){var t=i()(e.currentTarget).closest("li").attr("class");Object(Rt.a)("Article page - share clicks",document.location.pathname,t,1)}},{key:"initShareButtons",value:function(){var e=this;return i.a.ajax({url:"/share_counts/".concat(this.content_id),success:function(t){return e.$(".twitter-button").each(function(e,n){return new p.a({el:n,count:t.tweet_count})}),e.$(".facebook-button").each(function(e,n){return new p.a({el:n,count:t.facebook_count})}),e.$(".linkedin-button").each(function(e,n){return new p.a({el:n,count:t.linked_in_count})})}})}},{key:"initPrintButton",value:function(){var e="<li class='print'><a href='#'><i class='icon-print'></i> ".concat(r.a.t("content.button.print"),"</a></li>");return this.$el.find(".content-social-distribution ul").append(e),this.$el.find(".interact-with-this-article ul").append(e)}},{key:"initContentBody",value:function(){var e=document.querySelector("div.content-body");e&&Object(sr.a)(e)}},{key:"initListenAndSubscribe",value:function(e){if(document.getElementById("podcast-listen-and-subscribe")){var t=document.createElement("div"),n=document.getElementById("podcast-listen-and-subscribe");n.parentNode.insertBefore(t,n);var r=fn.a.createElement(cr.a,e);dn.a.render(r,t)}}},{key:"printArticle",value:function(e){return e.preventDefault(),Object(Rt.a)("Article page - print button clicks",document.location.pathname,"",1),window.print()}},{key:"trackScrolling",value:function(){var e=new Date;if(i()("#article").length>0){for(var t={},n=i()("#article").height(),r=i()("#article").offset().top,o=10;o<=100;o+=10)t[o]=n/100*o+r;var s=function(){var n=i()(window).scrollTop()+i()(window).height();return function(){var r=[];for(var o in t){var i=t[o];if(n>i){if(Object(Rt.a)("Article Page - percent scrolled",document.location.pathname,"".concat(o,"%"),1),"100"==="".concat(o)){var a=(new Date-e)/1e3;Object(Rt.a)("Article Page - article scrolled to bottom",document.location.pathname,"timeTaken",a)}r.push(delete t[o])}else r.push(void 0)}return r}()},c=Object(a.debounce)(s,50);return i()(window).scroll(c),s()}}},{key:"initResponsiveFrames",value:function(){var e=this.$el.find("iframe[responsive='true']");return Object(a.each)(e,function(e,t){return i()(e).hide(),i()(e).before("<div id='responsive-iframe-".concat(t,"'></div>")),new c.a.Parent("responsive-iframe-".concat(t),i()(e).attr("src"),{})})}},{key:"republish",value:function(e){var t=this;return i.a.ajax({url:e||"/share/".concat(window.location.pathname),dataType:"text",success:function(e){return new ar({republishContent:e,copyAdvice:t.copy_advice()}).$el.appendTo(document.body)}})}},{key:"copy_advice",value:function(){var e=!navigator.platform.indexOf("iPhone"),t=navigator.platform.indexOf("Mac")?"Ctrl":"";return e?r.a.t("content.message.copying_text_on_mobile_device"):r.a.t("content.message.key_combination_to_press_to_copy_text",{control_or_command_key:t})}},{key:"selectStolenBody",value:function(e){return i()(e.currentTarget).select()}},{key:"closeComments",value:function(){var e="/editorial/content/".concat(this.content_slug,"/close_comments");return i.a.ajax({url:e,type:"PUT",success:function(e){return u.a.publish("comments:closed",[e.comments_closed_at])}})}},{key:"openComments",value:function(){var e="/editorial/content/".concat(this.content_slug,"/open_comments");return i.a.ajax({url:e,type:"PUT",success:function(e){return u.a.publish("comments:opened",[e.comments_closed_at])}})}},{key:"updateCommentCount",value:function(e){var t;return t=1!==e?r.a.t("comment.label.comment_plural"):r.a.t("comment.label.comment_singular"),i()(".comment-count").html("".concat(e," ").concat(t))}},{key:"_toggleArticleSidebar",value:function(e){return e.preventDefault(),this.$el.find(".content-sidebar").toggleClass("open")}},{key:"_toggleTranslationSidebar",value:function(e){return e.preventDefault(),this.$el.find(".content-translations").toggleClass("open")}},{key:"renderRelatedContent",value:function(){var e=document.querySelector(".react-content-related-container");if(null!==e){var t=e.dataset.articleId,n=fn.a.createElement(lr.a,{articleId:t});dn.a.render(n,e)}}},{key:"renderRelatedContentWhenViewportVisible",value:function(){var e=this,t=document.querySelector(".react-content-related-container");new IntersectionObserver(function(t,n){t.forEach(function(t){t.isIntersecting&&(e.renderRelatedContent(),n.disconnect())})}).observe(t)}}])&&hr(n.prototype,o),s&&hr(n,s),t}()).initClass(),gr=gr)},1512:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n(3),i=n.n(o),a=n(0),s=n.n(a);var c=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentEmail=t.current_email,this.emails=t.emails,this.slug=t.slug},l=n(867),u=n.n(l);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=d(t).call(this,e))||"object"!==f(o)&&"function"!=typeof o?h(r):o).onEmailChange=n.props.onEmailChange.bind(h(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,s.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.user,t=e.emails.map(function(e){return s.a.createElement("option",{key:e,value:e},e)});return s.a.createElement("div",{className:"email-selector ".concat(u.a.selector)},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("select",{name:"email",id:"email",defaultValue:e.currentEmail,onChange:this.onEmailChange},t))}}])&&p(n.prototype,r),o&&p(n,o),t}();y.propTypes={onEmailChange:i.a.func.isRequired,user:i.a.instanceOf(c).isRequired};var b=y,v=n(4);var g=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t.code,this.name=t.name},_=n(164);var w=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blurb=t.blurb,this.confirmed=t.confirmed,this.frequency=t.frequency,this.listId=t.listId,this.logoUrl=t.logoUrl,this.name=t.name,this.region=new g(t.region),this.subscribed=t.subscribed,this.subscribedAt=t.subscribedAt},O=n(34),k=n.n(O),C=n(10),S=n.n(C),j=n(1),P=n(469),E=n.n(P);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=R(t).call(this,e))||"object"!==T(o)&&"function"!=typeof o?M(r):o).resendConfirmationEmail=n.resendConfirmationEmail.bind(M(n)),n.state={sentConfirmation:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,s.a.Component),n=t,(r=[{key:"resendConfirmationEmail",value:function(){var e=this,t=this.props.newsletterSubscription,n=this.props.user,r="/profiles/:profile_id/newsletters/:list_id".replace(":profile_id",n.slug).replace(":list_id",t.listId);Object(j.ajax)({url:r,type:"POST",data:{email:n.currentEmail,subscribed:!0},success:function(){e.setState({sentConfirmation:!0})}})}},{key:"pendingConfirmationButton",value:function(){var e=this.props.newsletterSubscription,t=v.a.t("profile_newsletters.buttons.resend_confirmation"),n=v.a.t("profile_newsletters.subscriptions.confirmation_sent"),r=S()(),o=S()(e.subscribedAt);return this.state.sentConfirmation?s.a.createElement("div",null,n):r.diff(o,"days")>=1?s.a.createElement("button",{className:k()(E.a["pending-confirmation-resend-button"],"button","secondary"),onClick:this.resendConfirmationEmail},t):""}},{key:"render",value:function(){var e=v.a.t("profile_newsletters.subscriptions.pending_confirmation");return s.a.createElement("div",{className:E.a["pending-confirmation-container"]},e,s.a.createElement("div",{className:E.a["pending-confirmation-message-container"]},this.pendingConfirmationButton()))}}])&&x(n.prototype,r),o&&x(n,o),t}();A.propTypes={newsletterSubscription:i.a.instanceOf(w).isRequired,user:i.a.instanceOf(c).isRequired};var $=A,I=n(16),N=n(214),V=n.n(N);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=z(t).call(this,e))||"object"!==B(o)&&"function"!=typeof o?L(r):o).toggleSubscription=n.toggleSubscription.bind(L(n)),n.state={subscribed:e.newsletterSubscription.subscribed},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,s.a.Component),n=t,(r=[{key:"toggleSubscription",value:function(){var e=!this.state.subscribed,t=this.props.newsletterSubscription,n=this.props.user,r="/profiles/:profile_id/newsletters/:list_id".replace(":profile_id",n.slug).replace(":list_id",t.listId);this.setState({subscribed:e}),Object(j.ajax)({url:r,type:"POST",data:{email:n.currentEmail,subscribed:e}})}},{key:"toggleSwitchElement",value:function(){var e=this.props.newsletterSubscription,t=this.props.user;return e.confirmed?s.a.createElement(I.Switch,{checked:this.state.subscribed,colour:"primary",disableRipple:!0,name:"toggle-switch",onChange:this.toggleSubscription,value:e.listId}):s.a.createElement($,{newsletterSubscription:e,user:t})}},{key:"render",value:function(){var e=this.props.newsletterSubscription,t=e.region;return s.a.createElement("div",{className:"newsletter-subscription-row ".concat(V.a.container," newsletter-").concat(e.listId)},s.a.createElement("div",{className:V.a.image},s.a.createElement("img",{src:e.logoUrl,alt:e.name})),s.a.createElement("div",{className:V.a.description},s.a.createElement("h2",{className:k()("newsletter-name")},e.name),s.a.createElement("h3",{className:k()("newsletter-region",V.a["description-region"])},v.a.t("profile_newsletters.regions.the_conversation")," ",t.name),s.a.createElement("h4",{className:k()("legacy newsletter-frequency",V.a["description-frequency"])},e.frequency),s.a.createElement("div",{className:k()("newsletter-blurb",V.a["description-blurb"])},e.blurb)),s.a.createElement("div",{className:V.a["toggle-switch"]},s.a.createElement("div",{className:V.a["toggle-switch-element"]},this.toggleSwitchElement())))}}])&&F(n.prototype,r),o&&F(n,o),t}();Y.propTypes={newsletterSubscription:i.a.instanceOf(w).isRequired,user:i.a.instanceOf(c).isRequired};var U=Y,H=n(93),W=n(5),G=n(791),K=n.n(G);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ne=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Z(t).call(this,e))||"object"!==J(o)&&"function"!=typeof o?ee(r):o).onEmailChange=n.onEmailChange.bind(ee(n)),n.timerId=null,n.state={loaded:!1,newsletterSubscriptions:[],user:n.props.user},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,s.a.Component),n=t,(r=[{key:"componentWillMount",value:function(){this.fetchSubscriptions(this.state.user)}},{key:"componentWillUpdate",value:function(e,t){var n=this;t.loaded||(this.timerId=setTimeout(function(){return n.fetchSubscriptions(t.user)},2e3))}},{key:"onEmailChange",value:function(e){clearTimeout(this.timerId);var t=new c(this.state.user);t.currentEmail=e.target.value,this.fetchSubscriptions(t)}},{key:"fetchSubscriptions",value:function(e){var t=this,n="/profiles/:profile_id/newsletters/subscriptions".replace(":profile_id",e.slug);Object(j.ajax)({url:n,type:"GET",data:{email:e.currentEmail},success:function(n){var r=n.loaded,o=n.subscriptions.map(function(e){return new w(e)});t.setState({loaded:!!r,newsletterSubscriptions:o,user:e})}})}},{key:"loadingSpinner",value:function(){return this.state.loaded?null:s.a.createElement("div",{className:k()("spinner-container",K.a["spinner-container"])},s.a.createElement(_.a,{loaded:!0}))}},{key:"renderSubscriptionRows",value:function(e){var t=this,n=this.state.user.currentEmail;return e.map(function(e){var r=[e.listId,n].join("-");return s.a.createElement(U,{key:r,newsletterSubscription:e,user:t.state.user})})}},{key:"renderInternationalNewsletterHeading",value:function(e){return 0===e.length?null:s.a.createElement("h2",{className:k()("international-newsletters-heading",K.a["international-newsletters-heading"])},v.a.t("profile_newsletters.heading.international_newsletters"))}},{key:"render",value:function(){var e=this.props.currentRegion,t=X(Object(W.partition)(this.state.newsletterSubscriptions,function(t){return t.region.code===e.code}),2),n=t[0],r=t[1];return s.a.createElement(I.ThemeProvider,{generateClassName:Object(H.a)()},s.a.createElement(b,{user:this.state.user,onEmailChange:this.onEmailChange}),this.loadingSpinner(),s.a.createElement("div",{className:"local-newsletters"},this.renderSubscriptionRows(n)),s.a.createElement("div",{className:"international-newsletters"},this.renderInternationalNewsletterHeading(r),this.renderSubscriptionRows(r)))}}])&&Q(n.prototype,r),o&&Q(n,o),t}();ne.propTypes={currentRegion:i.a.instanceOf(g).isRequired,user:i.a.instanceOf(c).isRequired};var re=ne,oe=n(13),ie=n.n(oe);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=se(this,ce(t).call(this));var r=document.getElementById("profile-newsletters-index"),o=s.a.createElement(re,{user:new c(e.user),currentRegion:new g(e.currentRegion)});return ie.a.render(o,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,r["default"]),t}();t.default=ue},1517:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n(4),i=n(0),a=n.n(i),s=n(13),c=n.n(s),l=n(16),u=n(3),f=n.n(u),p=n(864),d=n.n(p);function h(e){if(!e.enabled)return a.a.createElement(a.a.Fragment,null);var t={__html:o.a.t("recaptcha.disclosure_html")};return a.a.createElement("div",{className:d.a.disclosure,dangerouslySetInnerHTML:t})}h.propTypes={enabled:f.a.bool.isRequired};var m=n(865),y=n.n(m),b=n(866),v=n.n(b);function g(e){var t=e.enabled,n=e.instance,r=e.locale,o=e.onVerify,i=e.siteKey;return t?a.a.createElement(y.a,{className:v.a.grecaptchaBadge,hl:r,onVerify:o,ref:n,sitekey:i,size:"invisible"}):a.a.createElement(a.a.Fragment,null)}g.propTypes={enabled:f.a.bool.isRequired,instance:f.a.oneOfType([f.a.func,f.a.shape({current:f.a.oneOfType([f.a.elementType,f.a.object])})]).isRequired,locale:f.a.string.isRequired,onVerify:f.a.func.isRequired,siteKey:f.a.string.isRequired};var _=n(34),w=n.n(_),O=n(308),k=n.n(O);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var S="/subscriptions";function j(e){var t=e.csrfToken,n=e.fullWidth,r=e.locale,s=e.location,c=e.newsletterListId,u=e.recaptcha,f=[k.a.container,n?k.a.fullWidth:k.a.stacked],p=C(Object(i.useState)(),2),d=p[0],m=p[1],y=Object(i.useRef)(),b=Object(i.useRef)();return a.a.createElement(l.ThemeProvider,{theme:Object(l.accentTheme)()},a.a.createElement("form",{method:"POST",action:S,onSubmit:function(e){e.preventDefault(),u.enabled?b.current.execute():y.current.submit()},ref:y},a.a.createElement(g,{enabled:u.enabled,instance:b,locale:r,onVerify:function(e){m(e),y.current.submit()},siteKey:u.siteKey}),a.a.createElement("input",{type:"hidden",name:"authenticity_token",defaultValue:t}),a.a.createElement("input",{type:"hidden",name:"subscribe[location]",defaultValue:s}),a.a.createElement("input",{type:"hidden",name:"subscribe[newsletter_list_id]",defaultValue:c}),a.a.createElement("input",{type:"hidden",name:"subscribe[recaptcha_token]",defaultValue:d}),a.a.createElement("div",{className:w()(f)},a.a.createElement(l.TextField,{label:o.a.t("newsletters.labels.email"),fullWidth:n,name:"subscribe[email]",className:k.a.input}),a.a.createElement(h,{enabled:u.enabled}),a.a.createElement(l.Button,{colour:"primary",variant:"contained",size:"small",type:"submit",className:k.a.button},o.a.t("newsletters.buttons.subscribe")))))}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}j.defaultProps={fullWidth:!1},j.propTypes={csrfToken:f.a.string.isRequired,fullWidth:f.a.bool,locale:f.a.string.isRequired,location:f.a.string.isRequired,newsletterListId:f.a.string.isRequired,recaptcha:f.a.shape({enabled:f.a.bool.isRequired,siteKey:f.a.string.isRequired}).isRequired},n.d(t,"default",function(){return A});var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,M(t).call(this,{events:{"click #newsletter-archive .button":"showMore"},recaptcha:TC.Config.recaptcha,locale:TC.locale}))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["default"]),n=t,(i=[{key:"initialize",value:function(e){R(M(t.prototype),"initialize",this).call(this,e),this.showMore=this.showMore.bind(this),this.renderSubscriptionForms(e),this.renderArchiveShowMoreButton()}},{key:"renderSubscriptionForms",value:function(e){var t=this.$el.find(".subscription-newsletter-wrapper")[0];c.a.render(a.a.createElement(j,E({},t.dataset,{locale:e.locale,recaptcha:e.recaptcha})),t)}},{key:"showMore",value:function(){this.$el.find("#newsletter-archive .hidden").show(),this.$el.find("#newsletter-archive .button").hide(),this.$el.find("#newsletter-archive-show-more").hide()}},{key:"renderArchiveShowMoreButton",value:function(){var e=this.$el.find("#newsletter-archive-show-more");e.length>0&&c.a.render(a.a.createElement(l.ThemeProvider,{theme:Object(l.accentTheme)()},a.a.createElement(l.Button,{variant:"outlined",size:"small",type:"submit",onClick:this.showMore},o.a.t("newsletters.buttons.show_more"))),e[0])}}])&&T(n.prototype,i),s&&T(n,s),t}()},1518:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(150),a={hideAndCloseGallery:function(e){return o()(e).append('<a href="#" class="button close-gallery">Close</a>')},loadGallery:function(e){return this.injectGallery(),o()(".gallery-content-inner").on("load","".concat(e," .expandomatic"),function(){o()(".gallery-content-inner").append('<a href="#" class="button close-gallery">Close</a>');return setTimeout(function(){return o()(".gallery-cover, .gallery-content").removeClass("hidden loading")},10)})},injectGallery:function(){return o()("body").append('<div class="gallery-cover hidden loading"></div>'),o()("body").append('<div class="gallery-content hidden"><div class="gallery-content-inner"><a href="#" class="button close-gallery">Close</a></div></div>')},removeGallery:function(){return o()(".gallery-cover, .gallery-content").remove()},enableScrollForBody:function(){return o()("body").css("overflow","auto")},disableScrollForBody:function(){return o()("body").css("overflow","hidden")}},s=n(12);var c=n(102),l=n(78),u=n.n(l),f=30,p="tc_region";var d=n(83),h=n(465),m=n(31);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O;t.default=((O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,_(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,s.default),n=t,l=[{key:"initClass",value:function(){this.prototype.events={"click .social-media a.twitter":"_trackTwitter","click .social-media a.facebook":"_trackFaceBook","click .social-media a.linkedin":"_trackLinkedin","click .page-layout.section article a":"_sectionArticleTracking","click a.button.expand-gallery":"_loadGallery","click a.button.close-gallery":"_closeGallery"}}}],(r=[{key:"initialize",value:function(e){g(_(t.prototype),"initialize",this).call(this,e),this._initGalleryExpansion(),new i.a,Object(c.a)().then(function(e){u.a.set(p,e,{domain:window.TC.Config.cookie_domain,expires:f})}),Object(h.a)(),Object(d.a)("/editorial/actions_menu/pages/:page_id".replace(":page_id",e.pageId))}},{key:"_initGalleryExpansion",value:function(){if(this.galleryButton=o()(".expand-gallery"),this.galleryButton.length>0)return this.galleryUrl=this.galleryButton[0].href}},{key:"_loadGallery",value:function(e){return e.preventDefault(),a.loadGallery(this.galleryUrl),a.disableScrollForBody()}},{key:"_closeGallery",value:function(e){return e.stopPropagation(),e.preventDefault(),o()("html, body").stop(),a.removeGallery(),a.enableScrollForBody()}},{key:"_isUS",value:function(){return o()("body").is(".region_us")}},{key:"_isAU",value:function(){return o()("body").is(".region_au")}},{key:"_isFR",value:function(){return o()("body").is(".region_fr")}},{key:"_isUK",value:function(){return o()("body").is(".region_uk")}},{key:"_isGlobal",value:function(){return o()("body").is(".region_global")}},{key:"_isHomepage",value:function(){return o()("body").is(".pages-show-home-page")&&!o()("body").is(".pages-edit")}},{key:"_isAfrica",value:function(){return o()("body").is(".region_africa")}},{key:"_isOldIE",value:function(){return o()("html").is(".ie7, .ie8")}},{key:"_trackTwitter",value:function(e){return this.link=o()(e.currentTarget),this._completeTracking("Social Media - clicks to our page","Twitter",link)}},{key:"_trackFaceBook",value:function(e){return this.link=o()(e.currentTarget),this._completeTracking("Social Media - clicks to our page","Facebook",link)}},{key:"_trackLinkedin",value:function(e){return this.link=o()(e.currentTarget),this._completeTracking("Social Media - clicks to our page","Linkedin",link)}},{key:"_completeTracking",value:function(e,t,n){Object(m.a)(e,t,n.attr("href"),1)}},{key:"_sectionArticleTracking",value:function(e){var t=o()(e.currentTarget),n=t.parents(".page-layout.section").first().data("name"),r=t.closest("article"),i=r.closest(".page-area, .article-section"),a=r.closest(".article-section"),s=a.attr("id"),c="0".concat(o()(".article-section").index(a)+1).slice(-2),l="0".concat(a.find(".page-area").index(i)+1).slice(-2),u="0".concat(i.find("article").index(r)+1).slice(-2),f="".concat(n,"-").concat(c,"-").concat(s,"-").concat(l,"-").concat(u);return this._completeTracking("Home/Section Page - Article clicks by position",f,t)}}])&&b(n.prototype,r),l&&b(n,l),t}()).initClass(),O=O)},1519:function(e,t,n){"use strict";n.r(t);var r,o=n(12),i=n(4),a=n(1),s=n.n(a),c=n(5),l=n(6),u=n(23),f=n(11);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,v=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,m(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,l.Model),n=t,o=[{key:"initClass",value:function(){this.prototype.urlRoot="/author_communications"}}],(r=null)&&d(n.prototype,r),o&&d(n,o),t}()).initClass(),r=r),g=n(305);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j,P=((b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,C(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,u.a),n=t,o=[{key:"initClass",value:function(){this.prototype.className="contact-author lightbox clearfix",this.prototype.events={"click footer a[data-action=cancel-attributions]":"_leave","click a.submit":"_contactAuthor"},this.prototype.template=Object(c.template)('<div id="contact-author">\n  <h1 class="legacy page-header"><%- i18n.t(\'author_communication.label.contact_author\') %></h1>\n\n  <form class="formtastic newform">\n    <fieldset class="inputs">\n      <ol>\n        <input id="to_author_id" type="hidden" name="to_author_id" value="<%- author_id %>">\n\n        <li class="from_name string input">\n          <label for="from_name">\n            <%- i18n.t(\'author_communication.label.your_name\') %>\n          </label>\n\n          <input\n            id="from_name"\n            name="from_name"\n            type="text"\n            autocomplete="off"\n            placeholder="<%- i18n.t(\'author_communication.placeholders.your_full_name\') %>"\n            maxlength="255"\n            value="<%- TC.currentUser.get("full_name") %>"\n          >\n        </li>\n\n        <li class="from_email string input">\n          <label for="from_email">\n            <%- i18n.t(\'author_communication.label.your_email\') %>\n          </label>\n\n          <input\n            id="from_email"\n            name="from_email"\n            type="email"\n            autocomplete="off"\n            placeholder="<%- i18n.t(\'author_communication.placeholders.your_email_address\') %>"\n            value="<%- TC.currentUser.get("email") %>"\n          >\n        </li>\n\n        <li class="reason-for-contacting select input">\n          <label for="reason">\n            <%- i18n.t(\'author_communication.label.reason_for_contacting\') %>\n          </label>\n\n          <select name="reason">\n            <% _.each(reasons, function(reason) {%>\n              <option value="<%- reason[\'slug\'] %>"><%- reason[\'label\'] %></option>\n            <% }); %>\n          </select>\n        </li>\n\n        <li class="required text input">\n          <label for="message">\n            <%- i18n.t(\'author_communication.label.your_message\') %>\n          </label>\n\n          <textarea\n            id="message"\n            name="message"\n            rows="12"\n            placeholder="<%- i18n.t(\'author_communication.placeholders.your_message\') %>"\n          ></textarea>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>\n\n<footer class="button-row">\n  <a data-action="cancel-attributions" class="button secondary" href="#">\n      <%- i18n.t(\'author_communication.button.close\') %>\n    </a>\n\n  <a class="submit button primary" href="#">\n      <%- i18n.t(\'author_communication.button.contact\') %>\n    </a>\n</footer>',{imports:{i18n:i.a}})}}],(r=[{key:"initialize",value:function(e){var n=this;return k(C(t.prototype),"initialize",this).call(this,e),this.author_id=e.author_id,this.availableFor=e.availableFor,Object(g.a)().then(function(){return n.render()}),this.emailEl=s()("input[type=text]",this.el),Object(c.defer)(function(){return n.emailEl.focus()})}},{key:"render",value:function(){return s()(this.innerEl).html(this.template({author_id:this.author_id,reasons:this.availableFor})),k(C(t.prototype),"render",this).call(this)}},{key:"_attributesFromForm",value:function(){return Object(c.fromPairs)(Object(c.map)(this.$el.find("form").serializeArray(),function(e){return[e.name,e.value]}))}},{key:"_contactAuthor",value:function(e){var t=this;return e.preventDefault(),this.communique=new v,this.communique.save(this._attributesFromForm(),{wait:!0,success:function(e,n,r){return f.a.now("notice",i.a.t("author_communication.messages.success")),t._leave()},error:function(e,n,r){return n.responseJSON&&n.responseJSON.errors&&t._displayErrors(n.responseJSON.errors),f.a.now("alert",i.a.t("author_communication.messages.error"))}})}},{key:"_displayErrors",value:function(e){return this.$el.find("li.error").removeClass("error"),this.$el.find(".inline-errors").remove(),Object(c.each)(Object(c.keys)(e),function(t){var n=s()("#".concat(t));return n.parents("li").addClass("error"),n.after("<p class='inline-errors'>".concat(e[t].join(", "),"</p>"))})}}])&&w(n.prototype,r),o&&w(n,o),t}()).initClass(),b=b);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=((j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,M(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,l.View),n=t,o=[{key:"initClass",value:function(){this.prototype.events={"click .profile-contact-button.signed-in":"_contactAuthor"},this.prototype._contactButtonTemplate=Object(c.template)('<a class="profile-contact-button signed-in button primary large" href="#">\n  <%- i18n.t(\'author_communication.button.contact\') %>\n</a>',{imports:{i18n:i.a}}),this.prototype._signUpToContactButtonTemplate=Object(c.template)('<a\n  class="profile-contact-button sign-up-required button primary large"\n  href="/sign_in?return_to='.concat(window.location.pathname,"\"\n>\n  <%- i18n.t('author_communication.button.sign_in_to_contact') %>\n</a>"),{imports:{i18n:i.a}})}}],(r=[{key:"initialize",value:function(e){return R(M(t.prototype),"initialize",this).call(this,e),this.render=this.render.bind(this),this._userBannedFromContactingAuthors=this._userBannedFromContactingAuthors.bind(this),this._userNotSignedIn=this._userNotSignedIn.bind(this),this._contactAuthor=this._contactAuthor.bind(this),this.user_id=e.user_id,this.currentUserCanContactAuthors=e.currentUserCanContactAuthors,this.contactable=e.contactable,this.availableFor=e.availableFor,this.render()}},{key:"render",value:function(){switch(!1){case!!this.contactable:break;case!this._userNotSignedIn():this.$el.prepend(this._signUpToContactButtonTemplate());break;case!this._userBannedFromContactingAuthors():break;default:this.$el.prepend(this._contactButtonTemplate())}return R(M(t.prototype),"render",this).call(this)}},{key:"_userBannedFromContactingAuthors",value:function(){return!this.currentUserCanContactAuthors}},{key:"_userNotSignedIn",value:function(){return s.a.isEmptyObject(TC.currentUser.attributes)}},{key:"_contactAuthor",value:function(e){return e.preventDefault(),new P({author_id:this.user_id,availableFor:this.availableFor}).$el.appendTo(document.body)}}])&&T(n.prototype,r),o&&T(n,o),t}()).initClass(),j=j),$=n(83);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e,t,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",function(){return L});var L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,F(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,o["default"]),n=t,(r=[{key:"initialize",value:function(e){this.renderContactAuthor=this.renderContactAuthor.bind(this),this.user_id=e.user_id,this.isAuthor=e.is_author,this.currentUserCanContactAuthors=e.currentUserCanContactAuthors,this.contactable=e.contactable,this.availableFor=e.availableFor,this.isAuthor&&this.renderContactAuthor(),Object($.a)("/editorial/actions_menu/profiles/:user_id".replace(":user_id",e.user_id)),B(F(t.prototype),"initialize",this).call(this,e)}},{key:"renderContactAuthor",value:function(){var e=new A({user_id:this.user_id,currentUserCanContactAuthors:this.currentUserCanContactAuthors,contactable:this.contactable,availableFor:this.availableFor,el:this.$el.find(".profile-user-details")});return this.$el.find(".profile-user-details").prepend(e.el)}}])&&N(n.prototype,r),i&&N(n,i),t}()},1521:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r);navigator.platform.match("Win")&&/WebKit/.test(navigator.userAgent)&&o()(document.body).css("font-family","helvetica, arial, sans-serif");n(909),n(911),n(912),n(913),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(921),n(922),n(923),n(924),n(925),n(926),n(927),n(928),n(929),n(930),n(931),n(932),n(933),n(439),n(934),n(935),n(936),n(937),n(938),n(939),n(940),n(941),n(942),n(943),n(944),n(945),n(947),n(948),n(949),n(950),n(951),n(952),n(953),n(954),n(955),n(956),n(957),n(958),n(960),n(961),n(962),n(963),n(964),n(965),n(966),n(967),n(968),n(969),n(970),n(971),n(972),n(974),n(975),n(976),n(977),n(978),n(979),n(981),n(983),n(985),n(986),n(987),n(988),n(989),n(990),n(991),n(992),n(993),n(994),n(995),n(996),n(997),n(998),n(999),n(1e3),n(1001),n(1002),n(1003),n(1004),n(1005),n(1007),n(1008),n(1011),n(1012),n(1013),n(1015),n(1016),n(1017),n(1018),n(1019),n(1020),n(1021),n(1022),n(1023),n(1024),n(1025),n(1026),n(1027),n(1028),n(1029),n(1030),n(1031),n(1032),n(1033),n(821),n(1034),n(1035),n(1036),n(1037),n(1038),n(1039),n(1040),n(1041),n(1042),n(1043),n(1044),n(1045),n(1046),n(1047),n(1048),n(1049),n(1050),n(1051),n(1052),n(1053),n(1054),n(1055),n(1056),n(1057),n(1058),n(1059),n(1060),n(1061),n(1062),n(1063),n(1064),n(1065),n(1066),n(1067),n(1068),n(1069),n(1070),n(1071),n(1072),n(1073),n(1074),n(1075),n(1076),n(1077),n(1078),n(1079),n(1080),n(1082),n(1083),n(1084),n(1085),n(1086),n(1087),n(1088),n(1089),n(1090),n(1091),n(1092),n(1093),n(1094),n(1095),n(1096),n(1098),n(1099),n(1100),n(1103),n(829),n(1104);[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})});n(1105),n(1106),n(1107),n(240),n(325),n(1108);var i=n(6),a=n.n(i),s=n(847),c=n.n(s),l=n(460),u=n(233);u.a.subscribe(function(e){switch(e.type){case"redirect":e.href?Object(u.b)(e.href):console.warn("The redirect event requires a href property")}}),l.a.CSRF.then(function(e){var t=e.token;o.a.ajaxPrefilter(function(e,n,r){e.crossDomain||r.setRequestHeader("X-CSRF-Token",t)})}),c.a.start(),a.a.$=o.a,n(1111)(function(){o()("input[placeholder]").placeholder()}),window.TC.activeAjax=function(){return o.a.active},window.TC.TimeFormatter=n(228).default,window.TC.BasePage=n(12).default,window.TC.ChooserView=n(50).default,window.TC.ColumnPage=n(1112).default,window.TC.ContentPage=n(1508).default,window.TC.EditPasswordPage=n(1178).default,window.TC.EditProfilePage=n(1179).default,window.TC.InfoPage=n(1180).default,window.TC.InstitutionPage=n(1181).default,window.TC.NewEventPage=n(457).default,window.TC.NewRegistrationPage=n(1525).default,window.TC.NewsletterSubscriptionPage=n(1526).default,window.TC.NewsletterSubscriptionShowPage=n(1517).default,window.TC.PagePage=n(1518).default,window.TC.PartnerPage=n(1186).default,window.TC.PodcastsPage=n(1187).default,window.TC.PodcastShowPage=n(1188).default,window.TC.ProfileCredentialsPage=n(1189).default,window.TC.ProfileNewslettersPage=n(1512).default,window.TC.ProfilePage=n(1519).default,window.TC.SearchPage=n(1522).default,window.TC.TeamPage=n(1194).default,window.TC.TopicPage=n(1195).default,window.TC.User=n(138).default},1522:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(5),a=n(12),s=n(6);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,f(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,s["View"]),n=t,(r=[{key:"initialize",value:function(e){var t=this;return this._selectOption=this._selectOption.bind(this),this._documentClick=this._documentClick.bind(this),this._toggleMenu=this._toggleMenu.bind(this),null==e&&(e={}),this.$el.on("click",this._toggleMenu),this.selectedOption=this.$el.find("li.checked"),this.previouslySelectedOption=this.selectedOption,this._updateView(),this.onSelect=e.onSelect,this.$el.find("li").each(function(e,n){return o()(n).on("click",t._selectOption)})}},{key:"restorePreviousOption",value:function(){return this.selectedOption=this.previouslySelectedOption,this._updateView()}},{key:"selectedValue",value:function(){return this.selectedOption.find("input").prop("value")}},{key:"getSelectedLabel",value:function(){return this.selectedOption.find("label").text()}},{key:"setMenuLabelText",value:function(e){return this.$el.find(".menu-button-text").text(e)}},{key:"_selectOption",value:function(e){return this.previouslySelectedOption=this.selectedOption,this.selectedOption=o()(e.currentTarget),this.selectedOption.hasClass("checked")?this.onSelect[this.selectedValue()]?this.onSelect[this.selectedValue()]():void 0:(this._updateView(),this.onSelect[this.selectedValue()]?this.onSelect[this.selectedValue()]():this.onSelect.default())}},{key:"_documentClick",value:function(e){return e.preventDefault(),this._toggleMenu()}},{key:"_toggleMenu",value:function(e){var t=this;return null!=e&&e.preventDefault(),this.$el.toggleClass("open"),this.$el.hasClass("open")?Object(i.defer)(function(){return t.$el.off("click",t._toggleMenu),o()(document).on("click",t._documentClick)}):Object(i.defer)(function(){return t.$el.on("click",t._toggleMenu),o()(document).off("click",t._documentClick)})}},{key:"_updateView",value:function(){return this.setMenuLabelText(this.getSelectedLabel()),this.$el.find("li").removeClass("checked"),this.selectedOption.addClass("checked"),this.selectedOption.find("input").prop("checked",!0)}}])&&l(n.prototype,r),a&&l(n,a),t}(),h=n(23),m=n(424);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,h["a"]),n=t,(r=[{key:"initialize",value:function(e){return g(_(t.prototype),"initialize",this).call(this,e),this.dateRangePicker=new m.a({ranges:[]}),this.dateRangePicker.$el.appendTo(this.$el.find(".lightbox-inner")),this.listenTo(this.dateRangePicker,"cancel_date_pick",this._cancel),this.listenTo(this.dateRangePicker,"update_date_range",this._update)}},{key:"_cancel",value:function(){return this.trigger("cancel"),this.close()}},{key:"_update",value:function(e,t){return this.trigger("update",e,t),this.close()}}])&&b(n.prototype,r),o&&b(n,o),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e,t,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,P(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a["default"]),n=t,(r=[{key:"initialize",value:function(e){var n=this;return j(P(t.prototype),"initialize",this).call(this,e),this._showCustomDateSelector=this._showCustomDateSelector.bind(this),this._defaultSelect=this._defaultSelect.bind(this),this._cancelCustomDate=this._cancelCustomDate.bind(this),this._setCustomDate=this._setCustomDate.bind(this),this._normaliseResultUrls(),o()("#search-facets").fadeIn(),o()("#search-facets").children().each(function(e,t){if("search-date-selector"!==t.id)return new d({el:t,onSelect:{default:n._defaultSelect}});if(n.dateMenu=new d({el:t,onSelect:{default:n._defaultSelect,custom:n._showCustomDateSelector}}),"custom"===n.dateMenu.selectedValue()){var r=o()("#filter-date-custom-from").prop("value"),i=o()("#filter-date-custom-to").prop("value");return n._setCustomDateLabel(r,i)}})}},{key:"_showCustomDateSelector",value:function(e){var t=new O;return t.$el.appendTo(this.$el),this.listenTo(t,"update",this._setCustomDate),this.listenTo(t,"cancel",this._cancelCustomDate),this.listenTo(t,"leave",this._cancelCustomDate)}},{key:"_defaultSelect",value:function(e){return this._submit()}},{key:"_cancelCustomDate",value:function(){return this.dateMenu.restorePreviousOption()}},{key:"_setCustomDate",value:function(e,t){return this._setCustomDateLabel(e,t),o()("#filter-date-custom-from").prop("value",e),o()("#filter-date-custom-to").prop("value",t),this._submit()}},{key:"_setCustomDateLabel",value:function(e,t){var n=this.dateMenu.getSelectedLabel();return this.dateMenu.setMenuLabelText("".concat(n,": ").concat(e,"  ").concat(t))}},{key:"_submit",value:function(){return o()("#search-results").fadeTo(250,.25),o()("#search_form").submit()}},{key:"_normaliseResultUrls",value:function(){return Object(i.each)(o()(".result h1 a"),function(e){var t=o()(e).attr("href"),n=o()(e).data("original-href");return e.href=n,o()(e).on("mousedown",function(e){return e.target.href=t})}),Object(i.each)(o()("#secondary-results a"),function(e){var t=o()(e).attr("href"),n=o()(e).data("original-href");return e.href=n,o()(e).on("mousedown",function(n){return e.href=t}),o()(e).children().on("mousedown",function(n){return e.href=t})})}}])&&C(n.prototype,r),s&&C(n,s),t}()},1525:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n(4),i=n(1),a=n.n(i),s=n(20),c=n.n(s);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var v=function(){function e(){m(this,e),this.steps=[],this.current_step_index=0,this.steps_container=a()("#form-steps"),this.build_steps(),this.attach_subscribers()}return b(e,[{key:"serialise_to_json",value:function(){for(var e={},t=0,n=Array.from(this.steps);t<n.length;t++){var r=n[t].serialise_to_json();for(var o in r){var i=r[o];e[o]=i}}return{author:e}}},{key:"build_steps",value:function(){return this.steps.push(new w(this.steps.length)),this.steps.push(new O(this.steps.length)),this.steps.push(new k(this.steps.length))}},{key:"has_previous_step",value:function(e){return e>0&&e<this.steps.length}},{key:"previous_step",value:function(e){return!!this.has_previous_step(e)&&this.steps[e-1]}},{key:"is_last_step",value:function(e){return e+1===this.steps.length}},{key:"attach_subscribers",value:function(){var e=this;return c.a.subscribe("/data-submission/from",function(t){return a.a.ajax({type:"POST",url:e.is_last_step(t)?"/become-an-author":"/become-an-author?dry_run=true",data:e.serialise_to_json(),dataType:"json",success:function(n){return e.steps[t].restore_submit_button(),n.errors&&!e.steps[t].is_valid(n.errors)?e.steps[t].show_errors(n.errors):e.is_last_step(t)?document.location=n.redirect:(e.steps[t].hide_errors(),c.a.publish("/step-change/to",[t+1]))},error:function(){return e.steps[t].restore_submit_button()}})}),c.a.subscribe("/step-change/to",function(t){if(t>=0&&t<e.steps.length)return e.current_step_index=t,a()("#form-steps").removeClass("stepped-1 stepped-2"),a()("#form-steps").addClass("stepped-".concat(e.current_step_index))})}}]),e}(),g=function(){function e(t){var n=this;m(this,e),this.index=t,this.form=a()(a()("#form-steps form")[this.index]),this.submit_button=this.form.find("input[type=submit]"),this.nav=a()(a()("#nav-steps li")[this.index]),this.form.submit(function(){return n.disable_submit_button(),c.a.publish("/data-submission/from",[n.index]),!1}),this.nav.click(function(){if(n.nav.hasClass("navigable"))return c.a.publish("/step-change/to",[n.index])}),this.attach_subscribers()}return b(e,[{key:"current_step",value:function(){return this.nav.hasClass("on")}},{key:"nav_on",value:function(){return this.nav.addClass("on")}},{key:"nav_off",value:function(){return this.nav.removeClass("on")}},{key:"nav_clickable",value:function(){return this.nav.addClass("navigable")}},{key:"nav_not_clickable",value:function(){return this.nav.removeClass("navigable")}},{key:"disable_submit_button",value:function(){return this.submit_button.val("Processing ...").attr("disabled","disabled")}},{key:"restore_submit_button",value:function(){return this.submit_button.val(this.submit_button.data("original-text")).removeAttr("disabled")}},{key:"text_field",value:function(e){return this.form.find(e).first().val()}},{key:"attach_subscribers",value:function(){var e=this;return c.a.subscribe("/step-change/to",function(t){return t===e.index?e.nav_on():e.nav_off(),e.index<t?e.nav_clickable():e.nav_not_clickable()})}},{key:"is_valid",value:function(e){for(var t=!0,n=0,r=Array.from(this.fields);n<r.length;n++){null!=e[r[n]]&&(t=!1)}return t}},{key:"show_errors",value:function(e){var t=this;return this.hide_errors(),function(){for(var n=[],r=0,o=Array.from(t.fields);r<o.length;r++){var i=o[r];if(e[i]){var s=a()("input[name='registration_form[".concat(i,"]'], select[name='registration_form[").concat(i,"]']"));s.parent().addClass("error"),s.parent().append("<p class='inline-errors'></p>");var c=s.siblings(".inline-errors");c.html(e[i]),n.push(c.show())}else n.push(void 0)}return n}()}},{key:"hide_errors",value:function(){return this.form.find("li.error").removeClass("error"),this.form.find("p.inline-errors").each(function(e,t){return a()(t).remove()})}}]),e}(),w=function(e){function t(e){var n;return m(this,t),(n=u(this,f(t).call(this,e))).autodetectRequest=null,a()("#registration_form_email").on("change keyup input",_.debounce(n.autodetectInstitution.bind(p(n)),250)),n}return d(t,g),b(t,null,[{key:"initClass",value:function(){this.prototype.fields=["email","institution_name","byline_title","full_name"]}}]),b(t,[{key:"serialise_to_json",value:function(){return{email:this.text_field("#registration_form_email"),institution_name:this.text_field("#registration_form_institution_name"),full_name:this.text_field("#registration_form_full_name"),byline_title:this.text_field("#registration_form_byline_title")}}},{key:"getEmailFieldDomain",value:function(){var e=a()("#registration_form_email").val().toLowerCase().split("@");return e[e.length-1]}},{key:"autodetectInstitution",value:function(){null!==this.autodetectRequest&&this.autodetectRequest.abort();var e=this.getEmailFieldDomain(),t=a()("#registration_form_institution_name_input"),n=a()(".institution-details");this.autodetectRequest=a.a.ajax({url:"/institutions/matching",data:{domain:e},method:"GET",success:function(e){e.query===this.getEmailFieldDomain()&&(e.results&&e.results.length>0?function(e,r){t.find(".inline-errors").hide(),t.find("input").val(e),n.html("<img src='".concat(r,"'/><p>").concat(e,"</p>"))}(e.results[0].label,e.results[0].institution.logo_url):(t.find(".inline-errors").show(),t.find("input").val(""),n.html(o.a.t("author_registration.error.couldnt_match_domain_to_institution",{email:o.a.t("common.region_support_email_address")}))))}.bind(this)})}}]),t}();w.initClass();var O=function(e){function t(){return m(this,t),u(this,f(t).apply(this,arguments))}return d(t,g),b(t,[{key:"serialise_to_json",value:function(){return{education_year:this.text_field("#registration_form_education_year"),education_award:this.text_field("#registration_form_education_award"),education_institution:this.text_field("#registration_form_education_institution"),summary:this.text_field("#registration_form_summary")}}}],[{key:"initClass",value:function(){this.prototype.fields=["education_year","education_award","education_institution"]}}]),t}();O.initClass();var k=function(e){function t(){return m(this,t),u(this,f(t).apply(this,arguments))}return d(t,g),b(t,[{key:"serialise_to_json",value:function(){return{password:this.text_field("#registration_form_password"),password_confirmation:this.text_field("#registration_form_password_confirmation"),secondary_email:this.text_field("#registration_form_secondary_email")}}}],[{key:"initClass",value:function(){this.prototype.fields=["password","password_confirmation","secondary_email"]}}]),t}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}k.initClass();t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,E(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["default"]),n=t,(o=[{key:"initialize",value:function(e){return P(E(t.prototype),"initialize",this).call(this,e),this.signup=new v}}])&&S(n.prototype,o),i&&S(n,i),t}()},1526:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n(4),i=n(0),a=n.n(i),s=n(13),c=n.n(s),l=n(16),u=n(3),f=n.n(u),p=n(34),d=n.n(p),h=n(307),m=n.n(h);function y(e){var t=e.fullWidth,n=[m.a.container,t?m.a.fullWidth:m.a.stacked];return a.a.createElement("div",{className:d()(n)},a.a.createElement(l.TextField,{label:o.a.t("newsletters.labels.email"),fullWidth:t,name:"subscribe[email]",className:m.a.input}),a.a.createElement(l.Button,{colour:"primary",variant:"contained",size:"small",type:"submit",className:m.a.button},o.a.t("newsletters.buttons.subscribe")))}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}y.defaultProps={fullWidth:!1},y.propTypes={fullWidth:f.a.bool},n.d(t,"default",function(){return k});var k=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,w(t).call(this,{events:{"click #newsletter-archive .button":"showMore"},fullWidth:e.fullWidth||!1,recaptcha:TC.Config.recaptcha}))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["default"]),n=t,(i=[{key:"initialize",value:function(e){_(w(t.prototype),"initialize",this).call(this,e),this.showMore=this.showMore.bind(this),this.renderSubscriptionForms(e),this.renderArchiveShowMoreButton()}},{key:"renderSubscriptionForms",value:function(e){var t=this.$el.find(".subscription-newsletter-wrapper");Array.from(t).forEach(function(t){c.a.render(a.a.createElement(l.ThemeProvider,{theme:Object(l.accentTheme)()},a.a.createElement(y,{fullWidth:e.fullWidth,recaptcha:e.recaptcha})),t)})}},{key:"showMore",value:function(){this.$el.find("#newsletter-archive .hidden").show(),this.$el.find("#newsletter-archive .button").hide(),this.$el.find("#newsletter-archive-show-more").hide()}},{key:"renderArchiveShowMoreButton",value:function(){var e=this.$el.find("#newsletter-archive-show-more");e.length>0&&c.a.render(a.a.createElement(l.ThemeProvider,{theme:Object(l.accentTheme)()},a.a.createElement(l.Button,{variant:"outlined",size:"small",type:"submit",onClick:this.showMore},o.a.t("newsletters.buttons.show_more"))),e[0])}}])&&v(n.prototype,i),s&&v(n,s),t}()},162:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){this.initialize(e),this.dragProperties=new o},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TIME_CHUNK=50,this.dragging=!1,this.mouseStartPosition={x:0,y:0},this.mousePosition={x:0,y:0},this.startPosition={x:0,y:0},this.targetPosition={x:0,y:0},this.interpolatedPosition={x:0,y:0},this.sliderPosition={x:0,y:0},this.containment={active:!1,xMin:0,xMax:0,yMin:0,yMax:0},this.timeAccumulator=0,this.previousFrameTime=0}var t,r,o;return t=e,(r=[{key:"setNewStartPosition",value:function(e,t){this.startPosition.x=e,this.startPosition.y=t,this.targetPosition.x=e,this.targetPosition.y=t}},{key:"setNewTargetPosition",value:function(){this.copyTargetToStart(),this.targetPosition.x=this.mousePosition.x-this.mouseStartPosition.x,this.targetPosition.y=this.mousePosition.y-this.mouseStartPosition.y}},{key:"copyTargetToStart",value:function(){this.startPosition.x=this.targetPosition.x,this.startPosition.y=this.targetPosition.y}},{key:"setContainment",value:function(e){this.containment.active=!0,this.containment.xMin=e.xMin,this.containment.xMax=e.xMax,this.containment.yMin=e.yMin,this.containment.yMax=e.yMax}},{key:"interpolate",value:function(e){this.interpolatedPosition.x=this.targetPosition.x*e+this.startPosition.x*(1-e),this.interpolatedPosition.y=this.targetPosition.y*e+this.startPosition.y*(1-e)}}])&&n(t.prototype,r),o&&n(t,o),e}();r.prototype={initialize:function(e){this.element=e.element,this.axis=e.axis,this.containment=e.containment,handleMousedown=this._handleMousedown.bind(this),handleTouchstart=this._handleTouchstart.bind(this),handleTrackMousedown=this._handleTrackMousedown.bind(this),handleTrackTouchstart=this._handleTrackTouchstart.bind(this),handleResize=this._handleResize.bind(this),this.element.addEventListener("mousedown",handleMousedown,!1),this.element.addEventListener("touchstart",handleTouchstart,!1),window.addEventListener("resize",handleResize,!1),this.containment&&"parent"==this.containment&&(this.element.parentNode.addEventListener("mousedown",handleTrackMousedown,!1),this.element.parentNode.addEventListener("touchstart",handleTrackTouchstart,!1))},setValue:function(e){this.dragProperties.sliderPosition.x=e,this.dragProperties.dragging||(translation="translate3d("+this.dragProperties.sliderPosition.x+"px, 0 , 0)",this.element.style.transform=translation,this.element.style.webkitTransform=translation)},setPercentValue:function(e){(this.element.parentNode.offsetWidth||this.element.parentNode.offsetHeight)&&(offsetLeft=e*this.element.parentNode.offsetWidth/100,this.setValue(offsetLeft))},_beginDrag:function(e){this.handleMousemove=this._handleMousemove.bind(this),this.handleTouchmove=this._handleTouchmove.bind(this),this.handleMouseup=this._handleMouseup.bind(this),document.addEventListener("mousemove",this.handleMousemove,!1),document.addEventListener("touchmove",this.handleTouchmove,!1),document.addEventListener("mouseup",this.handleMouseup,!1),document.addEventListener("touchend",this.handleMouseup,!1),this.dragProperties.dragging=!0,this.dragProperties.setNewStartPosition(this.dragProperties.sliderPosition.x,this.dragProperties.sliderPosition.y),this.containment&&"parent"==this.containment&&this.dragProperties.setContainment({xMin:0,xMax:e.parentNode.offsetWidth,yMin:0,yMax:e.parentNode.offsetHeight});var t=new CustomEvent("dragstart",{});this.element.dispatchEvent(t),requestAnimationFrame(this._renderCallback.bind(this))},_renderCallback:function(e){var t=e-this.dragProperties.previousFrameTime;for(this.dragProperties.timeAccumulator+=t;this.dragProperties.timeAccumulator>=this.dragProperties.TIME_CHUNK;)this.dragProperties.setNewTargetPosition(),this.dragProperties.timeAccumulator-=this.dragProperties.TIME_CHUNK;var n=this.dragProperties.timeAccumulator/this.dragProperties.TIME_CHUNK;this.dragProperties.interpolate(n),this.dragProperties.sliderPosition.x=this.dragProperties.interpolatedPosition.x,this.dragProperties.containment.active&&(this.dragProperties.sliderPosition.x=Math.max(this.dragProperties.containment.xMin,Math.min(this.dragProperties.containment.xMax,this.dragProperties.sliderPosition.x)));var r=new CustomEvent("drag",{detail:{position:this.dragProperties.sliderPosition}});if(this.element.dispatchEvent(r),translation="translate3d("+this.dragProperties.sliderPosition.x+"px, 0 , 0)",this.element.style.transform=translation,this.element.style.webkitTransform=translation,this.dragProperties.dragging)requestAnimationFrame(this._renderCallback.bind(this));else{var o=new CustomEvent("dragfinish",{});this.element.dispatchEvent(o)}this.dragProperties.previousFrameTime=e},_finishDrag:function(e){this.dragProperties.dragging=!1},_handleMousemove:function(e){e.preventDefault(),this.dragProperties.mousePosition.x=e.pageX,this.dragProperties.mousePosition.y=e.pageY},_handleTouchmove:function(e){e.preventDefault(),this.dragProperties.mousePosition.x=e.touches[0].pageX,this.dragProperties.mousePosition.y=e.touches[0].pageY},_handleMousedown:function(e){e.preventDefault(),e.stopPropagation(),this.dragProperties.mouseStartPosition.x=e.pageX-this.dragProperties.sliderPosition.x,this.dragProperties.mouseStartPosition.y=e.pageY-this.dragProperties.sliderPosition.y,this.dragProperties.mousePosition.x=e.pageX,this.dragProperties.mousePosition.y=e.pageY,this._beginDrag(this.element)},_handleTouchstart:function(e){e.preventDefault(),e.stopPropagation(),this.dragProperties.mouseStartPosition.x=e.touches[0].pageX-this.dragProperties.sliderPosition.x,this.dragProperties.mouseStartPosition.y=e.touches[0].pageY-this.dragProperties.sliderPosition.y,this.dragProperties.mousePosition.x=e.touches[0].pageX,this.dragProperties.mousePosition.y=e.touches[0].pageY,this._beginDrag(this.element)},_handleTrackMousedown:function(e){this._snapToX(e.pageX),this._handleMousedown(e)},_handleTrackTouchstart:function(e){this._snapToX(e.touches[0].pageX),this._handleTouchstart(e)},_handleMouseup:function(e){e.preventDefault(),document.removeEventListener("mousemove",this.handleMousemove),document.removeEventListener("touchmove",this.handleTouchmove),document.removeEventListener("mousemove",this.handleMouseup),document.removeEventListener("touchend",this.handleMouseup),this._finishDrag(this.element)},_handleResize:function(e){var t=this.dragProperties.containment.xMax,n=this.dragProperties.containment.yMax,r=this.dragProperties.sliderPosition.x/t*this.element.parentNode.offsetWidth,o=this.dragProperties.sliderPosition.y/n*this.element.parentNode.offsetHeight;this.dragProperties.containment.xMax=this.element.parentNode.offsetWidth,this.dragProperties.containment.yMax=this.element.parentNode.offsetHeight,this.dragProperties.targetPosition.x=r,this.dragProperties.targetPosition.y=o,this.dragProperties.sliderPosition.x=r,this.dragProperties.sliderPosition.y=o;var i="translate3d("+this.dragProperties.sliderPosition.x+"px, 0 , 0)";this.element.style.transform=i,this.element.style.webkitTransform=i},_snapToX:function(e){var t=this.element.parentNode.getBoundingClientRect(),n=t.left,r=this.element.parentNode.offsetWidth+t.left;e=Math.max(n,Math.min(r,e))-t.left;this.dragProperties.sliderPosition.x=e}},e.exports=r},163:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(78),o=n.n(r),i="tc_session_active";function a(){return"true"===o.a.get(i)}},164:function(e,t,n){"use strict";var r=n(3),o=n.n(r),i=n(0),a=n.n(i),s=n(231),c=n.n(s),l=function(e){var t=e.enabled,n=e.title;return t?a.a.createElement("span",{className:c.a.loader,title:n}):null};l.defaultProps={enabled:!0,title:"Loading"},l.propTypes={enabled:o.a.bool,title:o.a.string},t.a=l},167:function(e,t,n){"use strict";var r,o=n(5),i=n(22);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,l(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,i.a),n=t,a=[{key:"initClass",value:function(){this.GREEN="green",this.ORANGE="orange",this.RED="red",this.GREY="grey",this.prototype.className="button indicator",this.prototype.colors=[this.GREEN,this.ORANGE,this.RED,this.GREY]}}],(r=[{key:"setColor",value:function(e){if(this.$el.removeClass(this.colors.join(" ")),null!=e){if(!Object(o.includes)(this.colors,e))throw new Error("unknown color '".concat(e,"'"));return this.$el.addClass(e)}}}])&&s(n.prototype,r),a&&s(n,a),t}()).initClass(),r=r)},207:function(e,t,n){"use strict";t.a={scrollYPosition:function(){return window.pageYOffset||document.documentElement.scrollTop},slugParser:function(e){var t;return(t=e.match(/theconversation.com\/.*-(\d+)$/))?t[1]:null}}},208:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(5),a=n(6);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["View"]),n=t,(r=[{key:"initialize",value:function(e){return this._listenToOutsideClick=this._listenToOutsideClick.bind(this),u(f(t.prototype),"initialize",this).call(this,e)}},{key:"show",value:function(){return this.$el.show()}},{key:"hide",value:function(){return this.$el.hide()}},{key:"toggle",value:function(){return this.$el.is(":visible")?this.hide():(this.show(),this._listenToOutsideClick())}},{key:"_listenToOutsideClick",value:function(){var e=this;return Object(i.defer)(function(){var t=e.$el[0].className.split(" ")[0];return o()("body").one("click.tooltip focusin.tooltip",function(n){return o()(n.target).hasClass(t)||o()(n.target).parents(".".concat(t)).length>0?e._listenToOutsideClick():(o()("body").off("click.tooltip focusin.tooltip"),e.hide())})})}}])&&c(n.prototype,r),s&&c(n,s),t}()},212:function(e,t,n){"use strict";var r,o,i=n(1),a=n.n(i),s=n(6);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,s.View),n=t,i=[{key:"initClass",value:function(){o=function(e){return e<1e3?e:"".concat(Math.round(e/100)/10,"k")}}}],(r=[{key:"initialize",value:function(e){var t=a()(e.el)[0];if(e.count&&0!==e.count){var n=a()('<span class="data-count" />').text(o(e.count));a()(t).append(n)}}}])&&l(n.prototype,r),i&&l(n,i),t}()).initClass(),r=r)},214:function(e,t,n){var r=n(1192);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},22:function(e,t,n){"use strict";var r,o=n(59);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.a),n=t,i=[{key:"initClass",value:function(){this.prototype.className="button",this.prototype.tagName="a"}}],(r=[{key:"initialize",value:function(e){null==e&&(e={});var n=e;return this.action=n.action,this.label=n.label,this.title=n.title,this.icon=n.icon,null==this.title&&this.label&&(this.title=this.label),this.render(),c(l(t.prototype),"initialize",this).call(this,e)}},{key:"render",value:function(){if(this.$el.attr("href","#"),null!=this.action&&this.$el.attr("data-action",this.action),null!=this.label&&this.$el.html(this.label),null!=this.title&&this.$el.attr("title",this.title),null!=this.icon)return this.$el.prepend('<i class="'.concat(this.icon,'"></i> '))}},{key:"setTitle",value:function(e){return this.title=e,this.label=e,this.render()}}])&&a(n.prototype,r),i&&a(n,i),t}()).initClass(),r=r)},228:function(e,t,n){"use strict";n.r(t);var r,o=n(10),i=n.n(o);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}t.default=((r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setDatePickerLocale(t),i.a.locale(t,this.locales[t])}return s(e,null,[{key:"initClass",value:function(){this.prototype.formats={tc_date:"MMMM D, YYYY",tc_short_month_date:"MMM D, YYYY",tc_date_with_time:"MMMM D, YYYY h.mma",tc_time:"h.mma"},this.prototype.locales={"fr-FR":{months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthsShort:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],weekdays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],weekdaysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],weekdaysMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"une anne",yy:"%d annes"},ordinalParse:/\d{1,2}(er|me)/,ordinal:function(e){var t;return e+(null!=(t=1===e)?t:{er:"me"})},meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},rangeSelectorFrom:"Du",rangeSelectorTo:"au"},"id-ID":{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],weekdays:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],weekdaysShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],weekdaysMin:["Mg","Sn","Sl","Rb","Km","Jm","Sb"],longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0)," pagi"===t?e:" siang"===t?e>=11?e:e+12:" sore"===t||" malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?" pagi":e<15?" siang":e<19?" sore":" malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},rangeSelectorFrom:"Dari",rangeSelectorTo:"untuk"},"es-ES":{months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthsShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],weekdays:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],weekdaysShort:["dom","lun","mar","mi","jue","vie","sb."],weekdaysMin:["do","lu","ma","mi","ju","vi","s"],calendar:{sameDay:"[hoy a la] LT",nextDay:"[maana a la] LT",nextWeek:"dddd [a la] LT",lastDay:"[ayer a la] LT",lastWeek:"[el] dddd [pasado a la] LT",sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/AM|PM/,meridiem:function(e,t,n){return e<12?" AM":" PM"},week:{dow:1,doy:4}}}}}]),s(e,[{key:"formatted",value:function(e,t){return null==t&&(t="tc_date_with_time"),i()(e).format(this.formats[t])}},{key:"setDatePickerLocale",value:function(e){if(("fr-FR"===e||"id-ID"===e||"es-ES"===e)&&"undefined"!=typeof Highcharts)return Highcharts.setOptions({lang:{months:this.locales[e].months,shortMonths:this.locales[e].monthsShort,weekdays:this.locales[e].weekdays,rangeSelectorFrom:this.locales[e].rangeSelectorFrom,rangeSelectorTo:this.locales[e].rangeSelectorTo}})}}]),e}()).initClass(),r=r)},23:function(e,t,n){"use strict";var r,o=n(1),i=n.n(o),a=n(5),s=n(59);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,s.a),n=t,o=[{key:"initClass",value:function(){this.prototype.className="lightbox",this.prototype.tagName="section",this.prototype.leaveWhenEscapePressed=!0,this.prototype.leaveWhenMaskClicked=!0,this.prototype.escapeKeyCode=27}}],(r=[{key:"initialize",value:function(e){return this._click=this._click.bind(this),this._keydown=this._keydown.bind(this),null==e&&(e={}),this.bindings=[],this._bindTo(i()(document),"keydown",this._keydown),this.build(),f(p(t.prototype),"initialize",this).call(this,e)}},{key:"build",value:function(){return this.$innerEl=i()('<div class="lightbox-inner"></div>').appendTo(this.el),this.innerEl=this.$innerEl.get(0),i()("body").addClass("lightbox-open")}},{key:"close",value:function(){return this._unbindFromAll(),this.off(),this.remove(),i()("body").removeClass("lightbox-open")}},{key:"_click",value:function(e){var n=i()(e.target),r=n.attr("href");return r&&"#"===r&&e.preventDefault(),this.leaveWhenMaskClicked&&n.is(".lightbox")&&this.isVisible()?this._leave():f(p(t.prototype),"_click",this).call(this,e)}},{key:"_keydown",value:function(e){if(this.leaveWhenEscapePressed&&e.keyCode===this.escapeKeyCode&&this.isVisible())return e.preventDefault(),this._leave()}},{key:"_leave",value:function(e){return this.trigger("leave",this),e&&e.preventDefault(),this.close()}},{key:"_bindTo",value:function(e,t,n){return e.bind(t,n),this.bindings.push({source:e,event:t,callback:n})}},{key:"_unbindFromAll",value:function(){return Object(a.each)(this.bindings,function(e){return e.source.unbind(e.event,e.callback)}),this.bindings=[]}}])&&l(n.prototype,r),o&&l(n,o),t}()).initClass(),r=r)},231:function(e,t,n){var r=n(397);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},232:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(848),o=n.n(r),i=n(849);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=5,c=1e3;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}({retries:s,retryDelay:c},t);return o()(i.a)(e,n)}},233:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(787);function o(e){setTimeout(function(){window.location=e},0)}var i=new(n.n(r).a)},305:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(460),o="csrf-param",i="csrf-token";function a(){var e=function(e,t){var n=document.querySelector("meta[name=".concat(e,"]"));if(null===n){var r=document.querySelector("head"),o=document.createElement("meta");o.setAttribute("name",e),o.setAttribute("content",t),r.prepend(o)}else n.setAttribute("content",t)};return r.a.CSRF.then(function(t){var n=t.param,r=t.token;e(o,n),e(i,r)})}},306:function(e,t,n){var r=n(1116);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},307:function(e,t,n){var r=n(1182);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},308:function(e,t,n){var r=n(1185);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},31:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];ga("send","event",e,t,n,r,{nonInteraction:o,transport:"beacon"})}n.d(t,"a",function(){return r})},327:function(e,t,n){var r={"./en-au":220,"./en-au.js":220,"./en-ca":221,"./en-ca.js":221,"./en-gb":222,"./en-gb.js":222,"./en-ie":223,"./en-ie.js":223,"./en-il":224,"./en-il.js":224,"./en-nz":225,"./en-nz.js":225};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=327},395:function(e,t,n){e.exports=n.p+"columnists/bg-5cc9c82ee486e4b58594de644c311eea.png"},397:function(e,t,n){(t=e.exports=n(39)(!1)).push([e.i,"@-webkit-keyframes spin-3ZV1o {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes spin-3ZV1o {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.loader-Tjd3L {\n  -webkit-animation: spin-3ZV1o 0.8s infinite linear;\n  animation: spin-3ZV1o 0.8s infinite linear;\n  display: block;\n  width: 12px;\n  height: 12px;\n  margin: 0 auto;\n  border: 3px solid #d9f3fc;\n  border-top: 3px solid #33bef2;\n  -webkit-border-radius: 50%;\n  border-radius: 50%;\n  -webkit-transform-origin: 50% 50%;\n  -ms-transform-origin: 50% 50%;\n  transform-origin: 50% 50%;\n  -webkit-transition: opacity 500ms;\n  -o-transition: opacity 500ms;\n  transition: opacity 500ms;\n}",""]),t.locals={loader:"loader-Tjd3L",spin:"spin-3ZV1o"}},4:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(147),o=n.n(r),i=n(76),a=n(148),s=n.n(a),c=n(55),l=n(149),u=n.n(l);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"init",value:function(e,t,n,r){var a,l,f;i.a.use(o.a).init({backend:{backends:[s.a,u.a],backendOptions:[{versions:(a={},l=t,f=e,l in a?Object.defineProperty(a,l,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[l]=f,a)},{crossDomain:n,loadPath:e}]},lng:t},function(e){e&&e.length&&Object(c.a)("/no_js_locale?message=".concat(e[0]));try{r()}catch(e){throw Object(c.a)("/js_init_failure?message=".concat(e)),e}})}},{key:"t",value:function(){return i.a.t.apply(i.a,arguments)||(arguments.length<=0?void 0:arguments[0])}}],(n=null)&&f(t.prototype,n),r&&f(t,r),e}()},411:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(412),a=n.n(i),s=n(51);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showImagebox=this.showImagebox.bind(this),o()(t).append('<div class="enlarge_hint"></div>').click(function(e){return e.preventDefault(),n.showImagebox(o()(e.currentTarget)[0].href)})}var t,n,r;return t=e,(n=[{key:"loadImage",value:function(e,t){var n=o()(new Image);return n.attr("src",e),a()(n,function(){return n.appendTo("body").hide().data("dimensions",{x:n.width(),y:n.height()}),t(n)})}},{key:"showImagebox",value:function(e){var t=this;return o()("div.imagebox").remove(),o()("<div />").addClass("imagebox").appendTo("body").click(function(){return o()(this).remove()}),new s.a({centered:!0,size:"50px"}).$el.appendTo(o()("body div.imagebox")),this.loadImage(e,function(e){return o()("div.imagebox").html(e.addClass("appearing").show()).click(function(){return o()(window).unbind("resize",this.positionImagebox)}),setTimeout(function(){return o()("div.imagebox img").removeClass("appearing")},10),t.positionImagebox(),o()(window).resize(t.positionImagebox)})}},{key:"positionImagebox",value:function(){var e=o()("div.imagebox img"),t=e.data("dimensions"),n={x:o()(window).width()-18-18,y:o()(window).height()-18-18},r=t.x/t.y,i=n.x/n.y,a=r>=i?n.x:n.x*r/i;return a>t.x&&(a=t.x),e.css({width:"".concat(a,"px"),left:"".concat(Math.max(18,18+(n.x-a)/2),"px"),top:"".concat(Math.max(18,18+(n.y-a/r)/2),"px")})}}])&&c(t.prototype,n),r&&c(t,r),e}()},413:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(13),a=n.n(i),s=n(414),c=n(415),l=function(e,t,n){Array.from(e.querySelectorAll("[data-react-class=".concat(n,"]"))).forEach(function(e){var n=JSON.parse(e.dataset.reactProps),r=o.a.createElement(t,n);a.a.render(r,e)})};t.a=function(e){l(e,s.Tweet,"Tweet"),l(e,c.a,"InstagramEmbed")}},422:function(e,t,n){"use strict";var r=n(3),o=n.n(r),i=n(0),a=n.n(i),s=o.a.shape({src:o.a.string.isRequired,caption:o.a.string,source:o.a.string}),c=o.a.shape({title:o.a.string.isRequired,url:o.a.string.isRequired,image:s}),l=n(34),u=n.n(l),f=n(127),p=n.n(f),d="data:image/gif;base64,R0lGODdhDwAKAIAAAOgRMAAAACH5BAEAAAEALAAAAAAPAAoAAAIKjI+py+0Po5xUFgA7";function h(){return a.a.createElement("figure",{className:p.a["empty-figure"]},a.a.createElement("img",{src:d,alt:"Empty"}))}var m=n(417),y=n.n(m);var b={w:324,h:214,fit:"crop",auto:"format",q:45};function v(e){var t=e.src,n=new y.a({domain:window.TC.Config.image_cdn_domain}).buildURL(t,b);return a.a.createElement("img",{src:n,alt:""})}v.propTypes={src:o.a.string.isRequired};var g=n(194),_=n.n(g),w=100;function O(e){var t=e.articleUrl,n=e.image.src;return a.a.createElement("figure",null,a.a.createElement("a",{href:t},a.a.createElement(_.a,{once:!0,offset:w},a.a.createElement(v,{src:n}))))}function k(e){var t=e.article,n=e.last,r=u()(p.a.article,"related-article","grid-four",{"grid-last":n}),o=t.image,i=t.title,s=t.url,c={__html:i};return a.a.createElement("div",{className:r},a.a.createElement("article",null,o?a.a.createElement(O,{articleUrl:s,image:o}):a.a.createElement(h,null),a.a.createElement("header",null,a.a.createElement("h2",null,a.a.createElement("a",{href:s},a.a.createElement("span",{dangerouslySetInnerHTML:c}))))))}O.propTypes={articleUrl:o.a.string.isRequired,image:s.isRequired},k.propTypes={article:c.isRequired,last:o.a.bool.isRequired};var C=n(4),S=n(164),j=3;function P(e){var t=e.articles,n=e.error,r=e.loading,o=t.map(function(e,t){return a.a.createElement(k,{key:e.url,article:e,last:t===j})});return n?a.a.createElement(a.a.Fragment,null):a.a.createElement("div",{className:"grid-sixteen"},a.a.createElement("h3",{className:"border slammed"},C.a.t("content.heading.related_articles")),a.a.createElement("div",{className:p.a.articles},r?a.a.createElement(S.a,null):o))}P.propTypes={articles:o.a.arrayOf(c).isRequired,error:o.a.bool.isRequired,loading:o.a.bool.isRequired};var E=n(1);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return M});var x="/content/:id/related_articles.json",R="/drafts/:id/related_articles.json";function M(e){var t=e.articleId,n=e.draft,r=T(Object(i.useState)([]),2),o=r[0],s=r[1],c=T(Object(i.useState)(!0),2),l=c[0],u=c[1],f=T(Object(i.useState)(!1),2),p=f[0],d=f[1],h=n?R:x;return Object(i.useEffect)(function(){Object(E.ajax)({url:h.replace(":id",t),success:function(e){return s(e)},error:function(){return d(!0)},complete:function(){return u(!1)}})},[t]),a.a.createElement(P,{articles:o,error:p,loading:l})}M.defaultProps={draft:!1},M.propTypes={articleId:o.a.string.isRequired,draft:o.a.bool}},423:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(5);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.receiveHeight=this.receiveHeight.bind(this),this.id=t,window.addEventListener("message",this.receiveHeight)}var t,n,r;return t=e,(n=[{key:"receiveHeight",value:function(e){if("https://datawrapper.dwcdn.net"===(e.origin||e.originalEvent.origin)){var t=e.data["datawrapper-height"];if(null!=t)return this.setHeight(t[this.id])}}},{key:"setHeight",value:function(e){return o()("#".concat(this.id)).height(e)}}])&&a(t.prototype,n),r&&a(t,r),e}(),c=n(207),l=n(206),u=n.n(l);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scrollToChildPosMessage=this.scrollToChildPosMessage.bind(this),null==r&&(r={});var i=o()("#".concat(t));this.responsiveId="responsive-".concat(t),this.url=n,this.offset=parseInt(r.offset||0),this.height=parseInt(r.height||400),i.hide(),i.before("<div id='".concat(this.responsiveId,"'></div>"));var a=new u.a.Parent(this.responsiveId,n,{});a.iframe.setAttribute("height","".concat(this.height,"px")),a.onMessage("saveScrollPosition",this.saveScrollPosition),a.onMessage("revertScrollPosition",this.revertScrollPosition),a.onMessage("scrollToChildPos",this.scrollToChildPosMessage)}var t,n,r;return t=e,(n=[{key:"scrollToChildPosMessage",value:function(e){var t=document.getElementById(this.responsiveId).getBoundingClientRect().top+window.pageYOffset-this.offset+parseInt(e);return window.scrollTo(0,t)}},{key:"saveScrollPosition",value:function(){return this.lastScrollPosition=c.a.scrollYPosition()}},{key:"revertScrollPosition",value:function(){return window.scrollTo(0,this.lastScrollPosition)}}])&&f(t.prototype,n),r&&f(t,r),e}();t.a={init:function(e,t){var n=this;null==t&&(t={}),this.offset=t.offset||0;var r=e.find("iframe.tc-infographic");Object(i.each)(r,function(e,t){var r=o()(e).attr("id"),i=o()(e).attr("src"),a=o()(e).attr("height");return new p(r,i,{offset:n.offset,height:a})});var a=e.find("iframe.tc-infographic-datawrapper");return Object(i.each)(a,function(e,t){var n=o()(e).attr("id");return new s(n)})}}},424:function(e,t,n){"use strict";var r,o=n(4),i=n(10),a=n.n(i),s=n(5),c=n(6),l=n(1),u=n.n(l);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y,b=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,h(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,c.View),n=t,i=[{key:"initClass",value:function(){this.prototype.className="calendar",this.prototype.events={"click .previous-month":"_decrementCalendarMonth","click .next-month":"_incrementCalendarMonth","click .day a":"daySelect","change select[name='month']":"_setCalendarMonth","change select[name='year']":"_setCalendarYear"},this.prototype.startOfTime="2011-03-25",this.prototype.template=Object(s.template)('<div class="calendar-view-header">\n  <span><%- message %></span>\n</div>\n<div class="months">\n  <a href="#" class="previous-month"><i class="icon-caret-left"></i></a>\n  <p class="selected-date">\n    <span class="month">\n      <select name="month"></select>\n    </span>\n    <span class="year">\n      <select name="year"></select>\n    </span>\n  </p>\n  <a href="#" class="next-month"><i class="icon-caret-right"></i></a>\n</div>'),this.prototype.monthData=Object(s.template)('<ol class="days">\n  <li><%= i18n.t(\'calendar.label.day_abbreviation.sunday\') %></li>\n  <li><%= i18n.t(\'calendar.label.day_abbreviation.monday\') %></li>\n  <li><%= i18n.t(\'calendar.label.day_abbreviation.tuesday\') %></li>\n  <li><%= i18n.t(\'calendar.label.day_abbreviation.wednesday\') %></li>\n  <li><%= i18n.t(\'calendar.label.day_abbreviation.thursday\') %></li>\n  <li><%= i18n.t(\'calendar.label.day_abbreviation.friday\') %></li>\n  <li><%= i18n.t(\'calendar.label.day_abbreviation.saturday\') %></li>\n</ol>\n<% _.each(weeks, function(week, index) {%>\n  <ol class="week">\n    <% _.each(week, function(day, index) {%>\n      <% if (day && day !== "") { %>\n        <%\n          dayClass = "day ";\n          if (day.isAfter(startDate) && day.isBefore(endDate)) {\n            dayClass += " within-range";\n          }\n\n          if (day.isBefore(rangeStart) || day.isAfter(rangeEnd)) {\n            dayClass += " out-of-range";\n          }\n        %>\n\n        <li class="<%- dayClass %>">\n          <span><a href="#" data-date="<%- day.format("YYYY-MM-DD") %>">\n             <%- day.format("D") %></span>\n          </a>\n        </li>\n\n      <% } else { %>\n        <li class="empty">\n          &nbsp;\n        </li>\n        <% } %>\n      </li>\n    <% }); %>\n  </ol>\n<% }); %>',{imports:{i18n:o.a}})}}],(r=[{key:"initialize",value:function(e){return this.render=this.render.bind(this),this.daySelect=this.daySelect.bind(this),this._setMonthSelectOptions=this._setMonthSelectOptions.bind(this),this._fillYearSelect=this._fillYearSelect.bind(this),this.startDate=e.startDate,this.calendarMoment=a()(e.displayDate),this.endDate=e.endDate,this.rangeStart=e.rangeStart,this.rangeEnd=e.rangeEnd,this.allowableDateRange={start:a()(this.rangeStart),end:a()(this.rangeEnd)},this.message=e.message,this.render()}},{key:"render",value:function(){return this.$el.html(this.template({month:this.calendarMoment.format("MMMM, YYYY"),message:this.message})),this.monthsEl=this.$el.find(".months"),this.monthDataEl=u()("<div class='month-data'></div>"),this.$el.append(this.monthDataEl),this.renderMonthSelector(),this.renderMonthData(),this.monthSelectEl=this.$el.find("select[name='month']"),this.yearSelectEl=this.$el.find("select[name='year']"),this._refreshCalendarInterface(this.allowableDateRange)}},{key:"renderMonthSelector",value:function(){return this.previousMonth=this.monthsEl.find(".previous-month"),this.nextMonth=this.monthsEl.find(".next-month"),this.calendarMoment.format("YYYY-MM")===a()(this.startOfTime).format("YYYY-MM")?this.previousMonth.addClass("current"):this.previousMonth.removeClass("current"),this.calendarMoment.format("YYYY-MM")===a()(this.rangeStart).format("YYYY-MM")?this.previousMonth.addClass("current"):this.previousMonth.removeClass("current"),this.calendarMoment.format("YYYY-MM")===a()(this.rangeEnd).format("YYYY-MM")?this.nextMonth.addClass("current"):this.nextMonth.removeClass("current")}},{key:"renderMonthData",value:function(){return this.monthDataEl.html(this.monthData({weeks:this._weekDataForCalendarMonth(this.calendarMoment,this.rangeStart,this.rangeEnd),rangeStart:this.rangeStart,rangeEnd:this.rangeEnd,startDate:this.startDate,endDate:this.endDate}))}},{key:"_setCalendarMonth",value:function(e){return e.preventDefault(),this.calendarMoment.month(parseInt(u()(e.target).val())),this.transitionMonth()}},{key:"_setCalendarYear",value:function(e){return e.preventDefault(),this.calendarMoment.year(u()(e.target).val()),this.transitionMonth()}},{key:"_decrementCalendarMonth",value:function(e){return e.preventDefault(),this.calendarMoment.subtract(1,"months"),this.transitionMonth()}},{key:"_incrementCalendarMonth",value:function(e){return e.preventDefault(),this.calendarMoment.add("months",1),this.transitionMonth()}},{key:"_refreshCalendarInterface",value:function(){return this._fillYearSelect(this.allowableDateRange),this._setMonthSelectOptions(this.calendarMoment,this.allowableDateRange),this.monthSelectEl.val("".concat(this.calendarMoment.month())),this.yearSelectEl.val("".concat(this.calendarMoment.year()))}},{key:"_constrainCalendarMomentToAllowableRange",value:function(){return this.calendarMoment=a.a.max(this.allowableDateRange.start,this.calendarMoment).clone(),this.calendarMoment=a.a.min(this.allowableDateRange.end,this.calendarMoment).clone()}},{key:"transitionMonth",value:function(){return this._constrainCalendarMomentToAllowableRange(),this._refreshCalendarInterface(),this.monthDataEl.remove(),this.renderMonthSelector(),this.monthDataEl=u()("<div class='month-data'></div>"),this.$el.append(this.monthDataEl),this.renderMonthData()}},{key:"_weekDataForCalendarMonth",value:function(e,t,n){var r=[],o=a()(e).startOf("month"),i=a()(e).endOf("month"),s=a()(e).startOf("month");for(r.push(this._paddedDaysOfWeek(s,i,o));s.isBefore(i);)s.add("weeks",1),r.push(this._paddedDaysOfWeek(s,i,o));return r}},{key:"_paddedDaysOfWeek",value:function(e,t,n){var r=[],o=e.clone();for(o.subtract(o.day(),"days");r.length<7;)o.isBefore(n)||o.isAfter(t)?r.push(""):r.push(o.clone()),o.add("days",1);return r}},{key:"updateRangeStartDate",value:function(e){return this.rangeStart=e,this.allowableDateRange={start:a()(this.rangeStart),end:a()(this.rangeEnd)},a()(e).isAfter(this.calendarMoment)&&(this.calendarMoment=a()(e)),Object(s.delay)(this.render,250)}},{key:"updateStartDate",value:function(e){return this.startDate=e}},{key:"updateEndDate",value:function(e){return this.endDate=e}},{key:"daySelect",value:function(e){if(e.preventDefault(),!u()(e.currentTarget).closest(".out-of-range").length){this.$(".selected").removeClass("selected-day");var t=u()(e.currentTarget);t.closest("li").addClass("selected-day");var n=t.data("date");return this.trigger("update_date",n)}}},{key:"_setMonthSelectOptions",value:function(e,t){var n,r;n=a()(e).year()===t.start.year()?t.start.month():0,r=a()(e).year()===t.end.year()?t.end.month():11;for(var o="";n<=r;){var i=a()().month(n);o+='<option value="'.concat(i.month(),'">').concat(i.format("MMMM"),"</option>"),n++}return this.monthSelectEl.html(o)}},{key:"_fillYearSelect",value:function(e){for(var t=e.start.year(),n=e.end.year(),r="";t<=n;)r+='<option value="'.concat(t,'">').concat(t,"</option>"),t++;return this.yearSelectEl.html(r)}}])&&p(n.prototype,r),i&&p(n,i),t}()).initClass(),r=r);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C,S=((y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,O(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,c.View),n=t,i=[{key:"initClass",value:function(){this.prototype.className="custom-date-range-confirmation-view",this.prototype.events={"click .cancel":"_handleCancel","click .done":"_handleDone"},this.prototype.template=Object(s.template)('<div class="calendar-view-header">\n  <a href="#" class="cancel"><%= i18n.t(\'calendar.button.cancel\') %></a>\n  <a href="#" class="done"><%= i18n.t(\'calendar.button.done\') %></a>\n</div>\n<div class="selected-dates">\n  <h2><%= i18n.t(\'calendar.label.ranges.starting_from\') %></h2>\n  <div class="start-date"><%- startDate %></div>\n\n  <h2><%= i18n.t(\'calendar.label.ranges.ending_at\') %></h2>\n  <div class="end-date"><%- endDate %></div>\n</div>',{imports:{i18n:o.a}})}}],(r=[{key:"initialize",value:function(e){return w(O(t.prototype),"initialize",this).call(this,e),this.startDate=e.startDate,this.endDate=e.endDate,this.render(),this.startDateEl=this.$el.find(".start-date"),this.endDateEl=this.$el.find(".end-date")}},{key:"render",value:function(){return this.$el.html(this.template({startDate:this.startDate,endDate:this.endDate}))}},{key:"setStartDate",value:function(e){return this.startDateEl.html(a()(e).format("MMMM Do YYYY"))}},{key:"setEndDate",value:function(e){return this.endDateEl.html(a()(e).format("MMMM Do YYYY"))}},{key:"_handleDone",value:function(e){return e.preventDefault(),this.trigger("done")}},{key:"_handleCancel",value:function(e){return e.preventDefault(),this.trigger("cancel")}}])&&g(n.prototype,r),i&&g(n,i),t}()).initClass(),y=y);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=((C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,T(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,c.View),n=t,i=[{key:"initClass",value:function(){this.prototype.className="calendars",this.prototype.events={"click .range":"makeSelection","click .start-date-selected":"openStartDateCalendar","click .end-date-selected":"openEndDateCalendar"},this.prototype.startOfTime="2011-03-25",this.prototype.template=Object(s.template)('<div class="calendar-container"></div>')}}],(r=[{key:"initialize",value:function(e){return this.startDate=e.startDate,this.endDate=e.endDate,this.render()}},{key:"render",value:function(){var e=this;return this.$el.html(this.template),this.calendarsEl=this.$el.find(".calendar-container"),this.startDateEl=this.$el.find(".start-date"),this.startCalendar=new b({startDate:a()(this.startDate).format("YYYY-MM-DD"),displayDate:a()(this.startDate),endDate:a()(this.endDate).format("YYYY-MM-DD"),rangeStart:this.startOfTime,rangeEnd:a()(),message:o.a.t("calendar.label.select_start_date")}),this.startCalendar.$el.appendTo(this.calendarsEl),this.startCalendar.bind("update_date",function(t){return Object(s.delay)(function(){return e.displayEndDateCalendar()},500),e.startCalendar.updateStartDate(t),e.endCalendar.updateRangeStartDate(t),e.endCalendar.updateStartDate(t),e.confirmationView.setStartDate(t),e.setStartDate(t)}),this.endDateEl=this.$el.find(".end-date"),this.endCalendar=new b({startDate:a()(this.startDate).format("YYYY-MM-DD"),displayDate:this.endDate,endDate:a()(this.endDate).format("YYYY-MM-DD"),rangeStart:a()(this.startDate),rangeEnd:a()(),message:o.a.t("calendar.label.select_end_date")}),this.endCalendar.$el.appendTo(this.calendarsEl),this.endCalendar.bind("update_date",function(t){return Object(s.delay)(function(){return e.displayConfirmationView()},500),e.endCalendar.updateEndDate(t),e.confirmationView.setEndDate(t),e.setEndDate(t)}),this.confirmationView=new S({startDate:a()(this.startDate).format("MMMM Do YYYY"),endDate:a()(this.endDate).format("MMMM Do YYYY")}),this.confirmationView.$el.appendTo(this.calendarsEl),this.confirmationView.on("done",function(){var t=a()(e.startDate).format("YYYY-MM-DD"),n=a()(e.endDate).format("YYYY-MM-DD");return e.trigger("update_date_range",t,n)}),this.confirmationView.on("cancel",function(){return e.trigger("cancel_date_pick")})}},{key:"setStartDate",value:function(e){if(e!==this.startDate)return this.dirty=!0,this.startDate=e}},{key:"setEndDate",value:function(e){if(e!==this.endDate)return this.dirty=!0,this.endDate=e}},{key:"openStartDateCalendar",value:function(e){return e.preventDefault(),this.displayStartDateCalendar()}},{key:"displayStartDateCalendar",value:function(){return this.$el.addClass("open-start").removeClass("step-2").removeClass("step-3")}},{key:"openEndDateCalendar",value:function(e){return e.preventDefault(),this.displayEndDateCalendar()}},{key:"displayEndDateCalendar",value:function(){return this.$el.removeClass("open-start").addClass("step-2").removeClass("step-3")}},{key:"displayConfirmationView",value:function(){return this.$el.removeClass("open-start").removeClass("step-2").addClass("step-3")}},{key:"makeSelection",value:function(e){e.preventDefault();var t=a()(this.startDate).format("YYYY-MM-DD"),n=a()(this.endDate).format("YYYY-MM-DD");return this.trigger("update_date_range",t,n)}}])&&P(n.prototype,r),i&&P(n,i),t}()).initClass(),C=C)},426:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return f});var r=n(0),o=n.n(r),i=n(232),a=n(163);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c="/users/current.json",l="Editor";function u(){return Object(a.a)()?Object(i.a)(c).then(function(e){return e.json()}):Promise.resolve({})}function f(){var e=s(Object(r.useState)(!0),2),t=e[0],n=e[1],i=s(Object(r.useState)(!1),2),a=i[0],c=i[1],l=s(Object(r.useState)({}),2),f=l[0],p=l[1];return o.a.useEffect(function(){u().then(function(e){return p(e)}).catch(function(){return c(!0)}).finally(function(){return n(!1)})},[]),{loading:t,error:a,user:f}}},457:function(e,t,n){"use strict";n.r(t);var r,o=n(1),i=n.n(o),a=n(12);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a.default),n=t,o=[{key:"initClass",value:function(){this.prototype.events={"change #event_country":"changeCountry"}}}],(r=[{key:"initialize",value:function(e){if(u(f(t.prototype),"initialize",this).call(this,e),this.countrySelector=i()("#event_country"),this.stateSelector=i()("#event_state"),!this.country())return this.disableStateSelector()}},{key:"changeCountry",value:function(e){return this.disableStateSelector(),this.country()?this.updateStateSelector():this.clearStateSelector()}},{key:"clearStateSelector",value:function(){return this.stateSelector.children("option").remove()}},{key:"country",value:function(){return this.countrySelector.children("option:selected").text()}},{key:"disableStateSelector",value:function(){return this.stateSelector.attr("disabled",!0)}},{key:"enableStateSelector",value:function(){return this.stateSelector.attr("disabled",!1)}},{key:"updateStateSelector",value:function(){var e=this,t=i()("#user_selected_event_state").val();return i.a.ajax({type:"GET",url:"/countries/".concat(this.country(),"/states"),dataType:"json",success:function(n){return e.clearStateSelector(),e.enableStateSelector(),function(){var r=[];for(var o in n){var a=n[o],s=i()("<option>").attr({value:o}).text(a.name);o===t&&s.prop("selected",!0),r.push(s.appendTo(e.stateSelector))}return r}()}})}}])&&c(n.prototype,r),o&&c(n,o),t}()).initClass(),r=r)},460:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(232);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e){var t=document.querySelector("meta[name=".concat(e,"]"));return t?t.getAttribute("content"):null},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"CSRF",get:function(){delete this.CSRF;var e={param:i("csrf-param"),token:i("csrf-token")};return this.CSRF=e.param&&e.token?Promise.resolve(e):Object(r.a)("/csrf-token").then(function(e){return e.json()}).then(function(e){var t=e.param,n=e.token;return Promise.resolve({param:t,token:n})}),this.CSRF}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}()},461:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o;t.a=((o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"initClass",value:function(){this.list=["Adjunct assistant professor","Adjunct associate","Adjunct professor","Assistant lecturer","Assistant professor emeritus","Assistant researcher","Assistant scientist","Associate dean","Associate lecturer","Associate professor","Associate professor emeritus","Associate research scientist","Chair professor","Chancellor","Chief executive officer","Clinical assistant professor","Clinical associate professor","Clinical professor","Course coordinator","Dean","Dean of faculties","Deputy Principal","Deputy chancellor","Deputy vice-chancellor","Emeritus professor","Emeritus reader","Faculty dean","Faculty deputy dean","Fellow","Head of department","Head of school","Instructor","Junior scientist","Lecturer","Postdoctoral associate","Postdoctoral fellow","Postdoctoral research associate","Postdoctoral research fellow","Principal","Pro-vice-chancellor","Professor","Professor emeritus","Professorial fellow","Program director","Provost","Reader","Rector","Registrar","Research assistant","Research assistant professor","Research associate","Research associate professor","Research fellow","Research officer","Research professor","Research scientist","Senior fellow","Senior lecturer","Senior research associate","Senior research fellow","Senior research scientist","Senior research technician","Senior scientist","Senior tutor","Tutor","Vice chancellor","Vice-principal","Visiting assistant professor","Visiting associate professor","Visiting professor","Visitor"]}}],(n=null)&&r(t.prototype,n),o&&r(t,o),e}()).initClass(),o=o)},465:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(13),a=n.n(i),s=n(102),c=n(232),l=n(860),u=n.n(l),f=n(16),p=n(861),d=n(5),h=n(3),m=n.n(h);function y(e){var t=e.title,n=e.body,r=e.onClick;return o.a.createElement("div",{role:"button",tabIndex:"0",onClick:r},o.a.createElement("header",null,o.a.createElement("h3",null,t)),o.a.createElement("p",null,n))}y.defaultProps={onClick:null},y.propTypes={onClick:m.a.func,title:m.a.string.isRequired,body:m.a.string.isRequired};var b=y;function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e){var t=e.body,n=e.donateText,i=e.buttonText,a=e.onClick,s=e.onClose,c=e.color,l=e.theme,u=v(Object(r.useState)(!0),2),p=u[0],d=u[1],h=n||i;return o.a.createElement(f.ThemeSelector,{theme:l},o.a.createElement(f.ThickBanner,{buttonText:h,color:c,onClose:function(){d(!1),s()},onClick:a,open:p},t))}g.propTypes={body:m.a.string.isRequired,buttonText:m.a.string,color:m.a.string,donateText:m.a.string,theme:m.a.string,onClick:m.a.func.isRequired,onClose:m.a.func.isRequired},g.defaultProps={color:"primary",theme:"core",donateText:"",buttonText:""};var _=g;function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e){var t=e.title,n=e.body,i=e.person,a=e.donateText,s=e.onClick,c=e.onClose,l=w(Object(r.useState)(!0),2),u=l[0],p=l[1];return o.a.createElement(f.DonationDialog,{donateText:a,onClick:s,onClose:function(){p(!1),c()},open:u},o.a.createElement(f.DialogAvatar,{src:i.avatar}),o.a.createElement(f.DialogInlineTitle,null,t),o.a.createElement(f.DialogContent,null,o.a.createElement(f.Typography,{variant:"subtitle1"},n),o.a.createElement(f.MiniDivider,null),o.a.createElement(f.Person,{name:i.name,caption:i.caption})))}O.propTypes={title:m.a.string.isRequired,body:m.a.string.isRequired,person:m.a.shape({avatar:m.a.string,caption:m.a.string.isRequired,name:m.a.string.isRequired}).isRequired,donateText:m.a.string.isRequired,onClick:m.a.func.isRequired,onClose:m.a.func.isRequired};var k=O;function C(e){var t=e.title,n=e.body,r=e.person,i=e.donateText,a=e.onClick;return o.a.createElement(f.ArticleDonationBanner,{donateText:i,onClick:a},o.a.createElement(f.Typography,{variant:"h6",gutterBottom:!0},t),o.a.createElement(f.Typography,{variant:"body1",paragraph:!0},n),o.a.createElement("div",{key:"attribution"},o.a.createElement(f.Typography,{gutterBottom:!0},o.a.createElement(f.Person,{name:r.name,caption:r.caption})),r.avatar&&o.a.createElement(f.Avatar,{size:48,src:r.avatar})))}C.propTypes={title:m.a.string.isRequired,body:m.a.string.isRequired,person:m.a.shape({avatar:m.a.string,caption:m.a.string,name:m.a.string.isRequired}).isRequired,donateText:m.a.string.isRequired,onClick:m.a.func.isRequired};var S=C;function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(e){var t=e.message,n=e.buttonText,i=e.onClick,a=e.onClose,s=e.theme,c=j(Object(r.useState)(!0),2),l=c[0],u=c[1];return o.a.createElement(f.ThemeSelector,{theme:s},o.a.createElement(f.StickyPopup,{open:l,color:"primary",onClose:function(){u(!1),a()},prominent:!0,dismissable:!0},o.a.createElement(f.Typography,{variant:"h5"},t),o.a.createElement(f.Button,{variant:"contained",onClick:i},n)))}P.defaultProps={buttonText:"Button",message:"Lorem ipsum",theme:"default"},P.propTypes={buttonText:m.a.string,message:m.a.string,onClick:m.a.func.isRequired,onClose:m.a.func.isRequired,theme:m.a.string};var E=P,T=n(194),x=n.n(T),R=100;function M(e){var t=e.children,n=e.onView;return n&&Object(r.useEffect)(n,[]),t}function D(e){var t=e.children,n=e.onView;return o.a.createElement(x.a,{once:!0,offset:R},o.a.createElement(M,{onView:n},t))}D.propTypes={children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]).isRequired,onView:m.a.func.isRequired};var A=D;function $(e){var t=e.donateText,n=e.message,r=e.onClick,i=e.color,a=e.theme,s=t||n;return o.a.createElement(f.ThemeSelector,{theme:a},o.a.createElement(f.ThinBanner,{color:i,onClick:r},s))}$.propTypes={color:m.a.string,donateText:m.a.string,message:m.a.string,onClick:m.a.func.isRequired,theme:m.a.string},$.defaultProps={color:"primary",theme:"core",donateText:"",message:""};var I=$,N=n(4),V=n(862),B=n.n(V),F=n(863),z=n.n(F),L=function(e){var t=e.onClick;return o.a.createElement(f.ThemeProvider,{theme:Object(f.defaultTheme)()},o.a.createElement("div",{className:z.a.republishPanel},o.a.createElement(f.MessageTile,null,o.a.createElement(f.MessageTileHeader,null,o.a.createElement("img",{alt:"CC BY ND",style:{width:100,marginBottom:16},src:B.a}),o.a.createElement("div",null,N.a.t("republish_panel.title"))),o.a.createElement(f.MessageTileBody,null,N.a.t("republish_panel.body")),o.a.createElement(f.MessageTileButton,{size:"small",onClick:t},N.a.t("republish_panel.button_text")))))};L.defaultProps={onClick:function(){}},L.propTypes={onClick:m.a.func.isRequired};var q=L,Y=n(233),U=n(31),H=function(e,t){var n=Object(d.get)(t,["campaign","name"]);e&&t.type&&t.promoId&&n&&Object(U.a)(t.type,"".concat(e," - Promo #").concat(t.promoId),n,1)},W=function(e){H("Impression",e)},G=function(e){H("Dismiss",e)},K=function(e){H("Engagement",e)};function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e){switch(e.type){case"DesktopBanner":return o.a.createElement(A,{onView:e.onView},o.a.createElement(_,e));case"DonationDialog":return o.a.createElement(M,{onView:e.onView},o.a.createElement(k,e));case"EndOfArticle":return o.a.createElement(A,{onView:e.onView},o.a.createElement(S,e));case"MobileBanner":return o.a.createElement(A,{onView:e.onView},o.a.createElement(I,e));case"Republish":return o.a.createElement(M,{onView:e.onView},o.a.createElement(q,e));case"StickyPopup":return o.a.createElement(M,{onView:e.onView},o.a.createElement(E,e));default:return o.a.createElement(M,{onView:e.onView},o.a.createElement(b,e))}}function Z(e){var t=e.promo,n=e.onClick,r=e.onClose,i=e.onView;return o.a.createElement("div",{className:"promo"},o.a.createElement(Q,J({},t.data,{onClick:function(){K(t),n(t),t.data.trigger?Y.a.next(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){X(e,t,n[t])})}return e}({},t.data.trigger)):t.data.href&&Object(Y.b)(t.data.href)},onClose:function(){r(t),G(t)},onView:function(){i(t),W(t)},type:t.type})))}Q.propTypes={type:m.a.string.isRequired,onView:m.a.func.isRequired},Z.propTypes={promo:m.a.shape({data:m.a.object.isRequired,type:m.a.string.isRequired}).isRequired,onClick:m.a.func.isRequired,onClose:m.a.func.isRequired,onView:m.a.func.isRequired};var ee=Z,te=n(93);n.d(t,"a",function(){return ie});var ne=1e3,re="/promos?regionCode=:regionCode";function oe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Array.from(document.getElementsByClassName("slot")),i=Object(p.placementEngine)(window.localStorage,e,n),s=Object(d.throttle)(function(){t&&t()},ne);return window.addEventListener("resize",s),window.addEventListener("scroll",s,{passive:!0}),i.subscribe(function(e){t=e.onRefresh;var n=u()(e.promos,"slotId");r.forEach(function(t){return function(e,t,n,r,i){var s=(t[parseInt(e.dataset.id,10)]||[]).map(function(e){return o.a.createElement(ee,{key:e.promoId,promo:e,onClick:n,onClose:r,onView:i})});a.a.render(o.a.createElement(f.ThemeProvider,{generateClassName:Object(te.a)()},s),e)}(t,n,e.onClick,e.onClose,e.onView)})}),i}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)().then(function(e){return Object(c.a)(re.replace(":regionCode",e))}).then(function(e){return e.json()}).then(function(t){return oe(t,e)})}},466:function(e,t,n){"use strict";var r=n(4),o=n(34),i=n.n(o),a=n(3),s=n.n(a),c=n(0),l=n.n(c),u=n(16),f=n(93),p=n(306),d=n.n(p),h=n(851),m=n.n(h),y=function(e){var t=e.handleClose,n=e.open,o=e.children;return l.a.createElement(u.Dialog,{open:n,onClose:t},l.a.createElement(u.DialogTitle,null,r.a.t("podcast.label.select_podcast_app")),l.a.createElement(u.DialogContent,null,l.a.createElement("div",{className:m.a.dialogOptions},o)),l.a.createElement(u.DialogActions,null,l.a.createElement(u.DialogAction,{onClick:t,variant:"primary"},r.a.t("podcast.button.modal.close"))))};y.defaultProps={handleClose:function(){},open:!1,children:void 0},y.propTypes={handleClose:s.a.func.isRequired,open:s.a.bool,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var b=y,v=n(468),g=n.n(v),_=n(852),w=n.n(_),O=n(853),k=n.n(O),C=n(854),S=n.n(C),j=n(855),P=n.n(j),E=n(856),T=n.n(E),x=n(857),R=n.n(x),M=n(858),D=n.n(M),A=n(859),$=n.n(A),I={googlepodcasts:k.a,itunes:w.a,pocketcasts:D.a,radiopublic:T.a,rss:$.a,spotify:S.a,stitcher:P.a,tunein:R.a},N=function(e){var t=e.provider,n=e.url,o=r.a.t("podcast.label.subscribe_to_".concat(t));return l.a.createElement("li",{className:g.a.subscriptionOption},l.a.createElement("img",{className:g.a.icon,alt:o,src:I[t]}),l.a.createElement("a",{className:g.a.link,href:n,target:"_blank"},o))};N.defaultProps={provider:"",url:""},N.propTypes={provider:s.a.string.isRequired,url:s.a.string.isRequired};var V=N;function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=L(t).call(this,e))||"object"!==B(o)&&"function"!=typeof o?q(r):o).state={isMobile:!1,open:!1},n.handleOpen=n.handleOpen.bind(q(n)),n.handleClose=n.handleClose.bind(q(n)),n.updateViewportSize=n.updateViewportSize.bind(q(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,l.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.updateViewportSize(),window.addEventListener("resize",this.updateViewportSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateViewportSize)}},{key:"updateViewportSize",value:function(){this.setState({isMobile:window.innerWidth<=600})}},{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"renderSubscriptionOptions",value:function(){return Object.entries(this.props.subscriptionOptions).map(function(e){var t=F(e,2),n=t[0],r=t[1];return l.a.createElement(V,{key:n,provider:n,url:r})})}},{key:"renderPanel",value:function(){return this.state.isMobile?"":l.a.createElement("div",{className:d.a.panel},l.a.createElement("h3",null,r.a.t("podcast.label.listen_and_subscribe")),l.a.createElement("ul",null,this.renderSubscriptionOptions()))}},{key:"renderButton",value:function(){return this.state.isMobile?l.a.createElement("div",{className:d.a.buttonContainer},l.a.createElement(u.Button,{className:d.a.button,onClick:this.handleOpen},r.a.t("podcast.label.listen_and_subscribe"))):""}},{key:"render",value:function(){return l.a.createElement("div",{className:i()(d.a.container,this.state.isMobile?d.a.isMobile:null)},l.a.createElement(u.ThemeProvider,{generateClassName:Object(f.a)()},this.renderButton(),this.renderPanel(),l.a.createElement(b,{open:this.state.open,handleClose:this.handleClose},l.a.createElement("ul",null,this.renderSubscriptionOptions()))))}}])&&z(n.prototype,o),a&&z(n,a),t}();U.propTypes={subscriptionOptions:s.a.shape({googlepodcasts:s.a.string,itunes:s.a.string,pocketcasts:s.a.string,radiopublic:s.a.string,rss:s.a.string.isRequired,spotify:s.a.string,stitcher:s.a.string,tunein:s.a.string}).isRequired},U.defaultProps={subscriptionOptions:function(){}};t.a=U},468:function(e,t,n){var r=n(1118);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},469:function(e,t,n){var r=n(1191);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},48:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(5);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}t.a=function(e,t){null==t&&(t={});var n=function(){function e(t,n){a(this,e),this._delayedUpdate=this._delayedUpdate.bind(this),this.renderCallback=n,this.setSource(t)}return c(e,[{key:"setSource",value:function(e){return e instanceof Array?(this.update=this._arrayUpdate,this.sourceArray=e):e instanceof Function?(this.update=this._callbackUpdate,this.sourceCallback=e):(this.update=this._ajaxUpdate,this.sourceUrl=e)}},{key:"cancelRequests",value:function(){return clearTimeout(this.delayedUpdate),null!=this.ajax?this.ajax.abort():void 0}},{key:"_arrayUpdate",value:function(e){var t=this._buildResults(e,this.sourceArray);return this.renderCallback(t)}},{key:"_ajaxUpdate",value:function(e){var t=this;return clearTimeout(this.delayedUpdate),this.delayedUpdate=setTimeout(function(){return t._delayedUpdate(e)},300)}},{key:"_callbackUpdate",value:function(e){var t=this._buildResults(e,this.sourceCallback());return this.renderCallback(t)}},{key:"_delayedUpdate",value:function(e){return null!=this.ajax&&this.ajax.abort(),this.ajax=o.a.ajax({url:this.sourceUrl,data:{term:e},dataType:"json",success:this.renderCallback})}},{key:"_buildResults",value:function(e,t){return Object(i.filter)(t,function(t){return-1!==(t.label||t).toLowerCase().indexOf(e.toLowerCase())})}}]),e}(),r=function(){function e(t,n,r,i){var s;a(this,e),this._closeOnClickOutside=this._closeOnClickOutside.bind(this),this.selectPreviousItem=this.selectPreviousItem.bind(this),this.selectNextItem=this.selectNextItem.bind(this),this.chooseItem=this.chooseItem.bind(this),this.chooseSelectedItem=this.chooseSelectedItem.bind(this),this.clear=this.clear.bind(this),this.render=this.render.bind(this),this._renderItem=this._renderItem.bind(this),null==i&&(i=!1),this.ul=document.createElement("ul"),this.ul.className="autocomplete",this.attachElement=t,this.renderInline=n,this.limit=r||20,this.autoSelect=i,this.renderInline?s=this.attachElement.parentNode:(s=document.body,this.ul.style.position="absolute"),s.appendChild(this.ul),this.clear(),o()(document).on("mousedown",this._closeOnClickOutside)}return c(e,[{key:"_isEventTargetInWidget",value:function(e){return e.target===this.ul||o.a.contains(this.ul,e.target)}},{key:"_closeOnClickOutside",value:function(e){if(!this._isEventTargetInWidget(e))return this.ul.style.display="none"}},{key:"getSelectedIndex",value:function(){return this.selectedIndex}},{key:"setSelectedIndex",value:function(e){if(this.selectedIndex!==e)return this._clearSelection(),this.selectedIndex=e,this._updateSelection()}},{key:"setSelectionCallback",value:function(e){return this.callback=e}},{key:"selectPreviousItem",value:function(){return this._clearSelection(),this.validSelection()?this.selectedIndex>0&&this.selectedIndex--:this.selectedIndex=0,this._updateSelection()}},{key:"selectNextItem",value:function(){return this._clearSelection(),this.validSelection()?this.selectedIndex<this.selectionLimit&&this.selectedIndex++:this.selectedIndex=0,this._updateSelection()}},{key:"chooseItem",value:function(e,t){var n={item:this.items[t]};return"function"==typeof this.callback?this.callback(e,n):void 0}},{key:"chooseSelectedItem",value:function(e){return this.chooseItem(e,this.selectedIndex),this.clear()}},{key:"clear",value:function(){var e;for(this.selectedIndex=void 0;e=this.ul.firstChild;)this.ul.removeChild(e);return this.ul.style.display="none",this.opened=!1}},{key:"render",value:function(e){if(this.items=e.slice(0,this.limit),this.clear(),this.selectionLimit=this.items.length-1,Object(i.each)(this.items,this._renderItem),this._updateSelection(),this.renderInline||(this.position=this._getAttachmentPoint(this.attachElement),this.ul.style.top="".concat(this.position[0],"px"),this.ul.style.left="".concat(this.position[1],"px")),this.ul.style.display="block",this.opened=!0,this.autoSelect)return this.selectNextItem()}},{key:"isOpen",value:function(){return this.opened}},{key:"validSelection",value:function(){return void 0!==this.selectedIndex}},{key:"_getAttachmentPoint",value:function(e){var t,n=t=0;if(e.offsetParent)for(t+=e.offsetHeight;t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;);return[t,n]}},{key:"_renderItem",value:function(e,t){var n=this,r=document.createElement("li");r.className="autocomplete-item";var i=e.label||e;return o()(r).html(i),this.ul.appendChild(r),o()(r).on("mouseover",function(){return n.setSelectedIndex(t)}),o()(r).on("mouseup",function(e){return n.chooseItem(e,t),n.clear()})}},{key:"_clearSelection",value:function(){return null!=this.ul.childNodes[this.selectedIndex]?this.ul.childNodes[this.selectedIndex].className="autocomplete-item":void 0}},{key:"_updateSelection",value:function(){var e;if(e=this.ul.childNodes[this.selectedIndex]){var t=o()(this.ul).height(),n=o()(e).outerHeight(),r=o()(this.ul).scrollTop(),i=t+r,a=n*this.selectedIndex;return a<=r&&o()(this.ul).scrollTop(a),a>=i&&o()(this.ul).scrollTop(a-(t-n)),e.className="autocomplete-item selected"}}}]),e}(),s=new(function(){function e(t,o){a(this,e),this.setSource=this.setSource.bind(this),this.handleItemSelection=this.handleItemSelection.bind(this),this._handleFocus=this._handleFocus.bind(this),this._handleKeyup=this._handleKeyup.bind(this),this._handleKeydown=this._handleKeydown.bind(this),o.select&&(this.select=Object(i.bind)(o.select,t)),this.autoFocus=o.autoFocus,this.element=t,this.element.attr("autocomplete","off"),this.menu=new r(this.element.get(0),o.inline,o.limit,o.autoSelect),this.menu.setSelectionCallback(this.handleItemSelection),this.suggestions=new n(o.source,this.menu.render),this.element.on("keydown",this._handleKeydown),this.element.on("keyup",this._handleKeyup),this.element.on("focus",this._handleFocus),this.element.trigger("autocompletecreate")}return c(e,[{key:"setSource",value:function(e){return this.suggestions.setSource(e)}},{key:"handleItemSelection",value:function(e,t){return"function"==typeof this.select&&this.select(e,t),this.element.trigger("autocompleteselect",t),this.searchText=this.element.val()}},{key:"_handleFocus",value:function(e){if(this.autoFocus)return this.suggestions.update("")}},{key:"_handleKeyup",value:function(e){var t="".concat(e.target.value);if(this.searchText!==t&&t.length>=2)return this.searchText=t,this.suggestions.update(t)}},{key:"_handleKeydown",value:function(e){switch(e.which){case 38:return e.preventDefault(),this.menu.selectPreviousItem();case 40:return e.preventDefault(),this.menu.selectNextItem();case 27:return e.preventDefault(),this.menu.clear();case 13:if(this.menu.validSelection()||(this.suggestions.cancelRequests(),this.menu.clear()),this.menu.isOpen()&&this.menu.validSelection())return e.preventDefault(),this.suggestions.cancelRequests(),this.menu.chooseSelectedItem(e)}}}]),e}())(e,t);return e.data("autocomplete",s)}},50:function(e,t,n){"use strict";n.r(t);var r,o=n(5),i=n(6),a=n(48);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.default=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.View),n=t,s=[{key:"initClass",value:function(){this.prototype.tagName="div",this.prototype.className="chooser-view",this.prototype.events={click:"_handleClick","click .clear":"_handleClear"},this.prototype.clearableButton=Object(o.template)('<i class="icon-trash clear"></i>\n    '),this.prototype.template=Object(o.template)('<div class="chooser-view-selection-pane">\n  <span class="chooser-view-title"><%- title %></span>\n  <%= clearable %>\n  <i class="icon-caret-down closed"></i>\n  <i class="icon-caret-up opened"></i>\n  <div class="chooser-view-autocomplete-wrapper">\n    <i class="icon-search"></i>\n    <input type="text" name="autocomplete">\n  </div>\n</div>')}}],(r=[{key:"initialize",value:function(e){return u(f(t.prototype),"initialize",this).call(this,e),this._handleClear=this._handleClear.bind(this),this._handleClick=this._handleClick.bind(this),this._handleSelect=this._handleSelect.bind(this),this.clearable=e.clearable,this.placeholder=e.placeholder,this.title=e.title,this.render(),this.inputEl=this.$el.find("input"),this.inputEl.on("click",function(e){return e.stopPropagation()}),Object(a.a)(this.inputEl,{autoFocus:e.autoFocus,select:this._handleSelect,source:e.source,inline:!0,limit:e.limit||10,autoSelect:!0})}},{key:"render",value:function(){u(f(t.prototype),"render",this).call(this);var e=this.clearable?this.clearableButton():null,n=this.title||this.placeholder;return this.$el.html(this.template({clearable:e,title:n}))}},{key:"setSource",value:function(e){return this.inputEl.data("autocomplete").setSource(e)}},{key:"reset",value:function(){return this.title=void 0,this._updateTitle()}},{key:"open",value:function(){return this.$el.addClass("open"),this.inputEl.val("").focus(),this._updateTitle(),document.addEventListener("click",this._handleClick,!0)}},{key:"close",value:function(){return this.$el.removeClass("open"),this._updateTitle(),document.removeEventListener("click",this._handleClick,!0)}},{key:"_updateTitle",value:function(){return this.$el.find(".chooser-view-title").html(this.title||this.placeholder)}},{key:"_handleClick",value:function(e){if(e.stopPropagation(),e.target!==this.inputEl.get(0))return this.$el.hasClass("open")?this.close():this.open()}},{key:"_handleClear",value:function(e){e.stopPropagation(),this.reset(),this.trigger("clear")}},{key:"_handleSelect",value:function(e,t){return this.title=t.item.label||t.item,this.trigger("selected",t.item),this.close()}}])&&c(n.prototype,r),s&&c(n,s),t}()).initClass(),r=r)},51:function(e,t,n){"use strict";var r,o=n(5),i=n(6);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.View),n=t,a=[{key:"initClass",value:function(){this.prototype.className="yet-another-spinner"}}],(r=[{key:"initialize",value:function(e){return l(u(t.prototype),"initialize",this).call(this,e),null!=e&&(e.size&&this.$el.css("font-size",e.size),null!=e.centered==1&&this.$el.addClass("centered"),null!=e.fixed==1&&this.$el.addClass("fixed"),e.backgroundColor&&e.foregroundColor&&(this.$el.css("border-color",e.backgroundColor),this.$el.css("border-top-color",e.foregroundColor))),this.render()}},{key:"show",value:function(e){var t=this;return this.$el.show(),this.visible()?"function"==typeof e?e():void 0:(Object(o.defer)(function(){return t.$el.removeClass("hidden")}),null!=e?Object(o.delay)(e,500):void 0)}},{key:"hide",value:function(e){var t=this;return this.visible()?(Object(o.defer)(function(){return t.$el.addClass("hidden")}),null!=e&&Object(o.delay)(e,500)):"function"==typeof e&&e(),Object(o.delay)(function(){return t.$el.hide()},500)}},{key:"visible",value:function(){return!this.$el.hasClass("hidden")}}])&&s(n.prototype,r),a&&s(n,a),t}()).initClass(),r=r)},55:function(e,t,n){"use strict";t.a=function(e){var t=!1;window.XMLHttpRequest?t=new XMLHttpRequest:window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),!1!==t&&(t.open("GET",e,!0),t.send())}},59:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1),o=n.n(r),i=n(6);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,l(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,i["View"]),n=t,(r=[{key:"initialize",value:function(){var e=this;this.$el.on("click",function(t){return function(e,t){if(t){var n=o()(t.target).attr("href");n&&"#"===n&&t.preventDefault()}var r=e.$el.hasClass("disabled"),i=e.$el.attr("disabled");r&&console.log("DEPRECATED - Do not use css to disable controls"),r||i||e.trigger("click",e,t)}(e,t)})}},{key:"setVisible",value:function(e){this.$el.toggle(e)}},{key:"isVisible",value:function(){return"block"===this.$el.css("display")}},{key:"state",value:function(e){e?this.turnOn():this.turnOff()}},{key:"turnOn",value:function(){this.$el.addClass("on")}},{key:"turnOff",value:function(){this.$el.removeClass("on")}},{key:"hide",value:function(){this.setVisible(!1)}},{key:"show",value:function(){this.setVisible(!0)}}])&&s(n.prototype,r),a&&s(n,a),t}()},750:function(e,t,n){t=e.exports=n(39)(!1);var r=n(751)(n(395));t.push([e.i,"/**\n[Name] Colours\n[Section] Carlton\n\n[Description]\n\nShared colours we reuse where we can.\n\n[Example]\n<%\n  colours = {\n    '$tc_red' => '#d8352a',\n    '$tc_grey' => '#383838',\n    '$conv_grey' => '#727272',\n    '$conv_grey_dark' => '#5d5d5d',\n    '$conv_grey_light' => '#f4f5f7',\n    '$facebook_blue' => '#3a5a93',\n    '$twitter_blue' => '#00b0e9',\n    '$linkedin_blue' => '#0181b2',\n    '$orcid_green' => '#a6ce39',\n    '$rss_orange' => '#eb7f3e',\n    '$top-bar-border' => '#eaeaea',\n    '$google_orange' => '#de4931',\n    '$whatsapp_blue' => '#455a64',\n    '$fb_messenger_blue' => '#0084ff'\n  }\n%>\n\n<ul class=\"vivus-colour-examples\">\n  <% colours.each do |colour| %>\n    <li style=\"\n      background-color: <%= colour[1] %>;\n      list-style: none;\n      float: left;\n      width: 150px;\n      height: 150px;\n      margin: 0 20px 60px 0;\n      position: relative;\">\n      <span style=\"position: absolute; bottom: -40px;\">\n        <%= colour[0] %><br /><%= colour[1] %>\n      </span>\n    </li>\n  <% end %>\n</ul>\n**/\n.articles-kuWqx {\n  margin-bottom: 50px;\n  margin-top: 20px;\n}\n.articles-kuWqx:after {\n  visibility: hidden;\n  display: block;\n  font-size: 0;\n  content: \".\";\n  clear: both;\n  height: 0;\n}\n.article-1PA2M {\n  width: 100%;\n  min-height: 155px;\n}\n.article-1PA2M header {\n  margin: 10px;\n}\n.article-1PA2M h2 {\n  font-size: 16px;\n  line-height: normal;\n  position: relative;\n  background-color: #fff;\n  display: block;\n  margin: -50px 0 0;\n  padding: 10px;\n  top: 100%;\n}\n.article-1PA2M img {\n  display: block;\n  width: 100%;\n}\n.empty-figure-1qdSc {\n  background: #fff url("+r+') top center repeat;\n  max-height: 150px;\n}\n@media only screen and (min-width: 1466px) {\n  .empty-figure-1qdSc {\n    max-height: 215px;\n  }\n}\n@media only screen and (max-width: 599px) {\n  .articles-kuWqx {\n    margin-bottom: 10px;\n  }\n  .article-1PA2M:not(:first-child) {\n    min-height: auto;\n    padding: 0 10px 10px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n  .article-1PA2M:not(:first-child) article:after {\n    visibility: hidden;\n    display: block;\n    font-size: 0;\n    content: ".";\n    clear: both;\n    height: 0;\n  }\n  .article-1PA2M:not(:first-child) figure {\n    float: left;\n    width: 30%;\n    margin: 0;\n  }\n  .article-1PA2M:not(:first-child) figure img {\n    display: block;\n  }\n  .article-1PA2M:not(:first-child) header {\n    float: left;\n    width: 70%;\n    margin: 0;\n  }\n  .article-1PA2M:not(:first-child) header h2 {\n    font-size: 14px;\n    left: 0;\n    margin: 0;\n    padding: 0 10px;\n    position: relative;\n    top: 0;\n  }\n}',""]),t.locals={articles:"articles-kuWqx",article:"article-1PA2M","empty-figure":"empty-figure-1qdSc"}},791:function(e,t,n){var r=n(1193);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},83:function(e,t,n){"use strict";var r=n(4);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"render",value:function(){return[{dataAttributes:{},icon:"delete",label:r.a.t("editorial_menu.error.label"),trackAction:"Error",url:r.a.t("editorial_menu.error.url")}]}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}(),a=n(3),s=n.n(a),c=s.a.shape({classNames:s.a.string,dataAttributes:s.a.object.isRequired,group:s.a.string,icon:s.a.string.isRequired,label:s.a.string.isRequired,trackAction:s.a.string.isRequired,url:s.a.string.isRequired}),l=n(0),u=n.n(l),f=n(5),p=n(31);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h="Editorial Menu",m="Click";function y(e){var t=e.item,n=t.classNames,r=t.dataAttributes,o=t.icon,i=t.label,a=t.trackAction,s=t.url,c=Object(f.mapKeys)(r,function(e,t){return"data-".concat(t)});return u.a.createElement("li",null,u.a.createElement("a",d({href:s,className:n,onMouseDown:function(){return Object(p.a)(h,m,a)}},c),u.a.createElement("i",{className:"icon-".concat(o)}),"",i))}y.propTypes={item:c.isRequired};var b=s.a.shape({component:s.a.string.isRequired,group:s.a.string,props:s.a.object,react:s.a.bool.isRequired}),v=n(130);function g(e){var t=e.item,n=t.component,r=t.props;return"ToggleLockUser"===n?u.a.createElement(v.a,r):u.a.createElement(u.a.Fragment,null)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}g.propTypes={item:b.isRequired};var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"for",value:function(e){return e.react?u.a.createElement(g,{key:e.props,item:e}):u.a.createElement(y,{key:e.url,item:e})}}],(n=null)&&_(t.prototype,n),r&&_(t,r),e}();function O(e){var t=e.items,n=Object(f.remove)(t,function(e){return"dangerous"===e.group}),r=t.map(function(e){return w.for(e)}),o=n.map(function(e){return w.for(e)});return u.a.createElement("ul",null,r,u.a.createElement("li",{className:"dangerous"},u.a.createElement("ul",null,o)))}function k(e){var t=e.onClick;return u.a.createElement("a",{className:"toggle",href:"#",onClick:t},u.a.createElement("i",{className:"icon-caret-down"}),u.a.createElement("i",{className:"icon-caret-up"}),r.a.t("editorial_menu.mobile_heading"))}O.propTypes={items:s.a.arrayOf(s.a.oneOfType([c,b])).isRequired},k.propTypes={onClick:s.a.func.isRequired};var C=n(34),S=n.n(C);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function P(e){var t=e.error,n=e.loading,r=e.menuItems;if(n)return u.a.createElement(u.a.Fragment,null);var o=j(Object(l.useState)(!1),2),a=o[0],s=o[1],c=t?i.render():r;return u.a.createElement("nav",{className:S()("editorial-menu",{opened:a})},u.a.createElement(k,{onClick:function(){return s(!a)}}),u.a.createElement("div",{className:"wrapper"},u.a.createElement(O,{items:c})))}P.propTypes={error:s.a.bool.isRequired,loading:s.a.bool.isRequired,menuItems:s.a.arrayOf(s.a.oneOfType([c,b])).isRequired};var E=n(232),T=n(305),x=n(426);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=5,D=1e3;function A(e){var t=e.actionsPath,n=R(Object(l.useState)(!1),2),r=n[0],o=n[1],a=R(Object(l.useState)(!0),2),s=a[0],c=a[1],f=R(Object(l.useState)([]),2),p=f[0],d=f[1],h=Object(x.c)().user.type===x.a;return u.a.useEffect(function(){h&&Object(E.a)(t,{retries:M,retryDelay:D}).then(function(e){return e.json()}).then(function(e){return d(e)}).then(T.a).catch(function(){d(i.render()),o(!0)}).finally(function(){return c(!1)})},[t,h]),h?u.a.createElement(P,{error:r,loading:s,menuItems:p}):u.a.createElement(u.a.Fragment,null)}A.propTypes={actionsPath:s.a.string.isRequired};var $=A,I=n(13),N=n.n(I);n.d(t,"a",function(){return B});var V=".editorial-menu-container";function B(e){var t=document.querySelector(V);if(null!==t){var n=u.a.createElement($,{actionsPath:e});N.a.render(n,t)}}},851:function(e,t,n){var r=n(1117);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},852:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/apple_podcasts-20def131d2139e5162c10157088df399.svg"},853:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/google_podcasts-5f9f696b362a76adb52f573792f01810.svg"},854:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/spotify-14e2c2184297bbf9d94572a9f801f98e.svg"},855:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/stitcher-b135738f376fb900e36725de90d4ae7d.svg"},856:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/radio_public-9d4518c2fa759f7470749205b6c4e1d2.svg"},857:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/tune_in-3e137ff857b4ce901ade795a3f2bd7c0.svg"},858:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/pocket_casts-6c5665926c049c51794dbfba99686623.svg"},859:function(e,t,n){e.exports=n.p+"javascripts/components/Podcast/SubscriptionOption/rss-ff1d96ec7bb8fb9d5f638e33df9e78b2.svg"},862:function(e,t,n){e.exports=n.p+"javascripts/components/RepublishPanel/cc.logo-daf1fc0e8847c0bbcb9b786c82e9d981.svg"},863:function(e,t,n){var r=n(1177);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},864:function(e,t,n){var r=n(1183);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},866:function(e,t,n){var r=n(1184);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},867:function(e,t,n){var r=n(1190);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(40)(r,o);r.locals&&(e.exports=r.locals)},907:function(e,t,n){n(908),n(1521),e.exports=n(1196)},908:function(e,t,n){n.p=window.public_path},93:function(e,t,n){"use strict";var r=n(196),o=Object(r.a)();t.a=function(){return o}}},[[907,0,15]]]);